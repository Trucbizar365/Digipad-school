import{f as xr,g as Ao,_ as ds,o as T,c as w,h as rt,a as l,t as Z,d as fe,w as Q,n as Ne,F as Qe,j as Je,k as jl,l as Qo,r as $i,e as ot,b as Ei,m as $n,p as Mi,T as Xl,q as Ii,v as Ri,i as Ul}from"../chunks/chunk-52c44b3c.js";import{M as zl,N as Yl,a as Ct}from"../chunks/chunk-d94ac4f9.js";import{i as Ci}from"../chunks/chunk-f72dc44a.js";import{C as Gl,f as xl}from"../chunks/chunk-03546e6c.js";import{C as Wl}from"../chunks/chunk-9dd88e65.js";var uo={exports:{}};(function(e,t){(function(i,a){a(t)})(xr,function(i){var a=Object.assign||function(n){for(var $=1;$<arguments.length;$++){var _=arguments[$];for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(n[C]=_[C])}return n},s="defaultParagraphSeparator",d="formatBlock",r=function(n,$,_){return n.addEventListener($,_)},f=function(n,$){return n.appendChild($)},E=function(n){return document.createElement(n)},F=function(n){return document.queryCommandState(n)},b=function(n){var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return document.execCommand(n,!1,$)},p={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return F("bold")},result:function(){return b("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return F("italic")},result:function(){return b("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return F("underline")},result:function(){return b("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return F("strikeThrough")},result:function(){return b("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return b(d,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return b(d,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return b(d,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return b(d,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return b("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return b("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return b(d,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return b("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var n=window.prompt("Enter the link URL");n&&b("createLink",n)}},image:{icon:"&#128247;",title:"Image",result:function(){var n=window.prompt("Enter the image URL");n&&b("insertImage",n)}}},B={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},te=function(n){var $=n.actions?n.actions.map(function(o){return typeof o=="string"?p[o]:p[o.name]?a({},p[o.name],o):o}):Object.keys(p).map(function(o){return p[o]}),_=a({},B,n.classes),C=n[s]||"div",k=E("div");k.className=_.actionbar,f(n.element,k);var R=n.element.content=E("div");return R.contentEditable=!0,R.className=_.content,R.oninput=function(o){var y=o.target.firstChild;y&&y.nodeType===3?b(d,"<"+C+">"):R.innerHTML==="<br>"&&(R.innerHTML=""),n.onChange(R.innerHTML)},R.onkeydown=function(o){var y;o.key==="Enter"&&(y=d,document.queryCommandValue(y)==="blockquote")&&setTimeout(function(){return b(d,"<"+C+">")},0)},f(n.element,R),$.forEach(function(o){var y=E("button");if(y.className=_.button,y.innerHTML=o.icon,y.title=o.title,y.setAttribute("type","button"),y.onclick=function(){return o.result()&&R.focus()},o.state){var O=function(){return y.classList[o.state()?"add":"remove"](_.selected)};r(R,"keyup",O),r(R,"mouseup",O),r(y,"click",O)}f(k,y)}),n.styleWithCSS&&b("styleWithCSS"),b(s,C),n.element},H={exec:b,init:te};i.exec=b,i.init=te,i.default=H,Object.defineProperty(i,"__esModule",{value:!0})})})(uo,uo.exports);var Ql=uo.exports;const ft=Ao(Ql),Zl="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Jl="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",kn=(e,t)=>{for(const i in t)e[i]=t[i];return e},fo="numeric",co="ascii",ho="alpha",_a="asciinumeric",ia="alphanumeric",mo="domain",Wr="emoji",e0="scheme",t0="slashscheme",Zo="whitespace";function i0(e,t){return e in t||(t[e]=[]),t[e]}function cn(e,t,i){t[fo]&&(t[_a]=!0,t[ia]=!0),t[co]&&(t[_a]=!0,t[ho]=!0),t[_a]&&(t[ia]=!0),t[ho]&&(t[ia]=!0),t[ia]&&(t[mo]=!0),t[Wr]&&(t[mo]=!0);for(const a in t){const s=i0(a,i);s.indexOf(e)<0&&s.push(e)}}function n0(e,t){const i={};for(const a in t)t[a].indexOf(e)>=0&&(i[a]=!0);return i}function ui(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}ui.groups={};ui.prototype={accepts(){return!!this.t},go(e){const t=this,i=t.j[e];if(i)return i;for(let a=0;a<t.jr.length;a++){const s=t.jr[a][0],d=t.jr[a][1];if(d&&s.test(e))return d}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,i,a){for(let s=0;s<e.length;s++)this.tt(e[s],t,i,a)},tr(e,t,i,a){a=a||ui.groups;let s;return t&&t.j?s=t:(s=new ui(t),i&&a&&cn(t,i,a)),this.jr.push([e,s]),s},ts(e,t,i,a){let s=this;const d=e.length;if(!d)return s;for(let r=0;r<d-1;r++)s=s.tt(e[r]);return s.tt(e[d-1],t,i,a)},tt(e,t,i,a){a=a||ui.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const d=t;let r,f=s.go(e);if(f?(r=new ui,kn(r.j,f.j),r.jr.push.apply(r.jr,f.jr),r.jd=f.jd,r.t=f.t):r=new ui,d){if(a)if(r.t&&typeof r.t=="string"){const E=kn(n0(r.t,a),i);cn(d,E,a)}else i&&cn(d,i,a);r.t=d}return s.j[e]=r,r}};const Ze=(e,t,i,a,s)=>e.ta(t,i,a,s),hi=(e,t,i,a,s)=>e.tr(t,i,a,s),Jo=(e,t,i,a,s)=>e.ts(t,i,a,s),Ae=(e,t,i,a,s)=>e.tt(t,i,a,s),Vi="WORD",vo="UWORD",zn="LOCALHOST",po="TLD",bo="UTLD",Ea="SCHEME",En="SLASH_SCHEME",Mo="NUM",Qr="WS",Io="NL",Fn="OPENBRACE",Vn="CLOSEBRACE",Aa="OPENBRACKET",Ma="CLOSEBRACKET",Ia="OPENPAREN",Ra="CLOSEPAREN",Ba="OPENANGLEBRACKET",$a="CLOSEANGLEBRACKET",Da="FULLWIDTHLEFTPAREN",La="FULLWIDTHRIGHTPAREN",Oa="LEFTCORNERBRACKET",Na="RIGHTCORNERBRACKET",Pa="LEFTWHITECORNERBRACKET",Fa="RIGHTWHITECORNERBRACKET",Va="FULLWIDTHLESSTHAN",Ha="FULLWIDTHGREATERTHAN",qa="AMPERSAND",Ka="APOSTROPHE",ja="ASTERISK",Yi="AT",Xa="BACKSLASH",Ua="BACKTICK",za="CARET",xi="COLON",Ro="COMMA",Ya="DOLLAR",Di="DOT",Ga="EQUALS",Bo="EXCLAMATION",Li="HYPHEN",xa="PERCENT",Wa="PIPE",Qa="PLUS",Za="POUND",Ja="QUERY",$o="QUOTE",Do="SEMI",Oi="SLASH",Hn="TILDE",es="UNDERSCORE",Zr="EMOJI",ts="SYM";var Jr=Object.freeze({__proto__:null,WORD:Vi,UWORD:vo,LOCALHOST:zn,TLD:po,UTLD:bo,SCHEME:Ea,SLASH_SCHEME:En,NUM:Mo,WS:Qr,NL:Io,OPENBRACE:Fn,CLOSEBRACE:Vn,OPENBRACKET:Aa,CLOSEBRACKET:Ma,OPENPAREN:Ia,CLOSEPAREN:Ra,OPENANGLEBRACKET:Ba,CLOSEANGLEBRACKET:$a,FULLWIDTHLEFTPAREN:Da,FULLWIDTHRIGHTPAREN:La,LEFTCORNERBRACKET:Oa,RIGHTCORNERBRACKET:Na,LEFTWHITECORNERBRACKET:Pa,RIGHTWHITECORNERBRACKET:Fa,FULLWIDTHLESSTHAN:Va,FULLWIDTHGREATERTHAN:Ha,AMPERSAND:qa,APOSTROPHE:Ka,ASTERISK:ja,AT:Yi,BACKSLASH:Xa,BACKTICK:Ua,CARET:za,COLON:xi,COMMA:Ro,DOLLAR:Ya,DOT:Di,EQUALS:Ga,EXCLAMATION:Bo,HYPHEN:Li,PERCENT:xa,PIPE:Wa,PLUS:Qa,POUND:Za,QUERY:Ja,QUOTE:$o,SEMI:Do,SLASH:Oi,TILDE:Hn,UNDERSCORE:es,EMOJI:Zr,SYM:ts});const mn=/[a-z]/,Ss=/\p{L}/u,ks=/\p{Emoji}/u,As=/\d/,er=/\s/,tr="\n",a0="️",s0="‍";let na=null,aa=null;function o0(e){e===void 0&&(e=[]);const t={};ui.groups=t;const i=new ui;na==null&&(na=ir(Zl)),aa==null&&(aa=ir(Jl)),Ae(i,"'",Ka),Ae(i,"{",Fn),Ae(i,"}",Vn),Ae(i,"[",Aa),Ae(i,"]",Ma),Ae(i,"(",Ia),Ae(i,")",Ra),Ae(i,"<",Ba),Ae(i,">",$a),Ae(i,"（",Da),Ae(i,"）",La),Ae(i,"「",Oa),Ae(i,"」",Na),Ae(i,"『",Pa),Ae(i,"』",Fa),Ae(i,"＜",Va),Ae(i,"＞",Ha),Ae(i,"&",qa),Ae(i,"*",ja),Ae(i,"@",Yi),Ae(i,"`",Ua),Ae(i,"^",za),Ae(i,":",xi),Ae(i,",",Ro),Ae(i,"$",Ya),Ae(i,".",Di),Ae(i,"=",Ga),Ae(i,"!",Bo),Ae(i,"-",Li),Ae(i,"%",xa),Ae(i,"|",Wa),Ae(i,"+",Qa),Ae(i,"#",Za),Ae(i,"?",Ja),Ae(i,'"',$o),Ae(i,"/",Oi),Ae(i,";",Do),Ae(i,"~",Hn),Ae(i,"_",es),Ae(i,"\\",Xa);const a=hi(i,As,Mo,{[fo]:!0});hi(a,As,a);const s=hi(i,mn,Vi,{[co]:!0});hi(s,mn,s);const d=hi(i,Ss,vo,{[ho]:!0});hi(d,mn),hi(d,Ss,d);const r=hi(i,er,Qr,{[Zo]:!0});Ae(i,tr,Io,{[Zo]:!0}),Ae(r,tr),hi(r,er,r);const f=hi(i,ks,Zr,{[Wr]:!0});hi(f,ks,f),Ae(f,a0,f);const E=Ae(f,s0);hi(E,ks,f);const F=[[mn,s]],b=[[mn,null],[Ss,d]];for(let p=0;p<na.length;p++)Ui(i,na[p],po,Vi,F);for(let p=0;p<aa.length;p++)Ui(i,aa[p],bo,vo,b);cn(po,{tld:!0,ascii:!0},t),cn(bo,{utld:!0,alpha:!0},t),Ui(i,"file",Ea,Vi,F),Ui(i,"mailto",Ea,Vi,F),Ui(i,"http",En,Vi,F),Ui(i,"https",En,Vi,F),Ui(i,"ftp",En,Vi,F),Ui(i,"ftps",En,Vi,F),cn(Ea,{scheme:!0,ascii:!0},t),cn(En,{slashscheme:!0,ascii:!0},t),e=e.sort((p,B)=>p[0]>B[0]?1:-1);for(let p=0;p<e.length;p++){const B=e[p][0],H=e[p][1]?{[e0]:!0}:{[t0]:!0};B.indexOf("-")>=0?H[mo]=!0:mn.test(B)?As.test(B)?H[_a]=!0:H[co]=!0:H[fo]=!0,Jo(i,B,B,H)}return Jo(i,"localhost",zn,{ascii:!0}),i.jd=new ui(ts),{start:i,tokens:kn({groups:t},Jr)}}function r0(e,t){const i=l0(t.replace(/[A-Z]/g,f=>f.toLowerCase())),a=i.length,s=[];let d=0,r=0;for(;r<a;){let f=e,E=null,F=0,b=null,p=-1,B=-1;for(;r<a&&(E=f.go(i[r]));)f=E,f.accepts()?(p=0,B=0,b=f):p>=0&&(p+=i[r].length,B++),F+=i[r].length,d+=i[r].length,r++;d-=p,r-=B,F-=p,s.push({t:b.t,v:t.slice(d-F,d),s:d-F,e:d})}return s}function l0(e){const t=[],i=e.length;let a=0;for(;a<i;){let s=e.charCodeAt(a),d,r=s<55296||s>56319||a+1===i||(d=e.charCodeAt(a+1))<56320||d>57343?e[a]:e.slice(a,a+2);t.push(r),a+=r.length}return t}function Ui(e,t,i,a,s){let d;const r=t.length;for(let f=0;f<r-1;f++){const E=t[f];e.j[E]?d=e.j[E]:(d=new ui(a),d.jr=s.slice(),e.j[E]=d),e=d}return d=new ui(i),d.jr=s.slice(),e.j[t[r-1]]=d,d}function ir(e){const t=[],i=[];let a=0,s="0123456789";for(;a<e.length;){let d=0;for(;s.indexOf(e[a+d])>=0;)d++;if(d>0){t.push(i.join(""));for(let r=parseInt(e.substring(a,a+d),10);r>0;r--)i.pop();a+=d}else i.push(e[a]),a++}return t}const Yn={defaultProtocol:"http",events:null,format:nr,formatHref:nr,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Lo(e,t){t===void 0&&(t=null);let i=kn({},Yn);e&&(i=kn(i,e instanceof Lo?e.o:e));const a=i.ignoreTags,s=[];for(let d=0;d<a.length;d++)s.push(a[d].toUpperCase());this.o=i,t&&(this.defaultRender=t),this.ignoreTags=s}Lo.prototype={o:Yn,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,i){const a=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=i.t in s?s[i.t]:Yn[e],typeof s=="function"&&a&&(s=s(t,i))):typeof s=="function"&&a&&(s=s(t,i.t,i)),s)},getObj(e,t,i){let a=this.o[e];return typeof a=="function"&&t!=null&&(a=a(t,i.t,i)),a},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function nr(e){return e}function el(e,t){this.t="token",this.v=e,this.tk=t}el.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),i=e.get("truncate",t,this),a=e.get("format",t,this);return i&&a.length>i?a.substring(0,i)+"…":a},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=Yn.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,i=this.toHref(e.get("defaultProtocol")),a=e.get("formatHref",i,this),s=e.get("tagName",i,t),d=this.toFormattedString(e),r={},f=e.get("className",i,t),E=e.get("target",i,t),F=e.get("rel",i,t),b=e.getObj("attributes",i,t),p=e.getObj("events",i,t);return r.href=a,f&&(r.class=f),E&&(r.target=E),F&&(r.rel=F),b&&kn(r,b),{tagName:s,attributes:r,content:d,eventListeners:p}}};function us(e,t){class i extends el{constructor(s,d){super(s,d),this.t=e}}for(const a in t)i.prototype[a]=t[a];return i.t=e,i}const ar=us("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),sr=us("text"),d0=us("nl"),sa=us("url",{isLink:!0,toHref(e){return e===void 0&&(e=Yn.defaultProtocol),this.hasProtocol()?this.v:"".concat(e,"://").concat(this.v)},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==zn&&e[1].t===xi}}),mi=e=>new ui(e);function u0(e){let{groups:t}=e;const i=t.domain.concat([qa,ja,Yi,Xa,Ua,za,Ya,Ga,Li,Mo,xa,Wa,Qa,Za,Oi,ts,Hn,es]),a=[Ka,xi,Ro,Di,Bo,Ja,$o,Do,Ba,$a,Fn,Vn,Ma,Aa,Ia,Ra,Da,La,Oa,Na,Pa,Fa,Va,Ha],s=[qa,Ka,ja,Xa,Ua,za,Ya,Ga,Li,Fn,Vn,xa,Wa,Qa,Za,Ja,Oi,ts,Hn,es],d=mi(),r=Ae(d,Hn);Ze(r,s,r),Ze(r,t.domain,r);const f=mi(),E=mi(),F=mi();Ze(d,t.domain,f),Ze(d,t.scheme,E),Ze(d,t.slashscheme,F),Ze(f,s,r),Ze(f,t.domain,f);const b=Ae(f,Yi);Ae(r,Yi,b),Ae(E,Yi,b),Ae(F,Yi,b);const p=Ae(r,Di);Ze(p,s,r),Ze(p,t.domain,r);const B=mi();Ze(b,t.domain,B),Ze(B,t.domain,B);const te=Ae(B,Di);Ze(te,t.domain,B);const H=mi(ar);Ze(te,t.tld,H),Ze(te,t.utld,H),Ae(b,zn,H);const n=Ae(B,Li);Ze(n,t.domain,B),Ze(H,t.domain,B),Ae(H,Di,te),Ae(H,Li,n);const $=Ae(H,xi);Ze($,t.numeric,ar);const _=Ae(f,Li),C=Ae(f,Di);Ze(_,t.domain,f),Ze(C,s,r),Ze(C,t.domain,f);const k=mi(sa);Ze(C,t.tld,k),Ze(C,t.utld,k),Ze(k,t.domain,f),Ze(k,s,r),Ae(k,Di,C),Ae(k,Li,_),Ae(k,Yi,b);const R=Ae(k,xi),o=mi(sa);Ze(R,t.numeric,o);const y=mi(sa),O=mi();Ze(y,i,y),Ze(y,a,O),Ze(O,i,y),Ze(O,a,O),Ae(k,Oi,y),Ae(o,Oi,y);const x=Ae(E,xi),z=Ae(F,xi),q=Ae(z,Oi),ee=Ae(q,Oi);Ze(E,t.domain,f),Ae(E,Di,C),Ae(E,Li,_),Ze(F,t.domain,f),Ae(F,Di,C),Ae(F,Li,_),Ze(x,t.domain,y),Ae(x,Oi,y),Ze(ee,t.domain,y),Ze(ee,i,y),Ae(ee,Oi,y);const ae=[[Fn,Vn],[Aa,Ma],[Ia,Ra],[Ba,$a],[Da,La],[Oa,Na],[Pa,Fa],[Va,Ha]];for(let I=0;I<ae.length;I++){const[m,N]=ae[I],K=Ae(y,m);Ae(O,m,K),Ae(K,N,y);const W=mi(sa);Ze(K,i,W);const X=mi();Ze(K,a),Ze(W,i,W),Ze(W,a,X),Ze(X,i,W),Ze(X,a,X),Ae(W,N,y),Ae(X,N,y)}return Ae(d,zn,k),Ae(d,Io,d0),{start:d,tokens:Jr}}function f0(e,t,i){let a=i.length,s=0,d=[],r=[];for(;s<a;){let f=e,E=null,F=null,b=0,p=null,B=-1;for(;s<a&&!(E=f.go(i[s].t));)r.push(i[s++]);for(;s<a&&(F=E||f.go(i[s].t));)E=null,f=F,f.accepts()?(B=0,p=f):B>=0&&B++,s++,b++;if(B<0)s-=b,s<a&&(r.push(i[s]),s++);else{r.length>0&&(d.push(Ms(sr,t,r)),r=[]),s-=B,b-=B;const te=p.t,H=i.slice(s-b,s);d.push(Ms(te,t,H))}}return r.length>0&&d.push(Ms(sr,t,r)),d}function Ms(e,t,i){const a=i[0].s,s=i[i.length-1].e,d=t.slice(a,s);return new e(d,i)}const Pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function c0(){Pt.scanner=o0(Pt.customSchemes);for(let e=0;e<Pt.tokenQueue.length;e++)Pt.tokenQueue[e][1]({scanner:Pt.scanner});Pt.parser=u0(Pt.scanner.tokens);for(let e=0;e<Pt.pluginQueue.length;e++)Pt.pluginQueue[e][1]({scanner:Pt.scanner,parser:Pt.parser});Pt.initialized=!0}function h0(e){return Pt.initialized||c0(),f0(Pt.parser.start,e,r0(Pt.scanner.start,e))}var m0={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"'},v0=/^#[xX]([A-Fa-f0-9]+)$/,p0=/^#([0-9]+)$/,b0=/^([A-Za-z0-9]+)$/,g0=function(){function e(t){this.named=t}return e.prototype.parse=function(t){if(t){var i=t.match(v0);if(i)return String.fromCharCode(parseInt(i[1],16));if(i=t.match(p0),i)return String.fromCharCode(parseInt(i[1],10));if(i=t.match(b0),i)return this.named[i[1]]||"&"+i[1]+";"}},e}(),y0=/[\t\n\f ]/,_0=/[A-Za-z]/,E0=/\r\n?/g;function $t(e){return y0.test(e)}function or(e){return _0.test(e)}function C0(e){return e.replace(E0,"\n")}var T0=function(){function e(t,i,a){a===void 0&&(a="precompile"),this.delegate=t,this.entityParser=i,this.mode=a,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var s=this.peek();if(s==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&s==="\n"){var d=this.tagNameBuffer.toLowerCase();(d==="pre"||d==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var s=this.peek(),d=this.tagNameBuffer;s==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):s==="&"&&d!=="script"&&d!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(s))},tagOpen:function(){var s=this.consume();s==="!"?this.transitionTo("markupDeclarationOpen"):s==="/"?this.transitionTo("endTagOpen"):(s==="@"||s===":"||or(s))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(s))},markupDeclarationOpen:function(){var s=this.consume();if(s==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var d=s.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();d==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var s=this.consume();$t(s)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var s=this.consume();$t(s)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase()))},doctypeName:function(){var s=this.consume();$t(s)?this.transitionTo("afterDoctypeName"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase())},afterDoctypeName:function(){var s=this.consume();if(!$t(s))if(s===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var d=s.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),r=d.toUpperCase()==="PUBLIC",f=d.toUpperCase()==="SYSTEM";(r||f)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),r?this.transitionTo("afterDoctypePublicKeyword"):f&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var s=this.peek();$t(s)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):s==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):s==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):s===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},doctypePublicIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},afterDoctypePublicIdentifier:function(){var s=this.consume();$t(s)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var s=this.consume();$t(s)||(s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},doctypeSystemIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},afterDoctypeSystemIdentifier:function(){var s=this.consume();$t(s)||s===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var s=this.consume();s==="-"?this.transitionTo("commentStartDash"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(s),this.transitionTo("comment"))},commentStartDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var s=this.consume();s==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(s)},commentEndDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+s),this.transitionTo("comment"))},commentEnd:function(){var s=this.consume();s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+s),this.transitionTo("comment"))},tagName:function(){var s=this.consume();$t(s)?this.transitionTo("beforeAttributeName"):s==="/"?this.transitionTo("selfClosingStartTag"):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(s)},endTagName:function(){var s=this.consume();$t(s)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):s==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(s)},beforeAttributeName:function(){var s=this.peek();if($t(s)){this.consume();return}else s==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var s=this.peek();$t(s)?(this.transitionTo("afterAttributeName"),this.consume()):s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==='"'||s==="'"||s==="<"?(this.delegate.reportSyntaxError(s+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(s)):(this.consume(),this.delegate.appendToAttributeName(s))},afterAttributeName:function(){var s=this.peek();if($t(s)){this.consume();return}else s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s))},beforeAttributeValue:function(){var s=this.peek();$t(s)?this.consume():s==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(s))},attributeValueDoubleQuoted:function(){var s=this.consume();s==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueSingleQuoted:function(){var s=this.consume();s==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueUnquoted:function(){var s=this.peek();$t(s)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):s===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(s))},afterAttributeValueQuoted:function(){var s=this.peek();$t(s)?(this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var s=this.peek();s===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var s=this.consume();(s==="@"||s===":"||or(s))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(s))}},this.reset()}return e.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},e.prototype.transitionTo=function(t){this.state=t},e.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},e.prototype.tokenizePart=function(t){for(this.input+=C0(t);this.index<this.input.length;){var i=this.states[this.state];if(i!==void 0)i.call(this);else throw new Error("unhandled state "+this.state)}},e.prototype.tokenizeEOF=function(){this.flushData()},e.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},e.prototype.peek=function(){return this.input.charAt(this.index)},e.prototype.consume=function(){var t=this.peek();return this.index++,t==="\n"?(this.line++,this.column=0):this.column++,t},e.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var i=this.input.slice(this.index,t),a=this.entityParser.parse(i);if(a){for(var s=i.length;s;)this.consume(),s--;return this.consume(),a}}},e.prototype.markTagStart=function(){this.delegate.tagOpen()},e.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},e.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},e}(),w0=function(){function e(t,i){i===void 0&&(i={}),this.options=i,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new T0(this,t,i.mode),this._currentAttribute=void 0}return e.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},e.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},e.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},e.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},e.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var i=0;i<arguments.length;i++)if(t.type===arguments[i])return t;throw new Error("token type was unexpectedly "+t.type)},e.prototype.push=function(t){this.token=t,this.tokens.push(t)},e.prototype.currentAttribute=function(){return this._currentAttribute},e.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},e.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},e.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},e.prototype.appendToDoctypePublicIdentifier=function(t){var i=this.current("Doctype");i.publicIdentifier===void 0?i.publicIdentifier=t:i.publicIdentifier+=t},e.prototype.appendToDoctypeSystemIdentifier=function(t){var i=this.current("Doctype");i.systemIdentifier===void 0?i.systemIdentifier=t:i.systemIdentifier+=t},e.prototype.endDoctype=function(){this.addLocInfo()},e.prototype.beginData=function(){this.push({type:"Chars",chars:""})},e.prototype.appendToData=function(t){this.current("Chars").chars+=t},e.prototype.finishData=function(){this.addLocInfo()},e.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},e.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},e.prototype.finishComment=function(){this.addLocInfo()},e.prototype.tagOpen=function(){},e.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},e.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},e.prototype.finishTag=function(){this.addLocInfo()},e.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},e.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},e.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},e.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},e.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},e.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},e.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},e.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},e}();function S0(e,t){var i=new w0(new g0(m0),t);return i.tokenize(e)}const tl="LinkifyResult",is="StartTag",il="EndTag",go="Chars",k0="Comment",A0="Doctype";function Is(e,t){t===void 0&&(t={});const i=S0(e),a=[],s=[],d=new Lo(t,R0);for(let r=0;r<i.length;r++){const f=i[r];if(f.type===is){a.push(f);const E=f.tagName.toUpperCase();if(!(E==="A"||d.ignoreTags.indexOf(E)>=0))continue;let b=a.length;I0(E,i,++r,a),r+=a.length-b-1}else if(f.type!==go)a.push(f);else{const E=M0(f.chars,d);a.push.apply(a,E)}}for(let r=0;r<a.length;r++){const f=a[r];switch(f.type){case tl:s.push(f.rendered);break;case is:{let E="<"+f.tagName;f.attributes.length>0&&(E+=" "+$0(f.attributes).join(" ")),f.selfClosing&&(E+=" /"),E+=">",s.push(E);break}case il:s.push("</".concat(f.tagName,">"));break;case go:s.push(yo(f.chars));break;case k0:s.push("<!--".concat(yo(f.chars),"-->"));break;case A0:{let E="<!DOCTYPE ".concat(f.name);f.publicIdentifier&&(E+=' PUBLIC "'.concat(f.publicIdentifier,'"')),f.systemIdentifier&&(E+=' "'.concat(f.systemIdentifier,'"')),E+=">",s.push(E);break}}}return s.join("")}function M0(e,t){const i=h0(e),a=[];for(let s=0;s<i.length;s++){const d=i[s];d.t==="nl"&&t.get("nl2br")?a.push({type:is,tagName:"br",attributes:[],selfClosing:!0}):!d.isLink||!t.check(d)?a.push({type:go,chars:d.toString()}):a.push({type:tl,rendered:t.render(d)})}return a}function I0(e,t,i,a){let s=1;for(;i<t.length&&s>0;){let d=t[i];d.type===is&&d.tagName.toUpperCase()===e?s++:d.type===il&&d.tagName.toUpperCase()===e&&s--,a.push(d),i++}return a}function R0(e){let{tagName:t,attributes:i,content:a}=e;return"<".concat(t," ").concat(B0(i),">").concat(yo(a),"</").concat(t,">")}function yo(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nl(e){return e.replace(/"/g,"&quot;")}function B0(e){const t=[];for(const i in e){const a=e[i]+"";t.push("".concat(i,'="').concat(nl(a),'"'))}return t.join(" ")}function $0(e){const t=[];for(let i=0;i<e.length;i++){const a=e[i][0],s=e[i][1]+"";t.push("".concat(a,'="').concat(nl(s),'"'))}return t}var al={};function D0(e){return e==null}al.isNil=D0;function L0(e){return typeof e=="string"}var O0=L0,sl={},N0=al,P0=O0;function F0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return N0.isNil(e)?t:P0(e)?e:String(e)}sl.coerceToString=F0;var Rt={},ol="\\d",fs="\\s\\uFEFF\\xA0",Qi="\\uD800-\\uDBFF",Zi="\\uDC00-\\uDFFF",Oo="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",rl="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",V0=new RegExp("(["+rl+"]|["+Qi+"]["+Zi+"]|["+Qi+"](?!["+Zi+"])|(?:[^"+Qi+"]|^)["+Zi+"])(["+Oo+"]+)","g"),H0=new RegExp("(["+Qi+"])(["+Zi+"])","g"),q0=new RegExp("((?:["+rl+"]|["+Qi+"]["+Zi+"]|["+Qi+"](?!["+Zi+"])|(?:[^"+Qi+"]|^)["+Zi+"])(?:["+Oo+"]+))|(["+Qi+"]["+Zi+"])|([\\n\\r\\u2028\\u2029])|(.)","g"),K0=new RegExp("["+fs+"]"),j0=new RegExp("^["+fs+"]+"),X0=new RegExp("["+fs+"]+$"),U0=new RegExp("^"+ol+"+$"),z0=/[-[\]{}()*+!<=:?./\\^$|#,]/g,Y0=/[^A-Za-z0-9]/g,G0=/[<>&"'`]/g,x0=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,W0=/\.?0+$/g,Q0=/<([A-Za-z0-9]+)>/g;Rt.REGEXP_COMBINING_MARKS=V0;Rt.REGEXP_CONVERSION_SPECIFICATION=x0;Rt.REGEXP_DIGIT=U0;Rt.REGEXP_HTML_SPECIAL_CHARACTERS=G0;Rt.REGEXP_NON_LATIN=Y0;Rt.REGEXP_SPECIAL_CHARACTERS=z0;Rt.REGEXP_SURROGATE_PAIRS=H0;Rt.REGEXP_TAG_LIST=Q0;Rt.REGEXP_TRAILING_ZEROS=W0;Rt.REGEXP_TRIM_LEFT=j0;Rt.REGEXP_TRIM_RIGHT=X0;Rt.REGEXP_UNICODE_CHARACTER=q0;Rt.REGEXP_WHITESPACE=K0;Rt.diacriticalMark=Oo;Rt.digit=ol;Rt.whitespace=fs;var Rs=sl,ll=Rt;function Z0(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,s=0;a&&(s=-t.length+1);var d=e.substr(i+s,t.length);return d.toLowerCase()===t}function J0(e){for(var t=[],i;(i=ll.REGEXP_TAG_LIST.exec(e))!==null;)t.push(i[1]);return t}var rr=0,lr=1,Bs=2;function ed(e){for(var t=rr,i="",a=0;t!==Bs;){var s=e[a++].toLowerCase();switch(s){case"<":break;case">":t=Bs;break;default:ll.REGEXP_WHITESPACE.test(s)?t===lr&&(t=Bs):(t===rr&&(t=lr),s!=="/"&&(i+=s));break}}return i}var Dn=0,nn=1,oa=2,dr=3;function td(e,t,i){if(e=Rs.coerceToString(e),e==="")return"";if(!Array.isArray(t)){var a=Rs.coerceToString(t);t=a===""?[]:J0(a)}for(var s=Rs.coerceToString(i),d=e.length,r=t.length>0,f=Z0.bind(null,e),E=Dn,F=0,b="",p="",B=null,te=0;te<d;te++){var H=e[te],n=!1;switch(H){case"<":if(B)break;if(f("< ",te,!1)){n=!0;break}if(E===Dn){n=!0,E=nn;break}if(E===nn){F++;break}n=!0;break;case"!":if(E===nn&&f("<!",te)){E=oa;break}n=!0;break;case"-":if(E===oa&&f("!--",te)){E=dr;break}n=!0;break;case'"':case"'":E===nn&&(B===H?B=null:B||(B=H)),n=!0;break;case"E":case"e":if(E===oa&&f("doctype",te)){E=nn;break}n=!0;break;case">":if(F>0){F--;break}if(B)break;if(E===nn){if(B=null,E=Dn,r){p+=">";var $=ed(p);t.indexOf($.toLowerCase())!==-1?b+=p:b+=s,p=""}else b+=s;break}if(E===oa||E===dr&&f("-->",te)){B=null,E=Dn,p="";break}n=!0;break;default:n=!0}if(n)switch(E){case Dn:b+=H;break;case nn:r&&(p+=H);break}}return b}var id=td;const $s=Ao(id);var At=function(){return At=Object.assign||function(t){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(t[d]=i[d])}return t},At.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:null};var a=document.createEvent("CustomEvent");return a.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),a}));function dl(e,t){for(var i=e.length;i--;)if(e[i].pointerId===t.pointerId)return i;return-1}function _o(e,t){var i;if(t.touches){i=0;for(var a=0,s=t.touches;a<s.length;a++){var d=s[a];d.pointerId=i++,_o(e,d)}return}i=dl(e,t),i>-1&&e.splice(i,1),e.push(t)}function nd(e,t){if(t.touches){for(;e.length;)e.pop();return}var i=dl(e,t);i>-1&&e.splice(i,1)}function ur(e){e=e.slice(0);for(var t=e.pop(),i;i=e.pop();)t={clientX:(i.clientX-t.clientX)/2+t.clientX,clientY:(i.clientY-t.clientY)/2+t.clientY};return t}function Ds(e){if(e.length<2)return 0;var t=e[0],i=e[1];return Math.sqrt(Math.pow(Math.abs(i.clientX-t.clientX),2)+Math.pow(Math.abs(i.clientY-t.clientY),2))}var Gn={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?Gn={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(Gn={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function Ls(e,t,i,a){Gn[e].split(" ").forEach(function(s){t.addEventListener(s,i,a)})}function Os(e,t,i){Gn[e].split(" ").forEach(function(a){t.removeEventListener(a,i)})}var ad=typeof document<"u"&&!!document.documentMode,Ns;function sd(){return Ns||(Ns=document.createElement("div").style)}var fr=["webkit","moz","ms"],ra={};function No(e){if(ra[e])return ra[e];var t=sd();if(e in t)return ra[e]=e;for(var i=e[0].toUpperCase()+e.slice(1),a=fr.length;a--;){var s="".concat(fr[a]).concat(i);if(s in t)return ra[e]=s}}function la(e,t){return parseFloat(t[No(e)])||0}function da(e,t,i){i===void 0&&(i=window.getComputedStyle(e));var a=t==="border"?"Width":"";return{left:la("".concat(t,"Left").concat(a),i),right:la("".concat(t,"Right").concat(a),i),top:la("".concat(t,"Top").concat(a),i),bottom:la("".concat(t,"Bottom").concat(a),i)}}function Tn(e,t,i){e.style[No(t)]=i}function od(e,t){var i=No("transform");Tn(e,"transition","".concat(i," ").concat(t.duration,"ms ").concat(t.easing))}function rd(e,t,i){var a=t.x,s=t.y,d=t.scale,r=t.isSVG;if(Tn(e,"transform","scale(".concat(d,") translate(").concat(a,"px, ").concat(s,"px)")),r&&ad){var f=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",f)}}function Ps(e){var t=e.parentNode,i=window.getComputedStyle(e),a=window.getComputedStyle(t),s=e.getBoundingClientRect(),d=t.getBoundingClientRect();return{elem:{style:i,width:s.width,height:s.height,top:s.top,bottom:s.bottom,left:s.left,right:s.right,margin:da(e,"margin",i),border:da(e,"border",i)},parent:{style:a,width:d.width,height:d.height,top:d.top,bottom:d.bottom,left:d.left,right:d.right,padding:da(t,"padding",a),border:da(t,"border",a)}}}function ld(e){var t=e.ownerDocument,i=e.parentNode;return t&&i&&t.nodeType===9&&i.nodeType===1&&t.documentElement.contains(i)}function dd(e){return(e.getAttribute("class")||"").trim()}function ud(e,t){return e.nodeType===1&&" ".concat(dd(e)," ").indexOf(" ".concat(t," "))>-1}function fd(e,t){for(var i=e;i!=null;i=i.parentNode)if(ud(i,t.excludeClass)||t.exclude.indexOf(i)>-1)return!0;return!1}var cd=/^http:[\w\.\/]+svg$/;function hd(e){return cd.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function md(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}var ul={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:rd,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function fl(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!ld(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=At(At({},ul),t);var i=hd(e),a=e.parentNode;a.style.overflow=t.overflow,a.style.userSelect="none",a.style.touchAction=t.touchAction,(t.canvas?a:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,Tn(e,"transformOrigin",typeof t.origin=="string"?t.origin:i?"0 0":"50% 50%");function s(){a.style.overflow="",a.style.userSelect="",a.style.touchAction="",a.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",Tn(e,"transformOrigin","")}function d(Y){Y===void 0&&(Y={});for(var D in Y)Y.hasOwnProperty(D)&&(t[D]=Y[D]);(Y.hasOwnProperty("cursor")||Y.hasOwnProperty("canvas"))&&(a.style.cursor=e.style.cursor="",(t.canvas?a:e).style.cursor=t.cursor),Y.hasOwnProperty("overflow")&&(a.style.overflow=Y.overflow),Y.hasOwnProperty("touchAction")&&(a.style.touchAction=Y.touchAction,e.style.touchAction=Y.touchAction)}var r=0,f=0,E=1,F=!1;n(t.startScale,{animate:!1,force:!0}),setTimeout(function(){H(t.startX,t.startY,{animate:!1,force:!0})});function b(Y,D,L){if(!L.silent){var c=new CustomEvent(Y,{detail:D});e.dispatchEvent(c)}}function p(Y,D,L){var c={x:r,y:f,scale:E,isSVG:i,originalEvent:L};return requestAnimationFrame(function(){typeof D.animate=="boolean"&&(D.animate?od(e,D):Tn(e,"transition","none")),D.setTransform(e,c,D),b(Y,c,D),b("panzoomchange",c,D)}),c}function B(Y,D,L,c){var h=At(At({},t),c),u={x:r,y:f,opts:h};if(!h.force&&(h.disablePan||h.panOnlyWhenZoomed&&E===h.startScale))return u;if(Y=parseFloat(Y),D=parseFloat(D),h.disableXAxis||(u.x=(h.relative?r:0)+Y),h.disableYAxis||(u.y=(h.relative?f:0)+D),h.contain){var g=Ps(e),j=g.elem.width/E,ne=g.elem.height/E,J=j*L,U=ne*L,de=(J-j)/2,ve=(U-ne)/2;if(h.contain==="inside"){var _e=(-g.elem.margin.left-g.parent.padding.left+de)/L,Le=(g.parent.width-J-g.parent.padding.left-g.elem.margin.left-g.parent.border.left-g.parent.border.right+de)/L;u.x=Math.max(Math.min(u.x,Le),_e);var Se=(-g.elem.margin.top-g.parent.padding.top+ve)/L,Ce=(g.parent.height-U-g.parent.padding.top-g.elem.margin.top-g.parent.border.top-g.parent.border.bottom+ve)/L;u.y=Math.max(Math.min(u.y,Ce),Se)}else if(h.contain==="outside"){var _e=(-(J-g.parent.width)-g.parent.padding.left-g.parent.border.left-g.parent.border.right+de)/L,Le=(de-g.parent.padding.left)/L;u.x=Math.max(Math.min(u.x,Le),_e);var Se=(-(U-g.parent.height)-g.parent.padding.top-g.parent.border.top-g.parent.border.bottom+ve)/L,Ce=(ve-g.parent.padding.top)/L;u.y=Math.max(Math.min(u.y,Ce),Se)}}return h.roundPixels&&(u.x=Math.round(u.x),u.y=Math.round(u.y)),u}function te(Y,D){var L=At(At({},t),D),c={scale:E,opts:L};if(!L.force&&L.disableZoom)return c;var h=t.minScale,u=t.maxScale;if(L.contain){var g=Ps(e),j=g.elem.width/E,ne=g.elem.height/E;if(j>1&&ne>1){var J=g.parent.width-g.parent.border.left-g.parent.border.right,U=g.parent.height-g.parent.border.top-g.parent.border.bottom,de=J/j,ve=U/ne;t.contain==="inside"?u=Math.min(u,de,ve):t.contain==="outside"&&(h=Math.max(h,de,ve))}}return c.scale=Math.min(Math.max(Y,h),u),c}function H(Y,D,L,c){var h=B(Y,D,E,L);return r!==h.x||f!==h.y?(r=h.x,f=h.y,p("panzoompan",h.opts,c)):{x:r,y:f,scale:E,isSVG:i,originalEvent:c}}function n(Y,D,L){var c=te(Y,D),h=c.opts;if(!(!h.force&&h.disableZoom)){Y=c.scale;var u=r,g=f;if(h.focal){var j=h.focal;u=(j.x/Y-j.x/E+r*Y)/Y,g=(j.y/Y-j.y/E+f*Y)/Y}var ne=B(u,g,Y,{relative:!1,force:!0});return r=ne.x,f=ne.y,E=Y,p("panzoomzoom",h,L)}}function $(Y,D){var L=At(At(At({},t),{animate:!0}),D);return n(E*Math.exp((Y?1:-1)*L.step),L)}function _(Y){return $(!0,Y)}function C(Y){return $(!1,Y)}function k(Y,D,L,c){var h=Ps(e),u={width:h.parent.width-h.parent.padding.left-h.parent.padding.right-h.parent.border.left-h.parent.border.right,height:h.parent.height-h.parent.padding.top-h.parent.padding.bottom-h.parent.border.top-h.parent.border.bottom},g=D.clientX-h.parent.left-h.parent.padding.left-h.parent.border.left-h.elem.margin.left,j=D.clientY-h.parent.top-h.parent.padding.top-h.parent.border.top-h.elem.margin.top;i||(g-=h.elem.width/E/2,j-=h.elem.height/E/2);var ne={x:g/u.width*(u.width*Y),y:j/u.height*(u.height*Y)};return n(Y,At(At({},L),{animate:!1,focal:ne}),c)}function R(Y,D){Y.preventDefault();var L=At(At(At({},t),D),{animate:!1}),c=Y.deltaY===0&&Y.deltaX?Y.deltaX:Y.deltaY,h=c<0?1:-1,u=te(E*Math.exp(h*L.step/3),L).scale;return k(u,Y,L,Y)}function o(Y){var D=At(At(At({},t),{animate:!0,force:!0}),Y);E=te(D.startScale,D).scale;var L=B(D.startX,D.startY,E,D);return r=L.x,f=L.y,p("panzoomreset",D)}var y,O,x,z,q,ee,ae=[];function I(Y){if(!fd(Y.target,t)){_o(ae,Y),F=!0,t.handleStartEvent(Y),y=r,O=f,b("panzoomstart",{x:r,y:f,scale:E,isSVG:i,originalEvent:Y},t);var D=ur(ae);x=D.clientX,z=D.clientY,q=E,ee=Ds(ae)}}function m(Y){if(!(!F||y===void 0||O===void 0||x===void 0||z===void 0)){_o(ae,Y);var D=ur(ae),L=ae.length>1,c=E;if(L){ee===0&&(ee=Ds(ae));var h=Ds(ae)-ee;c=te(h*t.step/80+q).scale,k(c,D,{animate:!1},Y)}(!L||t.pinchAndPan)&&H(y+(D.clientX-x)/c,O+(D.clientY-z)/c,{animate:!1},Y)}}function N(Y){ae.length===1&&b("panzoomend",{x:r,y:f,scale:E,isSVG:i,originalEvent:Y},t),nd(ae,Y),F&&(F=!1,y=O=x=z=void 0)}var K=!1;function W(){K||(K=!0,Ls("down",t.canvas?a:e,I),Ls("move",document,m,{passive:!0}),Ls("up",document,N,{passive:!0}))}function X(){K=!1,Os("down",t.canvas?a:e,I),Os("move",document,m),Os("up",document,N)}return t.noBind||W(),{bind:W,destroy:X,eventNames:Gn,getPan:function(){return{x:r,y:f}},getScale:function(){return E},getOptions:function(){return md(t)},handleDown:I,handleMove:m,handleUp:N,pan:H,reset:o,resetStyle:s,setOptions:d,setStyle:function(Y,D){return Tn(e,Y,D)},zoom:n,zoomIn:_,zoomOut:C,zoomToPoint:k,zoomWithWheel:R}}fl.defaultOptions=ul;var cl={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(e,t){(function(a,s){e.exports=s()})(xr,function(){return function(){var i={686:function(d,r,f){f.d(r,{default:function(){return L}});var E=f(279),F=f.n(E),b=f(370),p=f.n(b),B=f(817),te=f.n(B);function H(c){try{return document.execCommand(c)}catch{return!1}}var n=function(h){var u=te()(h);return H("cut"),u},$=n;function _(c){var h=document.documentElement.getAttribute("dir")==="rtl",u=document.createElement("textarea");u.style.fontSize="12pt",u.style.border="0",u.style.padding="0",u.style.margin="0",u.style.position="absolute",u.style[h?"right":"left"]="-9999px";var g=window.pageYOffset||document.documentElement.scrollTop;return u.style.top="".concat(g,"px"),u.setAttribute("readonly",""),u.value=c,u}var C=function(h,u){var g=_(h);u.container.appendChild(g);var j=te()(g);return H("copy"),g.remove(),j},k=function(h){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},g="";return typeof h=="string"?g=C(h,u):h instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(h==null?void 0:h.type)?g=C(h.value,u):(g=te()(h),H("copy")),g},R=k;function o(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(u){return typeof u}:o=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},o(c)}var y=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=h.action,g=u===void 0?"copy":u,j=h.container,ne=h.target,J=h.text;if(g!=="copy"&&g!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(ne!==void 0)if(ne&&o(ne)==="object"&&ne.nodeType===1){if(g==="copy"&&ne.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(g==="cut"&&(ne.hasAttribute("readonly")||ne.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}else throw new Error('Invalid "target" value, use a valid Element');if(J)return R(J,{container:j});if(ne)return g==="cut"?$(ne):R(ne,{container:j})},O=y;function x(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x=function(u){return typeof u}:x=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},x(c)}function z(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function q(c,h){for(var u=0;u<h.length;u++){var g=h[u];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}function ee(c,h,u){return h&&q(c.prototype,h),u&&q(c,u),c}function ae(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),h&&I(c,h)}function I(c,h){return I=Object.setPrototypeOf||function(g,j){return g.__proto__=j,g},I(c,h)}function m(c){var h=W();return function(){var g=X(c),j;if(h){var ne=X(this).constructor;j=Reflect.construct(g,arguments,ne)}else j=g.apply(this,arguments);return N(this,j)}}function N(c,h){return h&&(x(h)==="object"||typeof h=="function")?h:K(c)}function K(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function X(c){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},X(c)}function Y(c,h){var u="data-clipboard-".concat(c);if(h.hasAttribute(u))return h.getAttribute(u)}var D=function(c){ae(u,c);var h=m(u);function u(g,j){var ne;return z(this,u),ne=h.call(this),ne.resolveOptions(j),ne.listenClick(g),ne}return ee(u,[{key:"resolveOptions",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof j.action=="function"?j.action:this.defaultAction,this.target=typeof j.target=="function"?j.target:this.defaultTarget,this.text=typeof j.text=="function"?j.text:this.defaultText,this.container=x(j.container)==="object"?j.container:document.body}},{key:"listenClick",value:function(j){var ne=this;this.listener=p()(j,"click",function(J){return ne.onClick(J)})}},{key:"onClick",value:function(j){var ne=j.delegateTarget||j.currentTarget,J=this.action(ne)||"copy",U=O({action:J,container:this.container,target:this.target(ne),text:this.text(ne)});this.emit(U?"success":"error",{action:J,text:U,trigger:ne,clearSelection:function(){ne&&ne.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(j){return Y("action",j)}},{key:"defaultTarget",value:function(j){var ne=Y("target",j);if(ne)return document.querySelector(ne)}},{key:"defaultText",value:function(j){return Y("text",j)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(j){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return R(j,ne)}},{key:"cut",value:function(j){return $(j)}},{key:"isSupported",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],ne=typeof j=="string"?[j]:j,J=!!document.queryCommandSupported;return ne.forEach(function(U){J=J&&!!document.queryCommandSupported(U)}),J}}]),u}(F()),L=D},828:function(d){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var f=Element.prototype;f.matches=f.matchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector||f.webkitMatchesSelector}function E(F,b){for(;F&&F.nodeType!==r;){if(typeof F.matches=="function"&&F.matches(b))return F;F=F.parentNode}}d.exports=E},438:function(d,r,f){var E=f(828);function F(B,te,H,n,$){var _=p.apply(this,arguments);return B.addEventListener(H,_,$),{destroy:function(){B.removeEventListener(H,_,$)}}}function b(B,te,H,n,$){return typeof B.addEventListener=="function"?F.apply(null,arguments):typeof H=="function"?F.bind(null,document).apply(null,arguments):(typeof B=="string"&&(B=document.querySelectorAll(B)),Array.prototype.map.call(B,function(_){return F(_,te,H,n,$)}))}function p(B,te,H,n){return function($){$.delegateTarget=E($.target,te),$.delegateTarget&&n.call(B,$)}}d.exports=b},879:function(d,r){r.node=function(f){return f!==void 0&&f instanceof HTMLElement&&f.nodeType===1},r.nodeList=function(f){var E=Object.prototype.toString.call(f);return f!==void 0&&(E==="[object NodeList]"||E==="[object HTMLCollection]")&&"length"in f&&(f.length===0||r.node(f[0]))},r.string=function(f){return typeof f=="string"||f instanceof String},r.fn=function(f){var E=Object.prototype.toString.call(f);return E==="[object Function]"}},370:function(d,r,f){var E=f(879),F=f(438);function b(H,n,$){if(!H&&!n&&!$)throw new Error("Missing required arguments");if(!E.string(n))throw new TypeError("Second argument must be a String");if(!E.fn($))throw new TypeError("Third argument must be a Function");if(E.node(H))return p(H,n,$);if(E.nodeList(H))return B(H,n,$);if(E.string(H))return te(H,n,$);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function p(H,n,$){return H.addEventListener(n,$),{destroy:function(){H.removeEventListener(n,$)}}}function B(H,n,$){return Array.prototype.forEach.call(H,function(_){_.addEventListener(n,$)}),{destroy:function(){Array.prototype.forEach.call(H,function(_){_.removeEventListener(n,$)})}}}function te(H,n,$){return F(document.body,H,n,$)}d.exports=b},817:function(d){function r(f){var E;if(f.nodeName==="SELECT")f.focus(),E=f.value;else if(f.nodeName==="INPUT"||f.nodeName==="TEXTAREA"){var F=f.hasAttribute("readonly");F||f.setAttribute("readonly",""),f.select(),f.setSelectionRange(0,f.value.length),F||f.removeAttribute("readonly"),E=f.value}else{f.hasAttribute("contenteditable")&&f.focus();var b=window.getSelection(),p=document.createRange();p.selectNodeContents(f),b.removeAllRanges(),b.addRange(p),E=b.toString()}return E}d.exports=r},279:function(d){function r(){}r.prototype={on:function(f,E,F){var b=this.e||(this.e={});return(b[f]||(b[f]=[])).push({fn:E,ctx:F}),this},once:function(f,E,F){var b=this;function p(){b.off(f,p),E.apply(F,arguments)}return p._=E,this.on(f,p,F)},emit:function(f){var E=[].slice.call(arguments,1),F=((this.e||(this.e={}))[f]||[]).slice(),b=0,p=F.length;for(b;b<p;b++)F[b].fn.apply(F[b].ctx,E);return this},off:function(f,E){var F=this.e||(this.e={}),b=F[f],p=[];if(b&&E)for(var B=0,te=b.length;B<te;B++)b[B].fn!==E&&b[B].fn._!==E&&p.push(b[B]);return p.length?F[f]=p:delete F[f],this}},d.exports=r,d.exports.TinyEmitter=r}},a={};function s(d){if(a[d])return a[d].exports;var r=a[d]={exports:{}};return i[d](r,r.exports,s),r.exports}return function(){s.n=function(d){var r=d&&d.__esModule?function(){return d.default}:function(){return d};return s.d(r,{a:r}),r}}(),function(){s.d=function(d,r){for(var f in r)s.o(r,f)&&!s.o(d,f)&&Object.defineProperty(d,f,{enumerable:!0,get:r[f]})}}(),function(){s.o=function(d,r){return Object.prototype.hasOwnProperty.call(d,r)}}(),s(686)}().default})})(cl);var vd=cl.exports;const Fs=Ao(vd);var ns={};function pd(e){return new Int8Array(e)}function hl(e){return new Int16Array(e)}function ml(e){return new Int32Array(e)}function vl(e){return new Float32Array(e)}function bd(e){return new Float64Array(e)}function pl(e){if(e.length==1)return vl(e[0]);var t=e[0];e=e.slice(1);for(var i=[],a=0;a<t;a++)i.push(pl(e));return i}function bl(e){if(e.length==1)return ml(e[0]);var t=e[0];e=e.slice(1);for(var i=[],a=0;a<t;a++)i.push(bl(e));return i}function gl(e){if(e.length==1)return hl(e[0]);var t=e[0];e=e.slice(1);for(var i=[],a=0;a<t;a++)i.push(gl(e));return i}function yl(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var i=[],a=0;a<t;a++)i.push(yl(e));return i}var _l={};_l.fill=function(e,t,i,a){if(arguments.length==2)for(var s=0;s<e.length;s++)e[s]=arguments[1];else for(var s=t;s<i;s++)e[s]=a};var Wn={};Wn.arraycopy=function(e,t,i,a,s){for(var d=t+s;t<d;)i[a++]=e[t++]};Wn.out={};Wn.out.println=function(e){console.log(e)};Wn.out.printf=function(){console.log.apply(console,arguments)};var cs={};cs.SQRT2=1.4142135623730951;cs.FAST_LOG10=function(e){return Math.log10(e)};cs.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function Ki(e){this.ordinal=e}Ki.short_block_allowed=new Ki(0);Ki.short_block_coupled=new Ki(1);Ki.short_block_dispensed=new Ki(2);Ki.short_block_forced=new Ki(3);var El={};El.MAX_VALUE=34028235e31;function ci(e){this.ordinal=e}ci.vbr_off=new ci(0);ci.vbr_mt=new ci(1);ci.vbr_rh=new ci(2);ci.vbr_abr=new ci(3);ci.vbr_mtrh=new ci(4);ci.vbr_default=ci.vbr_mtrh;var gd=function(e){},pt={System:Wn,VbrMode:ci,Float:El,ShortBlock:Ki,Util:cs,Arrays:_l,new_array_n:yl,new_byte:pd,new_double:bd,new_float:vl,new_float_n:pl,new_int:ml,new_int_n:bl,new_short:hl,new_short_n:gl,assert:gd},Vs,cr;function yd(){if(cr)return Vs;cr=1;var e=pt,t=e.System;e.VbrMode,e.Float,e.ShortBlock;var i=e.Util,a=e.Arrays;e.new_array_n,e.new_byte,e.new_double;var s=e.new_float;e.new_float_n,e.new_int,e.new_int_n,e.assert;var d=Lt();function r(){var f=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*i.SQRT2*.5/2384e-9,.017876148*i.SQRT2*.5/2384e-9,.003134727*i.SQRT2*.5/2384e-9,.002457142*i.SQRT2*.5/2384e-9,971317e-9*i.SQRT2*.5/2384e-9,218868e-9*i.SQRT2*.5/2384e-9,101566e-9*i.SQRT2*.5/2384e-9,13828e-9*i.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],E=12,F=36,b=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],p=b[d.SHORT_TYPE],B=b[d.SHORT_TYPE],te=b[d.SHORT_TYPE],H=b[d.SHORT_TYPE],n=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function $(k,R,o){for(var y=10,O=R+238-14-286,x=-15;x<0;x++){var z,q,ee;z=f[y+-10],q=k[O+-224]*z,ee=k[R+224]*z,z=f[y+-9],q+=k[O+-160]*z,ee+=k[R+160]*z,z=f[y+-8],q+=k[O+-96]*z,ee+=k[R+96]*z,z=f[y+-7],q+=k[O+-32]*z,ee+=k[R+32]*z,z=f[y+-6],q+=k[O+32]*z,ee+=k[R+-32]*z,z=f[y+-5],q+=k[O+96]*z,ee+=k[R+-96]*z,z=f[y+-4],q+=k[O+160]*z,ee+=k[R+-160]*z,z=f[y+-3],q+=k[O+224]*z,ee+=k[R+-224]*z,z=f[y+-2],q+=k[R+-256]*z,ee-=k[O+256]*z,z=f[y+-1],q+=k[R+-192]*z,ee-=k[O+192]*z,z=f[y+0],q+=k[R+-128]*z,ee-=k[O+128]*z,z=f[y+1],q+=k[R+-64]*z,ee-=k[O+64]*z,z=f[y+2],q+=k[R+0]*z,ee-=k[O+0]*z,z=f[y+3],q+=k[R+64]*z,ee-=k[O+-64]*z,z=f[y+4],q+=k[R+128]*z,ee-=k[O+-128]*z,z=f[y+5],q+=k[R+192]*z,ee-=k[O+-192]*z,q*=f[y+6],z=ee-q,o[30+x*2]=ee+q,o[31+x*2]=f[y+7]*z,y+=18,R--,O++}{var q,ee,ae,I;ee=k[R+-16]*f[y+-10],q=k[R+-32]*f[y+-2],ee+=(k[R+-48]-k[R+16])*f[y+-9],q+=k[R+-96]*f[y+-1],ee+=(k[R+-80]+k[R+48])*f[y+-8],q+=k[R+-160]*f[y+0],ee+=(k[R+-112]-k[R+80])*f[y+-7],q+=k[R+-224]*f[y+1],ee+=(k[R+-144]+k[R+112])*f[y+-6],q-=k[R+32]*f[y+2],ee+=(k[R+-176]-k[R+144])*f[y+-5],q-=k[R+96]*f[y+3],ee+=(k[R+-208]+k[R+176])*f[y+-4],q-=k[R+160]*f[y+4],ee+=(k[R+-240]-k[R+208])*f[y+-3],q-=k[R+224],ae=q-ee,I=q+ee,ee=o[14],q=o[15]-ee,o[31]=I+ee,o[30]=ae+q,o[15]=ae-q,o[14]=I-ee}{var m;m=o[28]-o[0],o[0]+=o[28],o[28]=m*f[y+-2*18+7],m=o[29]-o[1],o[1]+=o[29],o[29]=m*f[y+-2*18+7],m=o[26]-o[2],o[2]+=o[26],o[26]=m*f[y+-4*18+7],m=o[27]-o[3],o[3]+=o[27],o[27]=m*f[y+-4*18+7],m=o[24]-o[4],o[4]+=o[24],o[24]=m*f[y+-6*18+7],m=o[25]-o[5],o[5]+=o[25],o[25]=m*f[y+-6*18+7],m=o[22]-o[6],o[6]+=o[22],o[22]=m*i.SQRT2,m=o[23]-o[7],o[7]+=o[23],o[23]=m*i.SQRT2-o[7],o[7]-=o[6],o[22]-=o[7],o[23]-=o[22],m=o[6],o[6]=o[31]-m,o[31]=o[31]+m,m=o[7],o[7]=o[30]-m,o[30]=o[30]+m,m=o[22],o[22]=o[15]-m,o[15]=o[15]+m,m=o[23],o[23]=o[14]-m,o[14]=o[14]+m,m=o[20]-o[8],o[8]+=o[20],o[20]=m*f[y+-10*18+7],m=o[21]-o[9],o[9]+=o[21],o[21]=m*f[y+-10*18+7],m=o[18]-o[10],o[10]+=o[18],o[18]=m*f[y+-12*18+7],m=o[19]-o[11],o[11]+=o[19],o[19]=m*f[y+-12*18+7],m=o[16]-o[12],o[12]+=o[16],o[16]=m*f[y+-14*18+7],m=o[17]-o[13],o[13]+=o[17],o[17]=m*f[y+-14*18+7],m=-o[20]+o[24],o[20]+=o[24],o[24]=m*f[y+-12*18+7],m=-o[21]+o[25],o[21]+=o[25],o[25]=m*f[y+-12*18+7],m=o[4]-o[8],o[4]+=o[8],o[8]=m*f[y+-12*18+7],m=o[5]-o[9],o[5]+=o[9],o[9]=m*f[y+-12*18+7],m=o[0]-o[12],o[0]+=o[12],o[12]=m*f[y+-4*18+7],m=o[1]-o[13],o[1]+=o[13],o[13]=m*f[y+-4*18+7],m=o[16]-o[28],o[16]+=o[28],o[28]=m*f[y+-4*18+7],m=-o[17]+o[29],o[17]+=o[29],o[29]=m*f[y+-4*18+7],m=i.SQRT2*(o[2]-o[10]),o[2]+=o[10],o[10]=m,m=i.SQRT2*(o[3]-o[11]),o[3]+=o[11],o[11]=m,m=i.SQRT2*(-o[18]+o[26]),o[18]+=o[26],o[26]=m-o[18],m=i.SQRT2*(-o[19]+o[27]),o[19]+=o[27],o[27]=m-o[19],m=o[2],o[19]-=o[3],o[3]-=m,o[2]=o[31]-m,o[31]+=m,m=o[3],o[11]-=o[19],o[18]-=m,o[3]=o[30]-m,o[30]+=m,m=o[18],o[27]-=o[11],o[19]-=m,o[18]=o[15]-m,o[15]+=m,m=o[19],o[10]-=m,o[19]=o[14]-m,o[14]+=m,m=o[10],o[11]-=m,o[10]=o[23]-m,o[23]+=m,m=o[11],o[26]-=m,o[11]=o[22]-m,o[22]+=m,m=o[26],o[27]-=m,o[26]=o[7]-m,o[7]+=m,m=o[27],o[27]=o[6]-m,o[6]+=m,m=i.SQRT2*(o[0]-o[4]),o[0]+=o[4],o[4]=m,m=i.SQRT2*(o[1]-o[5]),o[1]+=o[5],o[5]=m,m=i.SQRT2*(o[16]-o[20]),o[16]+=o[20],o[20]=m,m=i.SQRT2*(o[17]-o[21]),o[17]+=o[21],o[21]=m,m=-i.SQRT2*(o[8]-o[12]),o[8]+=o[12],o[12]=m-o[8],m=-i.SQRT2*(o[9]-o[13]),o[9]+=o[13],o[13]=m-o[9],m=-i.SQRT2*(o[25]-o[29]),o[25]+=o[29],o[29]=m-o[25],m=-i.SQRT2*(o[24]+o[28]),o[24]-=o[28],o[28]=m-o[24],m=o[24]-o[16],o[24]=m,m=o[20]-m,o[20]=m,m=o[28]-m,o[28]=m,m=o[25]-o[17],o[25]=m,m=o[21]-m,o[21]=m,m=o[29]-m,o[29]=m,m=o[17]-o[1],o[17]=m,m=o[9]-m,o[9]=m,m=o[25]-m,o[25]=m,m=o[5]-m,o[5]=m,m=o[21]-m,o[21]=m,m=o[13]-m,o[13]=m,m=o[29]-m,o[29]=m,m=o[1]-o[0],o[1]=m,m=o[16]-m,o[16]=m,m=o[17]-m,o[17]=m,m=o[8]-m,o[8]=m,m=o[9]-m,o[9]=m,m=o[24]-m,o[24]=m,m=o[25]-m,o[25]=m,m=o[4]-m,o[4]=m,m=o[5]-m,o[5]=m,m=o[20]-m,o[20]=m,m=o[21]-m,o[21]=m,m=o[12]-m,o[12]=m,m=o[13]-m,o[13]=m,m=o[28]-m,o[28]=m,m=o[29]-m,o[29]=m,m=o[0],o[0]+=o[31],o[31]-=m,m=o[1],o[1]+=o[30],o[30]-=m,m=o[16],o[16]+=o[15],o[15]-=m,m=o[17],o[17]+=o[14],o[14]-=m,m=o[8],o[8]+=o[23],o[23]-=m,m=o[9],o[9]+=o[22],o[22]-=m,m=o[24],o[24]+=o[7],o[7]-=m,m=o[25],o[25]+=o[6],o[6]-=m,m=o[4],o[4]+=o[27],o[27]-=m,m=o[5],o[5]+=o[26],o[26]-=m,m=o[20],o[20]+=o[11],o[11]-=m,m=o[21],o[21]+=o[10],o[10]-=m,m=o[12],o[12]+=o[19],o[19]-=m,m=o[13],o[13]+=o[18],o[18]-=m,m=o[28],o[28]+=o[3],o[3]-=m,m=o[29],o[29]+=o[2],o[2]-=m}}function _(k,R){for(var o=0;o<3;o++){var y,O,x,z,q,ee;z=k[R+2*3]*b[d.SHORT_TYPE][0]-k[R+5*3],y=k[R+0*3]*b[d.SHORT_TYPE][2]-k[R+3*3],O=z+y,x=z-y,z=k[R+5*3]*b[d.SHORT_TYPE][0]+k[R+2*3],y=k[R+3*3]*b[d.SHORT_TYPE][2]+k[R+0*3],q=z+y,ee=-z+y,y=(k[R+1*3]*b[d.SHORT_TYPE][1]-k[R+4*3])*2069978111953089e-26,z=(k[R+4*3]*b[d.SHORT_TYPE][1]+k[R+1*3])*2069978111953089e-26,k[R+3*0]=O*190752519173728e-25+y,k[R+3*5]=-q*190752519173728e-25+z,x=x*.8660254037844387*1907525191737281e-26,q=q*.5*1907525191737281e-26+z,k[R+3*1]=x-q,k[R+3*2]=x+q,O=O*.5*1907525191737281e-26-y,ee=ee*.8660254037844387*1907525191737281e-26,k[R+3*3]=O+ee,k[R+3*4]=O-ee,R++}}function C(k,R,o){var y,O;{var x,z,q,ee,ae,I,m,N;x=o[17]-o[9],q=o[15]-o[11],ee=o[14]-o[12],ae=o[0]+o[8],I=o[1]+o[7],m=o[2]+o[6],N=o[3]+o[5],k[R+17]=ae+m-N-(I-o[4]),O=(ae+m-N)*B[12+7]+(I-o[4]),y=(x-q-ee)*B[12+6],k[R+5]=y+O,k[R+6]=y-O,z=(o[16]-o[10])*B[12+6],I=I*B[12+7]+o[4],y=x*B[12+0]+z+q*B[12+1]+ee*B[12+2],O=-ae*B[12+4]+I-m*B[12+5]+N*B[12+3],k[R+1]=y+O,k[R+2]=y-O,y=x*B[12+1]-z-q*B[12+2]+ee*B[12+0],O=-ae*B[12+5]+I-m*B[12+3]+N*B[12+4],k[R+9]=y+O,k[R+10]=y-O,y=x*B[12+2]-z+q*B[12+0]-ee*B[12+1],O=ae*B[12+3]-I+m*B[12+4]-N*B[12+5],k[R+13]=y+O,k[R+14]=y-O}{var K,W,X,Y,D,L,c,h;K=o[8]-o[0],X=o[6]-o[2],Y=o[5]-o[3],D=o[17]+o[9],L=o[16]+o[10],c=o[15]+o[11],h=o[14]+o[12],k[R+0]=D+c+h+(L+o[13]),y=(D+c+h)*B[12+7]-(L+o[13]),O=(K-X+Y)*B[12+6],k[R+11]=y+O,k[R+12]=y-O,W=(o[7]-o[1])*B[12+6],L=o[13]-L*B[12+7],y=D*B[12+3]-L+c*B[12+4]+h*B[12+5],O=K*B[12+2]+W+X*B[12+0]+Y*B[12+1],k[R+3]=y+O,k[R+4]=y-O,y=-D*B[12+5]+L-c*B[12+3]-h*B[12+4],O=K*B[12+1]+W-X*B[12+2]-Y*B[12+0],k[R+7]=y+O,k[R+8]=y-O,y=-D*B[12+4]+L-c*B[12+5]-h*B[12+3],O=K*B[12+0]-W+X*B[12+1]-Y*B[12+2],k[R+15]=y+O,k[R+16]=y-O}}this.mdct_sub48=function(k,R,o){for(var y=R,O=286,x=0;x<k.channels_out;x++){for(var z=0;z<k.mode_gr;z++){for(var q,ee=k.l3_side.tt[z][x],ae=ee.xr,I=0,m=k.sb_sample[x][1-z],N=0,K=0;K<18/2;K++)for($(y,O,m[N]),$(y,O+32,m[N+1]),N+=2,O+=64,q=1;q<32;q+=2)m[N-1][q]*=-1;for(q=0;q<32;q++,I+=18){var W=ee.block_type,X=k.sb_sample[x][z],Y=k.sb_sample[x][1-z];if(ee.mixed_block_flag!=0&&q<2&&(W=0),k.amp_filter[q]<1e-12)a.fill(ae,I+0,I+18,0);else{if(k.amp_filter[q]<1)for(var K=0;K<18;K++)Y[K][n[q]]*=k.amp_filter[q];if(W==d.SHORT_TYPE){for(var K=-E/4;K<0;K++){var D=b[d.SHORT_TYPE][K+3];ae[I+K*3+9]=X[9+K][n[q]]*D-X[8-K][n[q]],ae[I+K*3+18]=X[14-K][n[q]]*D+X[15+K][n[q]],ae[I+K*3+10]=X[15+K][n[q]]*D-X[14-K][n[q]],ae[I+K*3+19]=Y[2-K][n[q]]*D+Y[3+K][n[q]],ae[I+K*3+11]=Y[3+K][n[q]]*D-Y[2-K][n[q]],ae[I+K*3+20]=Y[8-K][n[q]]*D+Y[9+K][n[q]]}_(ae,I)}else{for(var L=s(18),K=-F/4;K<0;K++){var c,h;c=b[W][K+27]*Y[K+9][n[q]]+b[W][K+36]*Y[8-K][n[q]],h=b[W][K+9]*X[K+9][n[q]]-b[W][K+18]*X[8-K][n[q]],L[K+9]=c-h*p[3+K+9],L[K+18]=c*p[3+K+9]+h}C(ae,I,L)}}if(W!=d.SHORT_TYPE&&q!=0)for(var K=7;K>=0;--K){var u,g;u=ae[I+K]*te[20+K]+ae[I+-1-K]*H[28+K],g=ae[I+K]*H[28+K]-ae[I+-1-K]*te[20+K],ae[I+-1-K]=u,ae[I+K]=g}}}if(y=o,O=286,k.mode_gr==1)for(var j=0;j<18;j++)t.arraycopy(k.sb_sample[x][1][j],0,k.sb_sample[x][0][j],0,32)}}}return Vs=r,Vs}var Hs,hr;function Cl(){if(hr)return Hs;hr=1;var e=Lt(),t=pt,i=t.System;t.VbrMode,t.Float,t.ShortBlock,t.Util,t.Arrays,t.new_array_n,t.new_byte,t.new_double;var a=t.new_float,s=t.new_float_n;t.new_int,t.new_int_n,t.assert;function d(){this.l=a(e.SBMAX_l),this.s=s([e.SBMAX_s,3]);var r=this;this.assign=function(f){i.arraycopy(f.l,0,r.l,0,e.SBMAX_l);for(var E=0;E<e.SBMAX_s;E++)for(var F=0;F<3;F++)r.s[E][F]=f.s[E][F]}}return Hs=d,Hs}var qs,mr;function _d(){if(mr)return qs;mr=1;var e=Cl();function t(){this.thm=new e,this.en=new e}return qs=t,qs}function ki(e){var t=e;this.ordinal=function(){return t}}ki.STEREO=new ki(0);ki.JOINT_STEREO=new ki(1);ki.DUAL_CHANNEL=new ki(2);ki.MONO=new ki(3);ki.NOT_SET=new ki(4);var Qn=ki,Ks,vr;function Lt(){if(vr)return Ks;vr=1;var e=pt,t=e.System,i=e.VbrMode;e.Float,e.ShortBlock,e.Util,e.Arrays;var a=e.new_array_n;e.new_byte,e.new_double;var s=e.new_float,d=e.new_float_n,r=e.new_int;e.new_int_n;var f=e.assert;E.ENCDELAY=576,E.POSTDELAY=1152,E.MDCTDELAY=48,E.FFTOFFSET=224+E.MDCTDELAY,E.DECDELAY=528,E.SBLIMIT=32,E.CBANDS=64,E.SBPSY_l=21,E.SBPSY_s=12,E.SBMAX_l=22,E.SBMAX_s=13,E.PSFB21=6,E.PSFB12=6,E.BLKSIZE=1024,E.HBLKSIZE=E.BLKSIZE/2+1,E.BLKSIZE_s=256,E.HBLKSIZE_s=E.BLKSIZE_s/2+1,E.NORM_TYPE=0,E.START_TYPE=1,E.SHORT_TYPE=2,E.STOP_TYPE=3,E.MPG_MD_LR_LR=0,E.MPG_MD_LR_I=1,E.MPG_MD_MS_LR=2,E.MPG_MD_MS_I=3,E.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function E(){var F=yd(),b=_d(),p=Qn,B=E.FFTOFFSET,te=E.MPG_MD_MS_LR,H=null;this.psy=null;var n=null,$=null,_=null;this.setModules=function(y,O,x,z){H=y,this.psy=O,n=O,$=z,_=x};var C=new F;function k(y){var O,x;if(y.ATH.useAdjust==0){y.ATH.adjust=1;return}if(x=y.loudness_sq[0][0],O=y.loudness_sq[1][0],y.channels_out==2?(x+=y.loudness_sq[0][1],O+=y.loudness_sq[1][1]):(x+=x,O+=O),y.mode_gr==2&&(x=Math.max(x,O)),x*=.5,x*=y.ATH.aaSensitivityP,x>.03125)y.ATH.adjust>=1?y.ATH.adjust=1:y.ATH.adjust<y.ATH.adjustLimit&&(y.ATH.adjust=y.ATH.adjustLimit),y.ATH.adjustLimit=1;else{var z=31.98*x+625e-6;y.ATH.adjust>=z?(y.ATH.adjust*=z*.075+.925,y.ATH.adjust<z&&(y.ATH.adjust=z)):y.ATH.adjustLimit>=z?y.ATH.adjust=z:y.ATH.adjust<y.ATH.adjustLimit&&(y.ATH.adjust=y.ATH.adjustLimit),y.ATH.adjustLimit=z}}function R(y){var O,x;for(f(0<=y.bitrate_index&&y.bitrate_index<16),f(0<=y.mode_ext&&y.mode_ext<4),y.bitrate_stereoMode_Hist[y.bitrate_index][4]++,y.bitrate_stereoMode_Hist[15][4]++,y.channels_out==2&&(y.bitrate_stereoMode_Hist[y.bitrate_index][y.mode_ext]++,y.bitrate_stereoMode_Hist[15][y.mode_ext]++),O=0;O<y.mode_gr;++O)for(x=0;x<y.channels_out;++x){var z=y.l3_side.tt[O][x].block_type|0;y.l3_side.tt[O][x].mixed_block_flag!=0&&(z=4),y.bitrate_blockType_Hist[y.bitrate_index][z]++,y.bitrate_blockType_Hist[y.bitrate_index][5]++,y.bitrate_blockType_Hist[15][z]++,y.bitrate_blockType_Hist[15][5]++}}function o(y,O){var x=y.internal_flags,z,q;if(x.lame_encode_frame_init==0){var ee,ae,I=s(2014),m=s(286+1152+576);for(x.lame_encode_frame_init=1,ee=0,ae=0;ee<286+576*(1+x.mode_gr);++ee)ee<576*x.mode_gr?(I[ee]=0,x.channels_out==2&&(m[ee]=0)):(I[ee]=O[0][ae],x.channels_out==2&&(m[ee]=O[1][ae]),++ae);for(q=0;q<x.mode_gr;q++)for(z=0;z<x.channels_out;z++)x.l3_side.tt[q][z].block_type=E.SHORT_TYPE;C.mdct_sub48(x,I,m),f(576>=E.FFTOFFSET),f(x.mf_size>=E.BLKSIZE+y.framesize-E.FFTOFFSET),f(x.mf_size>=512+y.framesize-32)}}this.lame_encode_mp3_frame=function(y,O,x,z,q,ee){var ae,I=a([2,2]);I[0][0]=new b,I[0][1]=new b,I[1][0]=new b,I[1][1]=new b;var m=a([2,2]);m[0][0]=new b,m[0][1]=new b,m[1][0]=new b,m[1][1]=new b;var N,K=[null,null],W=y.internal_flags,X=d([2,4]),Y=[.5,.5],D=[[0,0],[0,0]],L=[[0,0],[0,0]],c,h,u;if(K[0]=O,K[1]=x,W.lame_encode_frame_init==0&&o(y,K),W.padding=0,(W.slot_lag-=W.frac_SpF)<0&&(W.slot_lag+=y.out_samplerate,W.padding=1),W.psymodel!=0){var g,j=[null,null],ne=0,J=r(2);for(u=0;u<W.mode_gr;u++){for(h=0;h<W.channels_out;h++)j[h]=K[h],ne=576+u*576-E.FFTOFFSET;if(y.VBR==i.vbr_mtrh||y.VBR==i.vbr_mt?g=n.L3psycho_anal_vbr(y,j,ne,u,I,m,D[u],L[u],X[u],J):g=n.L3psycho_anal_ns(y,j,ne,u,I,m,D[u],L[u],X[u],J),g!=0)return-4;for(y.mode==p.JOINT_STEREO&&(Y[u]=X[u][2]+X[u][3],Y[u]>0&&(Y[u]=X[u][3]/Y[u])),h=0;h<W.channels_out;h++){var U=W.l3_side.tt[u][h];U.block_type=J[h],U.mixed_block_flag=0}}}else for(u=0;u<W.mode_gr;u++)for(h=0;h<W.channels_out;h++)W.l3_side.tt[u][h].block_type=E.NORM_TYPE,W.l3_side.tt[u][h].mixed_block_flag=0,L[u][h]=D[u][h]=700;if(k(W),C.mdct_sub48(W,K[0],K[1]),W.mode_ext=E.MPG_MD_LR_LR,y.force_ms)W.mode_ext=E.MPG_MD_MS_LR;else if(y.mode==p.JOINT_STEREO){var de=0,ve=0;for(u=0;u<W.mode_gr;u++)for(h=0;h<W.channels_out;h++)de+=L[u][h],ve+=D[u][h];if(de<=1*ve){var _e=W.l3_side.tt[0],Le=W.l3_side.tt[W.mode_gr-1];_e[0].block_type==_e[1].block_type&&Le[0].block_type==Le[1].block_type&&(W.mode_ext=E.MPG_MD_MS_LR)}}if(W.mode_ext==te?(N=m,c=L):(N=I,c=D),y.analysis&&W.pinfo!=null)for(u=0;u<W.mode_gr;u++)for(h=0;h<W.channels_out;h++)W.pinfo.ms_ratio[u]=W.ms_ratio[u],W.pinfo.ms_ener_ratio[u]=Y[u],W.pinfo.blocktype[u][h]=W.l3_side.tt[u][h].block_type,W.pinfo.pe[u][h]=c[u][h],t.arraycopy(W.l3_side.tt[u][h].xr,0,W.pinfo.xr[u][h],0,576),W.mode_ext==te&&(W.pinfo.ers[u][h]=W.pinfo.ers[u][h+2],t.arraycopy(W.pinfo.energy[u][h+2],0,W.pinfo.energy[u][h],0,W.pinfo.energy[u][h].length));if(y.VBR==i.vbr_off||y.VBR==i.vbr_abr){var Se,Ce;for(Se=0;Se<18;Se++)W.nsPsy.pefirbuf[Se]=W.nsPsy.pefirbuf[Se+1];for(Ce=0,u=0;u<W.mode_gr;u++)for(h=0;h<W.channels_out;h++)Ce+=c[u][h];for(W.nsPsy.pefirbuf[18]=Ce,Ce=W.nsPsy.pefirbuf[9],Se=0;Se<9;Se++)Ce+=(W.nsPsy.pefirbuf[Se]+W.nsPsy.pefirbuf[18-Se])*E.fircoef[Se];for(Ce=670*5*W.mode_gr*W.channels_out/Ce,u=0;u<W.mode_gr;u++)for(h=0;h<W.channels_out;h++)c[u][h]*=Ce}if(W.iteration_loop.iteration_loop(y,c,Y,N),H.format_bitstream(y),ae=H.copy_buffer(W,z,q,ee,1),y.bWriteVbrTag&&$.addVbrFrame(y),y.analysis&&W.pinfo!=null){for(h=0;h<W.channels_out;h++){var Pe;for(Pe=0;Pe<B;Pe++)W.pinfo.pcmdata[h][Pe]=W.pinfo.pcmdata[h][Pe+y.framesize];for(Pe=B;Pe<1600;Pe++)W.pinfo.pcmdata[h][Pe]=K[h][Pe-B]}_.set_frame_pinfo(y,N)}return R(W),ae}}return Ks=E,Ks}var Xt=pt;Xt.System;Xt.VbrMode;Xt.Float;Xt.ShortBlock;var pr=Xt.Util;Xt.Arrays;Xt.new_array_n;Xt.new_byte;Xt.new_double;var br=Xt.new_float;Xt.new_float_n;Xt.new_int;Xt.new_int_n;Xt.assert;var Et=Lt();function Ed(){var e=br(Et.BLKSIZE),t=br(Et.BLKSIZE_s/2),i=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function a(d,r,f){var E=0,F,b,p;f<<=1;var B=r+f;F=4;do{var te,H,n,$,_,C,k;k=F>>1,$=F,_=F<<1,C=_+$,F=_<<1,b=r,p=b+k;do{var R,o,y,O;o=d[b+0]-d[b+$],R=d[b+0]+d[b+$],O=d[b+_]-d[b+C],y=d[b+_]+d[b+C],d[b+_]=R-y,d[b+0]=R+y,d[b+C]=o-O,d[b+$]=o+O,o=d[p+0]-d[p+$],R=d[p+0]+d[p+$],O=pr.SQRT2*d[p+C],y=pr.SQRT2*d[p+_],d[p+_]=R-y,d[p+0]=R+y,d[p+C]=o-O,d[p+$]=o+O,p+=F,b+=F}while(b<B);for(H=i[E+0],te=i[E+1],n=1;n<k;n++){var x,z;x=1-2*te*te,z=2*te*H,b=r+n,p=r+$-n;do{var q,ee,ae,R,o,I,y,m,O,N;ee=z*d[b+$]-x*d[p+$],q=x*d[b+$]+z*d[p+$],o=d[b+0]-q,R=d[b+0]+q,I=d[p+0]-ee,ae=d[p+0]+ee,ee=z*d[b+C]-x*d[p+C],q=x*d[b+C]+z*d[p+C],O=d[b+_]-q,y=d[b+_]+q,N=d[p+_]-ee,m=d[p+_]+ee,ee=te*y-H*N,q=H*y+te*N,d[b+_]=R-q,d[b+0]=R+q,d[p+C]=I-ee,d[p+$]=I+ee,ee=H*m-te*O,q=te*m+H*O,d[p+_]=ae-q,d[p+0]=ae+q,d[b+C]=o-ee,d[b+$]=o+ee,p+=F,b+=F}while(b<B);x=H,H=x*i[E+0]-te*i[E+1],te=x*i[E+1]+te*i[E+0]}E+=2}while(F<f)}var s=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(d,r,f,E,F){for(var b=0;b<3;b++){var p=Et.BLKSIZE_s/2,B=65535&576/3*(b+1),te=Et.BLKSIZE_s/8-1;do{var H,n,$,_,C,k=s[te<<2]&255;H=t[k]*E[f][F+k+B],C=t[127-k]*E[f][F+k+B+128],n=H-C,H=H+C,$=t[k+64]*E[f][F+k+B+64],C=t[63-k]*E[f][F+k+B+192],_=$-C,$=$+C,p-=4,r[b][p+0]=H+$,r[b][p+2]=H-$,r[b][p+1]=n+_,r[b][p+3]=n-_,H=t[k+1]*E[f][F+k+B+1],C=t[126-k]*E[f][F+k+B+129],n=H-C,H=H+C,$=t[k+65]*E[f][F+k+B+65],C=t[62-k]*E[f][F+k+B+193],_=$-C,$=$+C,r[b][p+Et.BLKSIZE_s/2+0]=H+$,r[b][p+Et.BLKSIZE_s/2+2]=H-$,r[b][p+Et.BLKSIZE_s/2+1]=n+_,r[b][p+Et.BLKSIZE_s/2+3]=n-_}while(--te>=0);a(r[b],p,Et.BLKSIZE_s/2)}},this.fft_long=function(d,r,f,E,F){var b=Et.BLKSIZE/8-1,p=Et.BLKSIZE/2;do{var B,te,H,n,$,_=s[b]&255;B=e[_]*E[f][F+_],$=e[_+512]*E[f][F+_+512],te=B-$,B=B+$,H=e[_+256]*E[f][F+_+256],$=e[_+768]*E[f][F+_+768],n=H-$,H=H+$,p-=4,r[p+0]=B+H,r[p+2]=B-H,r[p+1]=te+n,r[p+3]=te-n,B=e[_+1]*E[f][F+_+1],$=e[_+513]*E[f][F+_+513],te=B-$,B=B+$,H=e[_+257]*E[f][F+_+257],$=e[_+769]*E[f][F+_+769],n=H-$,H=H+$,r[p+Et.BLKSIZE/2+0]=B+H,r[p+Et.BLKSIZE/2+2]=B-H,r[p+Et.BLKSIZE/2+1]=te+n,r[p+Et.BLKSIZE/2+3]=te-n}while(--b>=0);a(r,p,Et.BLKSIZE/2)},this.init_fft=function(d){for(var r=0;r<Et.BLKSIZE;r++)e[r]=.42-.5*Math.cos(2*Math.PI*(r+.5)/Et.BLKSIZE)+.08*Math.cos(4*Math.PI*(r+.5)/Et.BLKSIZE);for(var r=0;r<Et.BLKSIZE_s/2;r++)t[r]=.5*(1-Math.cos(2*Math.PI*(r+.5)/Et.BLKSIZE_s))}}var Cd=Ed,Ut=pt;Ut.System;var vn=Ut.VbrMode,gr=Ut.Float,pn=Ut.ShortBlock,Ht=Ut.Util,Td=Ut.Arrays;Ut.new_array_n;Ut.new_byte;Ut.new_double;var Tt=Ut.new_float,vi=Ut.new_float_n,an=Ut.new_int;Ut.new_int_n;var Ie=Ut.assert,wd=Cd,me=Lt();function Sd(){var e=Qn,t=new wd,i=2.302585092994046,a=2,s=16,d=2,r=16,f=.34,E=1/(14752*14752)/(me.BLKSIZE/2),F=.01,b=.8,p=.6,B=.3,te=3.5,H=21,n=.2302585093;function $(A){return A}function _(A,M){for(var V=0,G=0;G<me.BLKSIZE/2;++G)V+=A[G]*M.ATH.eql_w[G];return V*=E,V}function C(A,M,V,G,oe,P,ie,re,se,ce,le){var he=A.internal_flags;if(se<2)t.fft_long(he,G[oe],se,ce,le),t.fft_short(he,P[ie],se,ce,le);else if(se==2){for(var Ee=me.BLKSIZE-1;Ee>=0;--Ee){var He=G[oe+0][Ee],be=G[oe+1][Ee];G[oe+0][Ee]=(He+be)*Ht.SQRT2*.5,G[oe+1][Ee]=(He-be)*Ht.SQRT2*.5}for(var Ve=2;Ve>=0;--Ve)for(var Ee=me.BLKSIZE_s-1;Ee>=0;--Ee){var He=P[ie+0][Ve][Ee],be=P[ie+1][Ve][Ee];P[ie+0][Ve][Ee]=(He+be)*Ht.SQRT2*.5,P[ie+1][Ve][Ee]=(He-be)*Ht.SQRT2*.5}}M[0]=G[oe+0][0],M[0]*=M[0];for(var Ee=me.BLKSIZE/2-1;Ee>=0;--Ee){var ue=G[oe+0][me.BLKSIZE/2-Ee],Re=G[oe+0][me.BLKSIZE/2+Ee];M[me.BLKSIZE/2-Ee]=(ue*ue+Re*Re)*.5}for(var Ve=2;Ve>=0;--Ve){V[Ve][0]=P[ie+0][Ve][0],V[Ve][0]*=V[Ve][0];for(var Ee=me.BLKSIZE_s/2-1;Ee>=0;--Ee){var ue=P[ie+0][Ve][me.BLKSIZE_s/2-Ee],Re=P[ie+0][Ve][me.BLKSIZE_s/2+Ee];V[Ve][me.BLKSIZE_s/2-Ee]=(ue*ue+Re*Re)*.5}}{for(var Ge=0,Ee=11;Ee<me.HBLKSIZE;Ee++)Ge+=M[Ee];he.tot_ener[se]=Ge}if(A.analysis){for(var Ee=0;Ee<me.HBLKSIZE;Ee++)he.pinfo.energy[re][se][Ee]=he.pinfo.energy_save[se][Ee],he.pinfo.energy_save[se][Ee]=M[Ee];he.pinfo.pe[re][se]=he.pe[se]}A.athaa_loudapprox==2&&se<2&&(he.loudness_sq[re][se]=he.loudness_sq_save[se],he.loudness_sq_save[se]=_(M,he))}var k=8,R=23,o=15,y,O,x,z=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function q(){y=Math.pow(10,(k+1)/16),O=Math.pow(10,(R+1)/16),x=Math.pow(10,o/10)}var ee=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],ae=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],I=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function m(A,M,V,G,oe,P){var ie;if(M>A)if(M<A*O)ie=M/A;else return A+M;else{if(A>=M*O)return A+M;ie=A/M}if(Ie(A>=0),Ie(M>=0),A+=M,G+3<=3+3){if(ie>=y)return A;var re=0|Ht.FAST_LOG10_X(ie,16);return A*ae[re]}var re=0|Ht.FAST_LOG10_X(ie,16);if(P!=0?M=oe.ATH.cb_s[V]*oe.ATH.adjust:M=oe.ATH.cb_l[V]*oe.ATH.adjust,Ie(M>=0),A<x*M){if(A>M){var se,ce;return se=1,re<=13&&(se=I[re]),ce=Ht.FAST_LOG10_X(A/M,10/15),A*((ee[re]-se)*ce+se)}return re>13?A:A*I[re]}return A*ee[re]}var N=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function K(A,M,V){var G;if(A<0&&(A=0),M<0&&(M=0),A<=0)return M;if(M<=0)return A;if(M>A?G=M/A:G=A/M,-2<=V&&V<=2){if(G>=y)return A+M;var oe=0|Ht.FAST_LOG10_X(G,16);return(A+M)*N[oe]}return G<O?A+M:(A<M&&(A=M),A)}function W(A,M){var V=A.internal_flags;if(V.channels_out>1){for(var G=0;G<me.SBMAX_l;G++){var oe=V.thm[0].l[G],P=V.thm[1].l[G];V.thm[0].l[G]+=P*M,V.thm[1].l[G]+=oe*M}for(var G=0;G<me.SBMAX_s;G++)for(var ie=0;ie<3;ie++){var oe=V.thm[0].s[G][ie],P=V.thm[1].s[G][ie];V.thm[0].s[G][ie]+=P*M,V.thm[1].s[G][ie]+=oe*M}}}function X(A){for(var M=0;M<me.SBMAX_l;M++)if(!(A.thm[0].l[M]>1.58*A.thm[1].l[M]||A.thm[1].l[M]>1.58*A.thm[0].l[M])){var V=A.mld_l[M]*A.en[3].l[M],G=Math.max(A.thm[2].l[M],Math.min(A.thm[3].l[M],V));V=A.mld_l[M]*A.en[2].l[M];var oe=Math.max(A.thm[3].l[M],Math.min(A.thm[2].l[M],V));A.thm[2].l[M]=G,A.thm[3].l[M]=oe}for(var M=0;M<me.SBMAX_s;M++)for(var P=0;P<3;P++)if(!(A.thm[0].s[M][P]>1.58*A.thm[1].s[M][P]||A.thm[1].s[M][P]>1.58*A.thm[0].s[M][P])){var V=A.mld_s[M]*A.en[3].s[M][P],G=Math.max(A.thm[2].s[M][P],Math.min(A.thm[3].s[M][P],V));V=A.mld_s[M]*A.en[2].s[M][P];var oe=Math.max(A.thm[3].s[M][P],Math.min(A.thm[2].s[M][P],V));A.thm[2].s[M][P]=G,A.thm[3].s[M][P]=oe}}function Y(A,M,V){var G=M,oe=Math.pow(10,V);M*=2,G*=2;for(var P=0;P<me.SBMAX_l;P++){var ie,re,se,ce;if(ce=A.ATH.cb_l[A.bm_l[P]]*oe,ie=Math.min(Math.max(A.thm[0].l[P],ce),Math.max(A.thm[1].l[P],ce)),re=Math.max(A.thm[2].l[P],ce),se=Math.max(A.thm[3].l[P],ce),ie*M<re+se){var le=ie*G/(re+se);re*=le,se*=le,Ie(re+se>0)}A.thm[2].l[P]=Math.min(re,A.thm[2].l[P]),A.thm[3].l[P]=Math.min(se,A.thm[3].l[P])}oe*=me.BLKSIZE_s/me.BLKSIZE;for(var P=0;P<me.SBMAX_s;P++)for(var he=0;he<3;he++){var ie,re,se,ce;if(ce=A.ATH.cb_s[A.bm_s[P]]*oe,ie=Math.min(Math.max(A.thm[0].s[P][he],ce),Math.max(A.thm[1].s[P][he],ce)),re=Math.max(A.thm[2].s[P][he],ce),se=Math.max(A.thm[3].s[P][he],ce),ie*M<re+se){var le=ie*M/(re+se);re*=le,se*=le,Ie(re+se>0)}A.thm[2].s[P][he]=Math.min(A.thm[2].s[P][he],re),A.thm[3].s[P][he]=Math.min(A.thm[3].s[P][he],se)}}function D(A,M,V,G,oe){var P,ie,re=0,se=0;for(P=ie=0;P<me.SBMAX_s;++ie,++P){for(var ce=A.bo_s[P],le=A.npart_s,he=ce<le?ce:le;ie<he;)Ie(M[ie]>=0),Ie(V[ie]>=0),re+=M[ie],se+=V[ie],ie++;if(A.en[G].s[P][oe]=re,A.thm[G].s[P][oe]=se,ie>=le){++P;break}Ie(M[ie]>=0),Ie(V[ie]>=0);{var Ee=A.PSY.bo_s_weight[P],He=1-Ee;re=Ee*M[ie],se=Ee*V[ie],A.en[G].s[P][oe]+=re,A.thm[G].s[P][oe]+=se,re=He*M[ie],se=He*V[ie]}}for(;P<me.SBMAX_s;++P)A.en[G].s[P][oe]=0,A.thm[G].s[P][oe]=0}function L(A,M,V,G){var oe,P,ie=0,re=0;for(oe=P=0;oe<me.SBMAX_l;++P,++oe){for(var se=A.bo_l[oe],ce=A.npart_l,le=se<ce?se:ce;P<le;)Ie(M[P]>=0),Ie(V[P]>=0),ie+=M[P],re+=V[P],P++;if(A.en[G].l[oe]=ie,A.thm[G].l[oe]=re,P>=ce){++oe;break}Ie(M[P]>=0),Ie(V[P]>=0);{var he=A.PSY.bo_l_weight[oe],Ee=1-he;ie=he*M[P],re=he*V[P],A.en[G].l[oe]+=ie,A.thm[G].l[oe]+=re,ie=Ee*M[P],re=Ee*V[P]}}for(;oe<me.SBMAX_l;++oe)A.en[G].l[oe]=0,A.thm[G].l[oe]=0}function c(A,M,V,G,oe,P){var ie=A.internal_flags,re,se;for(se=re=0;se<ie.npart_s;++se){for(var ce=0,le=ie.numlines_s[se],he=0;he<le;++he,++re){var Ee=M[P][re];ce+=Ee}V[se]=ce}for(Ie(se==ie.npart_s),Ie(re==129),re=se=0;se<ie.npart_s;se++){var He=ie.s3ind_s[se][0],be=ie.s3_ss[re++]*V[He];for(++He;He<=ie.s3ind_s[se][1];)be+=ie.s3_ss[re]*V[He],++re,++He;{var Ve=d*ie.nb_s1[oe][se];G[se]=Math.min(be,Ve)}if(ie.blocktype_old[oe&1]==me.SHORT_TYPE){var Ve=r*ie.nb_s2[oe][se],ue=G[se];G[se]=Math.min(Ve,ue)}ie.nb_s2[oe][se]=ie.nb_s1[oe][se],ie.nb_s1[oe][se]=be,Ie(G[se]>=0)}for(;se<=me.CBANDS;++se)V[se]=0,G[se]=0}function h(A,M,V,G){var oe=A.internal_flags;A.short_blocks==pn.short_block_coupled&&!(M[0]!=0&&M[1]!=0)&&(M[0]=M[1]=0);for(var P=0;P<oe.channels_out;P++)G[P]=me.NORM_TYPE,A.short_blocks==pn.short_block_dispensed&&(M[P]=1),A.short_blocks==pn.short_block_forced&&(M[P]=0),M[P]!=0?(Ie(oe.blocktype_old[P]!=me.START_TYPE),oe.blocktype_old[P]==me.SHORT_TYPE&&(G[P]=me.STOP_TYPE)):(G[P]=me.SHORT_TYPE,oe.blocktype_old[P]==me.NORM_TYPE&&(oe.blocktype_old[P]=me.START_TYPE),oe.blocktype_old[P]==me.STOP_TYPE&&(oe.blocktype_old[P]=me.SHORT_TYPE)),V[P]=oe.blocktype_old[P],oe.blocktype_old[P]=G[P]}function u(A,M,V){return V>=1?A:V<=0?M:M>0?Math.pow(A/M,V)*M:0}var g=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function j(A,M){for(var V=309.07,G=0;G<me.SBMAX_s-1;G++)for(var oe=0;oe<3;oe++){var P=A.thm.s[G][oe];if(Ie(G<g.length),P>0){var ie=P*M,re=A.en.s[G][oe];re>ie&&(re>ie*1e10?V+=g[G]*(10*i):(Ie(ie>0),V+=g[G]*Ht.FAST_LOG10(re/ie)))}}return V}var ne=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function J(A,M){for(var V=281.0575,G=0;G<me.SBMAX_l-1;G++){var oe=A.thm.l[G];if(Ie(G<ne.length),oe>0){var P=oe*M,ie=A.en.l[G];ie>P&&(ie>P*1e10?V+=ne[G]*(10*i):(Ie(P>0),V+=ne[G]*Ht.FAST_LOG10(ie/P)))}}return V}function U(A,M,V,G,oe){var P,ie;for(P=ie=0;P<A.npart_l;++P){var re=0,se=0,ce;for(ce=0;ce<A.numlines_l[P];++ce,++ie){var le=M[ie];Ie(le>=0),re+=le,se<le&&(se=le)}V[P]=re,G[P]=se,oe[P]=re*A.rnumlines_l[P],Ie(A.rnumlines_l[P]>=0),Ie(re>=0),Ie(V[P]>=0),Ie(G[P]>=0),Ie(oe[P]>=0)}}function de(A,M,V,G){var oe=z.length-1,P=0,ie=V[P]+V[P+1];if(Ie(ie>=0),ie>0){var re=M[P];re<M[P+1]&&(re=M[P+1]),Ie(A.numlines_l[P]+A.numlines_l[P+1]-1>0),ie=20*(re*2-ie)/(ie*(A.numlines_l[P]+A.numlines_l[P+1]-1));var se=0|ie;se>oe&&(se=oe),G[P]=se}else G[P]=0;for(P=1;P<A.npart_l-1;P++)if(ie=V[P-1]+V[P]+V[P+1],Ie(ie>=0),ie>0){var re=M[P-1];re<M[P]&&(re=M[P]),re<M[P+1]&&(re=M[P+1]),Ie(A.numlines_l[P-1]+A.numlines_l[P]+A.numlines_l[P+1]-1>0),ie=20*(re*3-ie)/(ie*(A.numlines_l[P-1]+A.numlines_l[P]+A.numlines_l[P+1]-1));var se=0|ie;se>oe&&(se=oe),G[P]=se}else G[P]=0;if(Ie(P>0),Ie(P==A.npart_l-1),ie=V[P-1]+V[P],Ie(ie>=0),ie>0){var re=M[P-1];re<M[P]&&(re=M[P]),Ie(A.numlines_l[P-1]+A.numlines_l[P]-1>0),ie=20*(re*2-ie)/(ie*(A.numlines_l[P-1]+A.numlines_l[P]-1));var se=0|ie;se>oe&&(se=oe),G[P]=se}else G[P]=0;Ie(P==A.npart_l-1)}var ve=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(A,M,V,G,oe,P,ie,re,se,ce){var le=A.internal_flags,he=vi([2,me.BLKSIZE]),Ee=vi([2,3,me.BLKSIZE_s]),He=Tt(me.CBANDS+1),be=Tt(me.CBANDS+1),Ve=Tt(me.CBANDS+2),ue=an(2),Re=an(2),Ge,ge,$e,pe,qe,dt,we,Xe,xe=vi([2,576]),ht,si=an(me.CBANDS+2),_t=an(me.CBANDS+2);for(Td.fill(_t,0),Ge=le.channels_out,A.mode==e.JOINT_STEREO&&(Ge=4),A.VBR==vn.vbr_off?ht=le.ResvMax==0?0:le.ResvSize/le.ResvMax*.5:A.VBR==vn.vbr_rh||A.VBR==vn.vbr_mtrh||A.VBR==vn.vbr_mt?ht=.6:ht=1,ge=0;ge<le.channels_out;ge++){var ut=M[ge],Ft=V+576-350-H+192;for(Ie(ve.length==(H-1)/2),pe=0;pe<576;pe++){var oi,ri;for(oi=ut[Ft+pe+10],ri=0,qe=0;qe<(H-1)/2-1;qe+=2)oi+=ve[qe]*(ut[Ft+pe+qe]+ut[Ft+pe+H-qe]),ri+=ve[qe+1]*(ut[Ft+pe+qe+1]+ut[Ft+pe+H-qe-1]);xe[ge][pe]=oi+ri}oe[G][ge].en.assign(le.en[ge]),oe[G][ge].thm.assign(le.thm[ge]),Ge>2&&(P[G][ge].en.assign(le.en[ge+2]),P[G][ge].thm.assign(le.thm[ge+2]))}for(ge=0;ge<Ge;ge++){var yi,_i,Bt=Tt(12),Ai=[0,0,0,0],hn=Tt(12),bs=1,Uo,zo=Tt(me.CBANDS),Yo=Tt(me.CBANDS),mt=[0,0,0,0],Go=Tt(me.HBLKSIZE),xo=vi([3,me.HBLKSIZE_s]);for(Ie(le.npart_s<=me.CBANDS),Ie(le.npart_l<=me.CBANDS),pe=0;pe<3;pe++)Bt[pe]=le.nsPsy.last_en_subshort[ge][pe+6],Ie(le.nsPsy.last_en_subshort[ge][pe+4]>0),hn[pe]=Bt[pe]/le.nsPsy.last_en_subshort[ge][pe+4],Ai[0]+=Bt[pe];if(ge==2)for(pe=0;pe<576;pe++){var gs,ys;gs=xe[0][pe],ys=xe[1][pe],xe[0][pe]=gs+ys,xe[1][pe]=gs-ys}{var Wo=xe[ge&1],Mn=0;for(pe=0;pe<9;pe++){for(var Kl=Mn+64,kt=1;Mn<Kl;Mn++)kt<Math.abs(Wo[Mn])&&(kt=Math.abs(Wo[Mn]));le.nsPsy.last_en_subshort[ge][pe]=Bt[pe+3]=kt,Ai[1+pe/3]+=kt,kt>Bt[pe+3-2]?(Ie(Bt[pe+3-2]>0),kt=kt/Bt[pe+3-2]):Bt[pe+3-2]>kt*10?(Ie(kt>0),kt=Bt[pe+3-2]/(kt*10)):kt=0,hn[pe+3]=kt}}if(A.analysis){var _s=hn[0];for(pe=1;pe<12;pe++)_s<hn[pe]&&(_s=hn[pe]);le.pinfo.ers[G][ge]=le.pinfo.ers_save[ge],le.pinfo.ers_save[ge]=_s}for(Uo=ge==3?le.nsPsy.attackthre_s:le.nsPsy.attackthre,pe=0;pe<12;pe++)mt[pe/3]==0&&hn[pe]>Uo&&(mt[pe/3]=pe%3+1);for(pe=1;pe<4;pe++){var Es;Ai[pe-1]>Ai[pe]?(Ie(Ai[pe]>0),Es=Ai[pe-1]/Ai[pe]):(Ie(Ai[pe-1]>0),Es=Ai[pe]/Ai[pe-1]),Es<1.7&&(mt[pe]=0,pe==1&&(mt[0]=0))}for(mt[0]!=0&&le.nsPsy.lastAttacks[ge]!=0&&(mt[0]=0),(le.nsPsy.lastAttacks[ge]==3||mt[0]+mt[1]+mt[2]+mt[3]!=0)&&(bs=0,mt[1]!=0&&mt[0]!=0&&(mt[1]=0),mt[2]!=0&&mt[1]!=0&&(mt[2]=0),mt[3]!=0&&mt[2]!=0&&(mt[3]=0)),ge<2?Re[ge]=bs:bs==0&&(Re[0]=Re[1]=0),se[ge]=le.tot_ener[ge],_i=Ee,yi=he,C(A,Go,xo,yi,ge&1,_i,ge&1,G,ge,M,V),U(le,Go,He,zo,Yo),de(le,zo,Yo,si),Xe=0;Xe<3;Xe++){var Cs,Vt;for(c(A,xo,be,Ve,ge,Xe),D(le,be,Ve,ge,Xe),we=0;we<me.SBMAX_s;we++){if(Vt=le.thm[ge].s[we][Xe],Vt*=b,mt[Xe]>=2||mt[Xe+1]==1){var In=Xe!=0?Xe-1:2,kt=u(le.thm[ge].s[we][In],Vt,p*ht);Vt=Math.min(Vt,kt)}if(mt[Xe]==1){var In=Xe!=0?Xe-1:2,kt=u(le.thm[ge].s[we][In],Vt,B*ht);Vt=Math.min(Vt,kt)}else if(Xe!=0&&mt[Xe-1]==3||Xe==0&&le.nsPsy.lastAttacks[ge]==3){var In=Xe!=2?Xe+1:0,kt=u(le.thm[ge].s[we][In],Vt,B*ht);Vt=Math.min(Vt,kt)}Cs=Bt[Xe*3+3]+Bt[Xe*3+4]+Bt[Xe*3+5],Bt[Xe*3+5]*6<Cs&&(Vt*=.5,Bt[Xe*3+4]*6<Cs&&(Vt*=.5)),le.thm[ge].s[we][Xe]=Vt}}for(le.nsPsy.lastAttacks[ge]=mt[2],dt=0,$e=0;$e<le.npart_l;$e++){for(var en=le.s3ind[$e][0],Ts=He[en]*z[si[en]],tn=le.s3_ll[dt++]*Ts;++en<=le.s3ind[$e][1];)Ts=He[en]*z[si[en]],tn=m(tn,le.s3_ll[dt++]*Ts,en,en-$e,le,0);tn*=.158489319246111,le.blocktype_old[ge&1]==me.SHORT_TYPE?Ve[$e]=tn:Ve[$e]=u(Math.min(tn,Math.min(a*le.nb_1[ge][$e],s*le.nb_2[ge][$e])),tn,ht),le.nb_2[ge][$e]=le.nb_1[ge][$e],le.nb_1[ge][$e]=tn}for(;$e<=me.CBANDS;++$e)He[$e]=0,Ve[$e]=0;L(le,He,Ve,ge)}if((A.mode==e.STEREO||A.mode==e.JOINT_STEREO)&&A.interChRatio>0&&W(A,A.interChRatio),A.mode==e.JOINT_STEREO){var ws;X(le),ws=A.msfix,Math.abs(ws)>0&&Y(le,ws,A.ATHlower*le.ATH.adjust)}for(h(A,Re,ce,ue),ge=0;ge<Ge;ge++){var Rn,Bn=0,ea,ta;ge>1?(Rn=re,Bn=-2,ea=me.NORM_TYPE,(ce[0]==me.SHORT_TYPE||ce[1]==me.SHORT_TYPE)&&(ea=me.SHORT_TYPE),ta=P[G][ge-2]):(Rn=ie,Bn=0,ea=ce[ge],ta=oe[G][ge]),ea==me.SHORT_TYPE?Rn[Bn+ge]=j(ta,le.masking_lower):Rn[Bn+ge]=J(ta,le.masking_lower),A.analysis&&(le.pinfo.pe[G][ge]=Rn[Bn+ge])}return 0};function _e(A,M,V,G,oe,P,ie,re){var se=A.internal_flags;if(G<2)t.fft_long(se,ie[re],G,M,V);else if(G==2)for(var ce=me.BLKSIZE-1;ce>=0;--ce){var le=ie[re+0][ce],he=ie[re+1][ce];ie[re+0][ce]=(le+he)*Ht.SQRT2*.5,ie[re+1][ce]=(le-he)*Ht.SQRT2*.5}P[0]=ie[re+0][0],P[0]*=P[0];for(var ce=me.BLKSIZE/2-1;ce>=0;--ce){var Ee=ie[re+0][me.BLKSIZE/2-ce],He=ie[re+0][me.BLKSIZE/2+ce];P[me.BLKSIZE/2-ce]=(Ee*Ee+He*He)*.5}{for(var be=0,ce=11;ce<me.HBLKSIZE;ce++)be+=P[ce];se.tot_ener[G]=be}if(A.analysis){for(var ce=0;ce<me.HBLKSIZE;ce++)se.pinfo.energy[oe][G][ce]=se.pinfo.energy_save[G][ce],se.pinfo.energy_save[G][ce]=P[ce];se.pinfo.pe[oe][G]=se.pe[G]}}function Le(A,M,V,G,oe,P,ie,re){var se=A.internal_flags;if(oe==0&&G<2&&t.fft_short(se,ie[re],G,M,V),G==2)for(var ce=me.BLKSIZE_s-1;ce>=0;--ce){var le=ie[re+0][oe][ce],he=ie[re+1][oe][ce];ie[re+0][oe][ce]=(le+he)*Ht.SQRT2*.5,ie[re+1][oe][ce]=(le-he)*Ht.SQRT2*.5}P[oe][0]=ie[re+0][oe][0],P[oe][0]*=P[oe][0];for(var ce=me.BLKSIZE_s/2-1;ce>=0;--ce){var Ee=ie[re+0][oe][me.BLKSIZE_s/2-ce],He=ie[re+0][oe][me.BLKSIZE_s/2+ce];P[oe][me.BLKSIZE_s/2-ce]=(Ee*Ee+He*He)*.5}}function Se(A,M,V,G){var oe=A.internal_flags;A.athaa_loudapprox==2&&V<2&&(oe.loudness_sq[M][V]=oe.loudness_sq_save[V],oe.loudness_sq_save[V]=_(G,oe))}var Ce=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Pe(A,M,V,G,oe,P,ie,re,se,ce){for(var le=vi([2,576]),he=A.internal_flags,Ee=he.channels_out,He=A.mode==e.JOINT_STEREO?4:Ee,be=0;be<Ee;be++){firbuf=M[be];var Ve=V+576-350-H+192;Ie(Ce.length==(H-1)/2);for(var ue=0;ue<576;ue++){var Re,Ge;Re=firbuf[Ve+ue+10],Ge=0;for(var ge=0;ge<(H-1)/2-1;ge+=2)Re+=Ce[ge]*(firbuf[Ve+ue+ge]+firbuf[Ve+ue+H-ge]),Ge+=Ce[ge+1]*(firbuf[Ve+ue+ge+1]+firbuf[Ve+ue+H-ge-1]);le[be][ue]=Re+Ge}oe[G][be].en.assign(he.en[be]),oe[G][be].thm.assign(he.thm[be]),He>2&&(P[G][be].en.assign(he.en[be+2]),P[G][be].thm.assign(he.thm[be+2]))}for(var be=0;be<He;be++){var $e=Tt(12),pe=Tt(12),qe=[0,0,0,0],dt=le[be&1],we=0,Xe=be==3?he.nsPsy.attackthre_s:he.nsPsy.attackthre,xe=1;if(be==2)for(var ue=0,ge=576;ge>0;++ue,--ge){var ht=le[0][ue],si=le[1][ue];le[0][ue]=ht+si,le[1][ue]=ht-si}for(var ue=0;ue<3;ue++)pe[ue]=he.nsPsy.last_en_subshort[be][ue+6],Ie(he.nsPsy.last_en_subshort[be][ue+4]>0),$e[ue]=pe[ue]/he.nsPsy.last_en_subshort[be][ue+4],qe[0]+=pe[ue];for(var ue=0;ue<9;ue++){for(var _t=we+64,ut=1;we<_t;we++)ut<Math.abs(dt[we])&&(ut=Math.abs(dt[we]));he.nsPsy.last_en_subshort[be][ue]=pe[ue+3]=ut,qe[1+ue/3]+=ut,ut>pe[ue+3-2]?(Ie(pe[ue+3-2]>0),ut=ut/pe[ue+3-2]):pe[ue+3-2]>ut*10?(Ie(ut>0),ut=pe[ue+3-2]/(ut*10)):ut=0,$e[ue+3]=ut}for(var ue=0;ue<3;++ue){var Ft=pe[ue*3+3]+pe[ue*3+4]+pe[ue*3+5],oi=1;pe[ue*3+5]*6<Ft&&(oi*=.5,pe[ue*3+4]*6<Ft&&(oi*=.5)),re[be][ue]=oi}if(A.analysis){for(var ri=$e[0],ue=1;ue<12;ue++)ri<$e[ue]&&(ri=$e[ue]);he.pinfo.ers[G][be]=he.pinfo.ers_save[be],he.pinfo.ers_save[be]=ri}for(var ue=0;ue<12;ue++)se[be][ue/3]==0&&$e[ue]>Xe&&(se[be][ue/3]=ue%3+1);for(var ue=1;ue<4;ue++){var yi=qe[ue-1],_i=qe[ue],Bt=Math.max(yi,_i);Bt<4e4&&yi<1.7*_i&&_i<1.7*yi&&(ue==1&&se[be][0]<=se[be][ue]&&(se[be][0]=0),se[be][ue]=0)}se[be][0]<=he.nsPsy.lastAttacks[be]&&(se[be][0]=0),(he.nsPsy.lastAttacks[be]==3||se[be][0]+se[be][1]+se[be][2]+se[be][3]!=0)&&(xe=0,se[be][1]!=0&&se[be][0]!=0&&(se[be][1]=0),se[be][2]!=0&&se[be][1]!=0&&(se[be][2]=0),se[be][3]!=0&&se[be][2]!=0&&(se[be][3]=0)),be<2?ce[be]=xe:xe==0&&(ce[0]=ce[1]=0),ie[be]=he.tot_ener[be]}}function et(A,M,V){if(V==0)for(var G=0;G<A.npart_s;G++)A.nb_s2[M][G]=A.nb_s1[M][G],A.nb_s1[M][G]=0}function Ot(A,M){for(var V=0;V<A.npart_l;V++)A.nb_2[M][V]=A.nb_1[M][V],A.nb_1[M][V]=0}function v(A,M,V,G){var oe=z.length-1,P=0,ie=V[P]+V[P+1];if(Ie(ie>=0),ie>0){var re=M[P];re<M[P+1]&&(re=M[P+1]),Ie(A.numlines_s[P]+A.numlines_s[P+1]-1>0),ie=20*(re*2-ie)/(ie*(A.numlines_s[P]+A.numlines_s[P+1]-1));var se=0|ie;se>oe&&(se=oe),G[P]=se}else G[P]=0;for(P=1;P<A.npart_s-1;P++)if(ie=V[P-1]+V[P]+V[P+1],Ie(P+1<A.npart_s),Ie(ie>=0),ie>0){var re=M[P-1];re<M[P]&&(re=M[P]),re<M[P+1]&&(re=M[P+1]),Ie(A.numlines_s[P-1]+A.numlines_s[P]+A.numlines_s[P+1]-1>0),ie=20*(re*3-ie)/(ie*(A.numlines_s[P-1]+A.numlines_s[P]+A.numlines_s[P+1]-1));var se=0|ie;se>oe&&(se=oe),G[P]=se}else G[P]=0;if(Ie(P>0),Ie(P==A.npart_s-1),ie=V[P-1]+V[P],Ie(ie>=0),ie>0){var re=M[P-1];re<M[P]&&(re=M[P]),Ie(A.numlines_s[P-1]+A.numlines_s[P]-1>0),ie=20*(re*2-ie)/(ie*(A.numlines_s[P-1]+A.numlines_s[P]-1));var se=0|ie;se>oe&&(se=oe),G[P]=se}else G[P]=0;Ie(P==A.npart_s-1)}function S(A,M,V,G,oe,P){var ie=A.internal_flags,re=new float[me.CBANDS],se=Tt(me.CBANDS),ce,le,he,Ee=new int[me.CBANDS];for(he=le=0;he<ie.npart_s;++he){var He=0,be=0,Ve=ie.numlines_s[he];for(ce=0;ce<Ve;++ce,++le){var ue=M[P][le];He+=ue,be<ue&&(be=ue)}V[he]=He,Ie(He>=0),re[he]=be,Ie(Ve>0),se[he]=He/Ve,Ie(se[he]>=0)}for(Ie(he==ie.npart_s),Ie(le==129);he<me.CBANDS;++he)re[he]=0,se[he]=0;for(v(ie,re,se,Ee),le=he=0;he<ie.npart_s;he++){var Re=ie.s3ind_s[he][0],Ge=ie.s3ind_s[he][1],ge,$e,pe,qe,dt;for(ge=Ee[Re],$e=1,qe=ie.s3_ss[le]*V[Re]*z[Ee[Re]],++le,++Re;Re<=Ge;)ge+=Ee[Re],$e+=1,pe=ie.s3_ss[le]*V[Re]*z[Ee[Re]],qe=K(qe,pe,Re-he),++le,++Re;ge=(1+2*ge)/(2*$e),dt=z[ge]*.5,qe*=dt,G[he]=qe,ie.nb_s2[oe][he]=ie.nb_s1[oe][he],ie.nb_s1[oe][he]=qe,pe=re[he],pe*=ie.minval_s[he],pe*=dt,G[he]>pe&&(G[he]=pe),ie.masking_lower>1&&(G[he]*=ie.masking_lower),G[he]>V[he]&&(G[he]=V[he]),ie.masking_lower<1&&(G[he]*=ie.masking_lower),Ie(G[he]>=0)}for(;he<me.CBANDS;++he)V[he]=0,G[he]=0}function Me(A,M,V,G,oe){var P=Tt(me.CBANDS),ie=Tt(me.CBANDS),re=an(me.CBANDS+2),se;U(A,M,V,P,ie),de(A,P,ie,re);var ce=0;for(se=0;se<A.npart_l;se++){var le,he,Ee,He,be=A.s3ind[se][0],Ve=A.s3ind[se][1],ue=0,Re=0;for(ue=re[be],Re+=1,he=A.s3_ll[ce]*V[be]*z[re[be]],++ce,++be;be<=Ve;)ue+=re[be],Re+=1,le=A.s3_ll[ce]*V[be]*z[re[be]],He=K(he,le,be-se),he=He,++ce,++be;if(ue=(1+2*ue)/(2*Re),Ee=z[ue]*.5,he*=Ee,A.blocktype_old[oe&1]==me.SHORT_TYPE){var Ge=a*A.nb_1[oe][se];Ge>0?G[se]=Math.min(he,Ge):G[se]=Math.min(he,V[se]*B)}else{var ge=s*A.nb_2[oe][se],$e=a*A.nb_1[oe][se],Ge;ge<=0&&(ge=he),$e<=0&&($e=he),A.blocktype_old[oe&1]==me.NORM_TYPE?Ge=Math.min($e,ge):Ge=$e,G[se]=Math.min(he,Ge)}A.nb_2[oe][se]=A.nb_1[oe][se],A.nb_1[oe][se]=he,le=P[se],le*=A.minval_l[se],le*=Ee,G[se]>le&&(G[se]=le),A.masking_lower>1&&(G[se]*=A.masking_lower),G[se]>V[se]&&(G[se]=V[se]),A.masking_lower<1&&(G[se]*=A.masking_lower),Ie(G[se]>=0)}for(;se<me.CBANDS;++se)V[se]=0,G[se]=0}function Be(A,M){var V=A.internal_flags;A.short_blocks==pn.short_block_coupled&&!(M[0]!=0&&M[1]!=0)&&(M[0]=M[1]=0);for(var G=0;G<V.channels_out;G++)A.short_blocks==pn.short_block_dispensed&&(M[G]=1),A.short_blocks==pn.short_block_forced&&(M[G]=0)}function je(A,M,V){for(var G=A.internal_flags,oe=0;oe<G.channels_out;oe++){var P=me.NORM_TYPE;M[oe]!=0?(Ie(G.blocktype_old[oe]!=me.START_TYPE),G.blocktype_old[oe]==me.SHORT_TYPE&&(P=me.STOP_TYPE)):(P=me.SHORT_TYPE,G.blocktype_old[oe]==me.NORM_TYPE&&(G.blocktype_old[oe]=me.START_TYPE),G.blocktype_old[oe]==me.STOP_TYPE&&(G.blocktype_old[oe]=me.SHORT_TYPE)),V[oe]=G.blocktype_old[oe],G.blocktype_old[oe]=P}}function Ke(A,M,V,G,oe,P,ie){for(var re=P*2,se=P>0?Math.pow(10,oe):1,ce,le,he=0;he<ie;++he){var Ee=A[2][he],He=A[3][he],be=M[0][he],Ve=M[1][he],ue=M[2][he],Re=M[3][he];if(be<=1.58*Ve&&Ve<=1.58*be){var Ge=V[he]*He,ge=V[he]*Ee;le=Math.max(ue,Math.min(Re,Ge)),ce=Math.max(Re,Math.min(ue,ge))}else le=ue,ce=Re;if(P>0){var $e,pe,qe=G[he]*se;if($e=Math.min(Math.max(be,qe),Math.max(Ve,qe)),ue=Math.max(le,qe),Re=Math.max(ce,qe),pe=ue+Re,pe>0&&$e*re<pe){var dt=$e*re/pe;ue*=dt,Re*=dt,Ie(pe>0)}le=Math.min(ue,le),ce=Math.min(Re,ce)}le>Ee&&(le=Ee),ce>He&&(ce=He),M[2][he]=le,M[3][he]=ce}}this.L3psycho_anal_vbr=function(A,M,V,G,oe,P,ie,re,se,ce){var le=A.internal_flags,he,Ee,He=Tt(me.HBLKSIZE),be=vi([3,me.HBLKSIZE_s]),Ve=vi([2,me.BLKSIZE]),ue=vi([2,3,me.BLKSIZE_s]),Re=vi([4,me.CBANDS]),Ge=vi([4,me.CBANDS]),ge=vi([4,3]),$e=.6,pe=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],qe=an(2),dt=A.mode==e.JOINT_STEREO?4:le.channels_out;Pe(A,M,V,G,oe,P,se,ge,pe,qe),Be(A,qe);{for(var we=0;we<dt;we++){var Xe=we&1;he=Ve,_e(A,M,V,we,G,He,he,Xe),Se(A,G,we,He),qe[Xe]!=0?Me(le,He,Re[we],Ge[we],we):Ot(le,we)}qe[0]+qe[1]==2&&A.mode==e.JOINT_STEREO&&Ke(Re,Ge,le.mld_cb_l,le.ATH.cb_l,A.ATHlower*le.ATH.adjust,A.msfix,le.npart_l);for(var we=0;we<dt;we++){var Xe=we&1;qe[Xe]!=0&&L(le,Re[we],Ge[we],we)}}{for(var xe=0;xe<3;xe++){for(var we=0;we<dt;++we){var Xe=we&1;qe[Xe]!=0?et(le,we,xe):(Ee=ue,Le(A,M,V,we,xe,be,Ee,Xe),S(A,be,Re[we],Ge[we],we,xe))}qe[0]+qe[1]==0&&A.mode==e.JOINT_STEREO&&Ke(Re,Ge,le.mld_cb_s,le.ATH.cb_s,A.ATHlower*le.ATH.adjust,A.msfix,le.npart_s);for(var we=0;we<dt;++we){var Xe=we&1;qe[Xe]==0&&D(le,Re[we],Ge[we],we,xe)}}for(var we=0;we<dt;we++){var Xe=we&1;if(qe[Xe]==0)for(var ht=0;ht<me.SBMAX_s;ht++){for(var si=Tt(3),xe=0;xe<3;xe++){var _t=le.thm[we].s[ht][xe];if(_t*=b,pe[we][xe]>=2||pe[we][xe+1]==1){var ut=xe!=0?xe-1:2,Ft=u(le.thm[we].s[ht][ut],_t,p*$e);_t=Math.min(_t,Ft)}else if(pe[we][xe]==1){var ut=xe!=0?xe-1:2,Ft=u(le.thm[we].s[ht][ut],_t,B*$e);_t=Math.min(_t,Ft)}else if(xe!=0&&pe[we][xe-1]==3||xe==0&&le.nsPsy.lastAttacks[we]==3){var ut=xe!=2?xe+1:0,Ft=u(le.thm[we].s[ht][ut],_t,B*$e);_t=Math.min(_t,Ft)}_t*=ge[we][xe],si[xe]=_t}for(var xe=0;xe<3;xe++)le.thm[we].s[ht][xe]=si[xe]}}}for(var we=0;we<dt;we++)le.nsPsy.lastAttacks[we]=pe[we][2];je(A,qe,ce);for(var we=0;we<dt;we++){var oi,ri,yi,_i;we>1?(oi=re,ri=-2,yi=me.NORM_TYPE,(ce[0]==me.SHORT_TYPE||ce[1]==me.SHORT_TYPE)&&(yi=me.SHORT_TYPE),_i=P[G][we-2]):(oi=ie,ri=0,yi=ce[we],_i=oe[G][we]),yi==me.SHORT_TYPE?oi[ri+we]=j(_i,le.masking_lower):oi[ri+we]=J(_i,le.masking_lower),A.analysis&&(le.pinfo.pe[G][we]=oi[ri+we])}return 0};function Oe(A,M){var V=A,G;return V>=0?G=-V*27:G=V*M,G<=-72?0:Math.exp(G*n)}function De(A){var M=0,V=0;{var G=0,oe,P;for(G=0;Oe(G,A)>1e-20;G-=1);for(oe=G,P=0;Math.abs(P-oe)>1e-12;)G=(P+oe)/2,Oe(G,A)>0?P=G:oe=G;M=oe}{var G=0,oe,P;for(G=0;Oe(G,A)>1e-20;G+=1);for(oe=0,P=G;Math.abs(P-oe)>1e-12;)G=(P+oe)/2,Oe(G,A)>0?oe=G:P=G;V=P}{var ie=0,re=1e3,se;for(se=0;se<=re;++se){var G=M+se*(V-M)/re,ce=Oe(G,A);ie+=ce}{var le=(re+1)/(ie*(V-M));return le}}}function Ye(A){var M,V,G,oe;return M=A,M>=0?M*=3:M*=1.5,M>=.5&&M<=2.5?(oe=M-.5,V=8*(oe*oe-2*oe)):V=0,M+=.474,G=15.811389+7.5*M-17.5*Math.sqrt(1+M*M),G<=-60?0:(M=Math.exp((V+G)*n),M/=.6609193,M)}function Fe(A){return A<0&&(A=0),A=A*.001,13*Math.atan(.76*A)+3.5*Math.atan(A*A/(7.5*7.5))}function Te(A,M,V,G,oe,P,ie,re,se,ce,le,he){var Ee=Tt(me.CBANDS+1),He=re/(he>15?2*576:2*192),be=an(me.HBLKSIZE),Ve;re/=se;var ue=0,Re=0;for(Ve=0;Ve<me.CBANDS;Ve++){var Ge,ge;for(Ge=Fe(re*ue),Ee[Ve]=re*ue,ge=ue;Fe(re*ge)-Ge<f&&ge<=se/2;ge++);for(A[Ve]=ge-ue,Re=Ve+1;ue<ge;)Ie(ue<me.HBLKSIZE),be[ue++]=Ve;if(ue>se/2){ue=se/2,++Ve;break}}Ie(Ve<me.CBANDS),Ee[Ve]=re*ue;for(var $e=0;$e<he;$e++){var pe,qe,dt,we,Xe;dt=ce[$e],we=ce[$e+1],pe=0|Math.floor(.5+le*(dt-.5)),pe<0&&(pe=0),qe=0|Math.floor(.5+le*(we-.5)),qe>se/2&&(qe=se/2),V[$e]=(be[pe]+be[qe])/2,M[$e]=be[qe];var xe=He*we;ie[$e]=(xe-Ee[M[$e]])/(Ee[M[$e]+1]-Ee[M[$e]]),ie[$e]<0?ie[$e]=0:ie[$e]>1&&(ie[$e]=1),Xe=Fe(re*ce[$e]*le),Xe=Math.min(Xe,15.5)/15.5,P[$e]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Xe))-2.5)}ue=0;for(var ht=0;ht<Re;ht++){var si=A[ht],Ge,_t;Ge=Fe(re*ue),_t=Fe(re*(ue+si-1)),G[ht]=.5*(Ge+_t),Ge=Fe(re*(ue-.5)),_t=Fe(re*(ue+si-.5)),oe[ht]=_t-Ge,ue+=si}return Re}function st(A,M,V,G,oe,P){var ie=vi([me.CBANDS,me.CBANDS]),re,se=0;if(P)for(var ce=0;ce<M;ce++)for(re=0;re<M;re++){var le=Ye(V[ce]-V[re])*G[re];ie[ce][re]=le*oe[ce]}else for(re=0;re<M;re++)for(var he=15+Math.min(21/V[re],12),Ee=De(he),ce=0;ce<M;ce++){var le=Ee*Oe(V[ce]-V[re],he)*G[re];ie[ce][re]=le*oe[ce]}for(var ce=0;ce<M;ce++){for(re=0;re<M&&!(ie[ce][re]>0);re++);for(A[ce][0]=re,re=M-1;re>0&&!(ie[ce][re]>0);re--);A[ce][1]=re,se+=A[ce][1]-A[ce][0]+1}for(var He=Tt(se),be=0,ce=0;ce<M;ce++)for(re=A[ce][0];re<=A[ce][1];re++)He[be++]=ie[ce][re];return He}function St(A){var M=Fe(A);return M=Math.min(M,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*M))-2.5)}this.psymodel_init=function(A){var M=A.internal_flags,V,G=!0,oe=13,P=24,ie=0,re=0,se=-8.25,ce=-4.5,le=Tt(me.CBANDS),he=Tt(me.CBANDS),Ee=Tt(me.CBANDS),He=A.out_samplerate;switch(A.experimentalZ){default:case 0:G=!0;break;case 1:G=!(A.VBR==vn.vbr_mtrh||A.VBR==vn.vbr_mt);break;case 2:G=!1;break;case 3:oe=8,ie=-1.75,re=-.0125,se=-8.25,ce=-2.25;break}for(M.ms_ener_ratio_old=.25,M.blocktype_old[0]=M.blocktype_old[1]=me.NORM_TYPE,V=0;V<4;++V){for(var ue=0;ue<me.CBANDS;++ue)M.nb_1[V][ue]=1e20,M.nb_2[V][ue]=1e20,M.nb_s1[V][ue]=M.nb_s2[V][ue]=1;for(var be=0;be<me.SBMAX_l;be++)M.en[V].l[be]=1e20,M.thm[V].l[be]=1e20;for(var ue=0;ue<3;++ue){for(var be=0;be<me.SBMAX_s;be++)M.en[V].s[be][ue]=1e20,M.thm[V].s[be][ue]=1e20;M.nsPsy.lastAttacks[V]=0}for(var ue=0;ue<9;ue++)M.nsPsy.last_en_subshort[V][ue]=10}for(M.loudness_sq_save[0]=M.loudness_sq_save[1]=0,M.npart_l=Te(M.numlines_l,M.bo_l,M.bm_l,le,he,M.mld_l,M.PSY.bo_l_weight,He,me.BLKSIZE,M.scalefac_band.l,me.BLKSIZE/(2*576),me.SBMAX_l),Ie(M.npart_l<me.CBANDS),V=0;V<M.npart_l;V++){var Ve=ie;le[V]>=oe&&(Ve=re*(le[V]-oe)/(P-oe)+ie*(P-le[V])/(P-oe)),Ee[V]=Math.pow(10,Ve/10),M.numlines_l[V]>0?M.rnumlines_l[V]=1/M.numlines_l[V]:M.rnumlines_l[V]=0}M.s3_ll=st(M.s3ind,M.npart_l,le,he,Ee,G);var ue=0;for(V=0;V<M.npart_l;V++){var Re;Re=gr.MAX_VALUE;for(var Ge=0;Ge<M.numlines_l[V];Ge++,ue++){var ge=He*ue/(1e3*me.BLKSIZE),$e;$e=this.ATHformula(ge*1e3,A)-20,$e=Math.pow(10,.1*$e),$e*=M.numlines_l[V],Re>$e&&(Re=$e)}M.ATH.cb_l[V]=Re,Re=-20+le[V]*20/10,Re>6&&(Re=100),Re<-15&&(Re=-15),Re-=8,M.minval_l[V]=Math.pow(10,Re/10)*M.numlines_l[V]}for(M.npart_s=Te(M.numlines_s,M.bo_s,M.bm_s,le,he,M.mld_s,M.PSY.bo_s_weight,He,me.BLKSIZE_s,M.scalefac_band.s,me.BLKSIZE_s/(2*192),me.SBMAX_s),Ie(M.npart_s<me.CBANDS),ue=0,V=0;V<M.npart_s;V++){var Re,Ve=se;le[V]>=oe&&(Ve=ce*(le[V]-oe)/(P-oe)+se*(P-le[V])/(P-oe)),Ee[V]=Math.pow(10,Ve/10),Re=gr.MAX_VALUE;for(var Ge=0;Ge<M.numlines_s[V];Ge++,ue++){var ge=He*ue/(1e3*me.BLKSIZE_s),$e;$e=this.ATHformula(ge*1e3,A)-20,$e=Math.pow(10,.1*$e),$e*=M.numlines_s[V],Re>$e&&(Re=$e)}M.ATH.cb_s[V]=Re,Re=-7+le[V]*7/12,le[V]>12&&(Re*=1+Math.log(1+Re)*3.1),le[V]<12&&(Re*=1+Math.log(1-Re)*2.3),Re<-15&&(Re=-15),Re-=8,M.minval_s[V]=Math.pow(10,Re/10)*M.numlines_s[V]}M.s3_ss=st(M.s3ind_s,M.npart_s,le,he,Ee,G),q(),t.init_fft(M),M.decay=Math.exp(-1*i/(F*He/192));{var pe;pe=te,A.exp_nspsytune&2&&(pe=1),Math.abs(A.msfix)>0&&(pe=A.msfix),A.msfix=pe;for(var qe=0;qe<M.npart_l;qe++)M.s3ind[qe][1]>M.npart_l-1&&(M.s3ind[qe][1]=M.npart_l-1)}var dt=576*M.mode_gr/He;if(M.ATH.decay=Math.pow(10,-12/10*dt),M.ATH.adjust=.01,M.ATH.adjustLimit=1,Ie(M.bo_l[me.SBMAX_l-1]<=M.npart_l),Ie(M.bo_s[me.SBMAX_s-1]<=M.npart_s),A.ATHtype!=-1){var ge,we=A.out_samplerate/me.BLKSIZE,Xe=0;for(ge=0,V=0;V<me.BLKSIZE/2;++V)ge+=we,M.ATH.eql_w[V]=1/Math.pow(10,this.ATHformula(ge,A)/10),Xe+=M.ATH.eql_w[V];for(Xe=1/Xe,V=me.BLKSIZE/2;--V>=0;)M.ATH.eql_w[V]*=Xe}{for(var qe=ue=0;qe<M.npart_s;++qe)for(V=0;V<M.numlines_s[qe];++V)++ue;Ie(ue==129);for(var qe=ue=0;qe<M.npart_l;++qe)for(V=0;V<M.numlines_l[qe];++V)++ue;Ie(ue==513)}for(ue=0,V=0;V<M.npart_l;V++){var ge=He*(ue+M.numlines_l[V]/2)/(1*me.BLKSIZE);M.mld_cb_l[V]=St(ge),ue+=M.numlines_l[V]}for(;V<me.CBANDS;++V)M.mld_cb_l[V]=1;for(ue=0,V=0;V<M.npart_s;V++){var ge=He*(ue+M.numlines_s[V]/2)/(1*me.BLKSIZE_s);M.mld_cb_s[V]=St(ge),ue+=M.numlines_s[V]}for(;V<me.CBANDS;++V)M.mld_cb_s[V]=1;return 0};function tt(A,M){A<-.3&&(A=3410),A/=1e3,A=Math.max(.1,A);var V=3.64*Math.pow(A,-.8)-6.8*Math.exp(-.6*Math.pow(A-3.4,2))+6*Math.exp(-.15*Math.pow(A-8.7,2))+(.6+.04*M)*.001*Math.pow(A,4);return V}this.ATHformula=function(A,M){var V;switch(M.ATHtype){case 0:V=tt(A,9);break;case 1:V=tt(A,-1);break;case 2:V=tt(A,0);break;case 3:V=tt(A,1)+6;break;case 4:V=tt(A,M.ATHcurve);break;default:V=tt(A,0);break}return V}}var kd=Sd,Ad=Qn;function Md(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ad.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Id=Md,Rd=Lt(),Tl={};Tl.SFBMAX=Rd.SBMAX_s*3;var hs=Tl,zt=pt;zt.System;zt.VbrMode;zt.Float;zt.ShortBlock;zt.Util;zt.Arrays;zt.new_array_n;zt.new_byte;zt.new_double;var Bd=zt.new_float;zt.new_float_n;var sn=zt.new_int;zt.new_int_n;zt.assert;var js=hs;function $d(){this.xr=Bd(576),this.l3_enc=sn(576),this.scalefac=sn(js.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=sn(3),this.subblock_gain=sn(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=sn(js.SFBMAX),this.window=sn(js.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=sn(4),this.max_nonzero_coeff=0;var e=this;function t(a){return new Int32Array(a)}function i(a){return new Float32Array(a)}this.assign=function(a){e.xr=i(a.xr),e.l3_enc=t(a.l3_enc),e.scalefac=t(a.scalefac),e.xrpow_max=a.xrpow_max,e.part2_3_length=a.part2_3_length,e.big_values=a.big_values,e.count1=a.count1,e.global_gain=a.global_gain,e.scalefac_compress=a.scalefac_compress,e.block_type=a.block_type,e.mixed_block_flag=a.mixed_block_flag,e.table_select=t(a.table_select),e.subblock_gain=t(a.subblock_gain),e.region0_count=a.region0_count,e.region1_count=a.region1_count,e.preflag=a.preflag,e.scalefac_scale=a.scalefac_scale,e.count1table_select=a.count1table_select,e.part2_length=a.part2_length,e.sfb_lmax=a.sfb_lmax,e.sfb_smin=a.sfb_smin,e.psy_lmax=a.psy_lmax,e.sfbmax=a.sfbmax,e.psymax=a.psymax,e.sfbdivide=a.sfbdivide,e.width=t(a.width),e.window=t(a.window),e.count1bits=a.count1bits,e.sfb_partition_table=a.sfb_partition_table.slice(0),e.slen=t(a.slen),e.max_nonzero_coeff=a.max_nonzero_coeff}}var Po=$d,Yt=pt;Yt.System;Yt.VbrMode;Yt.Float;Yt.ShortBlock;Yt.Util;Yt.Arrays;Yt.new_array_n;Yt.new_byte;Yt.new_double;Yt.new_float;Yt.new_float_n;var yr=Yt.new_int;Yt.new_int_n;Yt.assert;var Dd=Po;function Ld(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[yr(4),yr(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new Dd}var Od=Ld,Gt=pt,ua=Gt.System;Gt.VbrMode;Gt.Float;Gt.ShortBlock;Gt.Util;Gt.Arrays;Gt.new_array_n;Gt.new_byte;Gt.new_double;Gt.new_float;Gt.new_float_n;var fa=Gt.new_int;Gt.new_int_n;Gt.assert;var ca=Lt();function Nd(e,t,i,a){this.l=fa(1+ca.SBMAX_l),this.s=fa(1+ca.SBMAX_s),this.psfb21=fa(1+ca.PSFB21),this.psfb12=fa(1+ca.PSFB12);var s=this.l,d=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],ua.arraycopy(this.arrL,0,s,0,Math.min(this.arrL.length,this.l.length)),ua.arraycopy(this.arrS,0,d,0,Math.min(this.arrS.length,this.s.length)),ua.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),ua.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var wl=Nd,xt=pt;xt.System;xt.VbrMode;xt.Float;xt.ShortBlock;xt.Util;xt.Arrays;xt.new_array_n;xt.new_byte;xt.new_double;var Xs=xt.new_float,Pd=xt.new_float_n,Fd=xt.new_int;xt.new_int_n;xt.assert;var _r=Lt();function Vd(){this.last_en_subshort=Pd([4,9]),this.lastAttacks=Fd(4),this.pefirbuf=Xs(19),this.longfact=Xs(_r.SBMAX_l),this.shortfact=Xs(_r.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var Hd=Vd;function qd(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var Kd=qd,Wt=pt;Wt.System;Wt.VbrMode;Wt.Float;Wt.ShortBlock;Wt.Util;Wt.Arrays;Wt.new_array_n;var jd=Wt.new_byte,Xd=Wt.new_double,pi=Wt.new_float,on=Wt.new_float_n,Ti=Wt.new_int,ha=Wt.new_int_n;Wt.assert;var Ud=Od,zd=wl,Yd=Hd,Gd=Kd,Er=Cl(),gt=Lt(),xd=hs;Hi.MFSIZE=3*1152+gt.ENCDELAY-gt.MDCTDELAY;Hi.MAX_HEADER_BUF=256;Hi.MAX_BITS_PER_CHANNEL=4095;Hi.MAX_BITS_PER_GRANULE=7680;Hi.BPC=320;function Hi(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=on([2,Hi.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Ud,this.ms_ratio=pi(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Ti(2),this.CurrentStep=Ti(2),this.masking_lower=0,this.bv_scf=Ti(576),this.pseudohalf=Ti(xd.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Hi.BPC+1),this.itime=Xd(2),this.sideinfo_len=0,this.sb_sample=on([2,2,18,gt.SBLIMIT]),this.amp_filter=pi(32);function t(){this.write_timing=0,this.ptr=0,this.buf=jd(e)}this.header=new Array(Hi.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new zd,this.minval_l=pi(gt.CBANDS),this.minval_s=pi(gt.CBANDS),this.nb_1=on([4,gt.CBANDS]),this.nb_2=on([4,gt.CBANDS]),this.nb_s1=on([4,gt.CBANDS]),this.nb_s2=on([4,gt.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=pi(4),this.loudness_sq=on([2,2]),this.loudness_sq_save=pi(2),this.mld_l=pi(gt.SBMAX_l),this.mld_s=pi(gt.SBMAX_s),this.bm_l=Ti(gt.SBMAX_l),this.bo_l=Ti(gt.SBMAX_l),this.bm_s=Ti(gt.SBMAX_s),this.bo_s=Ti(gt.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=ha([gt.CBANDS,2]),this.s3ind_s=ha([gt.CBANDS,2]),this.numlines_s=Ti(gt.CBANDS),this.numlines_l=Ti(gt.CBANDS),this.rnumlines_l=pi(gt.CBANDS),this.mld_cb_l=pi(gt.CBANDS),this.mld_cb_s=pi(gt.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=pi(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Ti(2),this.nsPsy=new Yd,this.VBR_seek_table=new Gd,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=ha([16,4+1]),this.bitrate_blockType_Hist=ha([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var i=0;i<this.en.length;i++)this.en[i]=new Er;for(var i=0;i<this.thm.length;i++)this.thm[i]=new Er;for(var i=0;i<this.header.length;i++)this.header[i]=new t}var ms=Hi,Qt=pt;Qt.System;Qt.VbrMode;Qt.Float;Qt.ShortBlock;Qt.Util;Qt.Arrays;Qt.new_array_n;Qt.new_byte;Qt.new_double;var rn=Qt.new_float;Qt.new_float_n;Qt.new_int;Qt.new_int_n;Qt.assert;var ln=Lt();function Wd(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=rn(ln.SBMAX_l),this.s=rn(ln.SBMAX_s),this.psfb21=rn(ln.PSFB21),this.psfb12=rn(ln.PSFB12),this.cb_l=rn(ln.CBANDS),this.cb_s=rn(ln.CBANDS),this.eql_w=rn(ln.BLKSIZE/2)}var Qd=Wd,Zt=pt,qt=Zt.System;Zt.VbrMode;Zt.Float;Zt.ShortBlock;Zt.Util;var Cr=Zt.Arrays;Zt.new_array_n;Zt.new_byte;Zt.new_double;Zt.new_float;Zt.new_float_n;Zt.new_int;Zt.new_int_n;Zt.assert;ct.STEPS_per_dB=100;ct.MAX_dB=120;ct.GAIN_NOT_ENOUGH_SAMPLES=-24601;ct.GAIN_ANALYSIS_ERROR=0;ct.GAIN_ANALYSIS_OK=1;ct.INIT_GAIN_ANALYSIS_ERROR=0;ct.INIT_GAIN_ANALYSIS_OK=1;ct.YULE_ORDER=10;ct.MAX_ORDER=ct.YULE_ORDER;ct.MAX_SAMP_FREQ=48e3;ct.RMS_WINDOW_TIME_NUMERATOR=1;ct.RMS_WINDOW_TIME_DENOMINATOR=20;ct.MAX_SAMPLES_PER_WINDOW=ct.MAX_SAMP_FREQ*ct.RMS_WINDOW_TIME_NUMERATOR/ct.RMS_WINDOW_TIME_DENOMINATOR+1;function ct(){var e=64.82;ct.YULE_ORDER;var t=.95;ct.MAX_SAMP_FREQ;var i=ct.RMS_WINDOW_TIME_NUMERATOR,a=ct.RMS_WINDOW_TIME_DENOMINATOR;ct.MAX_SAMPLES_PER_WINDOW;var s=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],d=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function r(p,B,te,H,n,$){for(;n--!=0;)te[H]=1e-10+p[B+0]*$[0]-te[H-1]*$[1]+p[B-1]*$[2]-te[H-2]*$[3]+p[B-2]*$[4]-te[H-3]*$[5]+p[B-3]*$[6]-te[H-4]*$[7]+p[B-4]*$[8]-te[H-5]*$[9]+p[B-5]*$[10]-te[H-6]*$[11]+p[B-6]*$[12]-te[H-7]*$[13]+p[B-7]*$[14]-te[H-8]*$[15]+p[B-8]*$[16]-te[H-9]*$[17]+p[B-9]*$[18]-te[H-10]*$[19]+p[B-10]*$[20],++H,++B}function f(p,B,te,H,n,$){for(;n--!=0;)te[H]=p[B+0]*$[0]-te[H-1]*$[1]+p[B-1]*$[2]-te[H-2]*$[3]+p[B-2]*$[4],++H,++B}function E(p,B){for(var te=0;te<MAX_ORDER;te++)p.linprebuf[te]=p.lstepbuf[te]=p.loutbuf[te]=p.rinprebuf[te]=p.rstepbuf[te]=p.routbuf[te]=0;switch(0|B){case 48e3:p.reqindex=0;break;case 44100:p.reqindex=1;break;case 32e3:p.reqindex=2;break;case 24e3:p.reqindex=3;break;case 22050:p.reqindex=4;break;case 16e3:p.reqindex=5;break;case 12e3:p.reqindex=6;break;case 11025:p.reqindex=7;break;case 8e3:p.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return p.sampleWindow=0|(B*i+a-1)/a,p.lsum=0,p.rsum=0,p.totsamp=0,Cr.ill(p.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(p,B){return E(p,B)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(p.linpre=MAX_ORDER,p.rinpre=MAX_ORDER,p.lstep=MAX_ORDER,p.rstep=MAX_ORDER,p.lout=MAX_ORDER,p.rout=MAX_ORDER,Cr.fill(p.B,0),INIT_GAIN_ANALYSIS_OK)};function F(p){return p*p}this.AnalyzeSamples=function(p,B,te,H,n,$,_){var C,k,R,o,y,O,x;if($==0)return GAIN_ANALYSIS_OK;switch(x=0,y=$,_){case 1:H=B,n=te;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for($<MAX_ORDER?(qt.arraycopy(B,te,p.linprebuf,MAX_ORDER,$),qt.arraycopy(H,n,p.rinprebuf,MAX_ORDER,$)):(qt.arraycopy(B,te,p.linprebuf,MAX_ORDER,MAX_ORDER),qt.arraycopy(H,n,p.rinprebuf,MAX_ORDER,MAX_ORDER));y>0;){O=y>p.sampleWindow-p.totsamp?p.sampleWindow-p.totsamp:y,x<MAX_ORDER?(C=p.linpre+x,k=p.linprebuf,R=p.rinpre+x,o=p.rinprebuf,O>MAX_ORDER-x&&(O=MAX_ORDER-x)):(C=te+x,k=B,R=n+x,o=H),r(k,C,p.lstepbuf,p.lstep+p.totsamp,O,s[p.reqindex]),r(o,R,p.rstepbuf,p.rstep+p.totsamp,O,s[p.reqindex]),f(p.lstepbuf,p.lstep+p.totsamp,p.loutbuf,p.lout+p.totsamp,O,d[p.reqindex]),f(p.rstepbuf,p.rstep+p.totsamp,p.routbuf,p.rout+p.totsamp,O,d[p.reqindex]),C=p.lout+p.totsamp,k=p.loutbuf,R=p.rout+p.totsamp,o=p.routbuf;for(var z=O%8;z--!=0;)p.lsum+=F(k[C++]),p.rsum+=F(o[R++]);for(z=O/8;z--!=0;)p.lsum+=F(k[C+0])+F(k[C+1])+F(k[C+2])+F(k[C+3])+F(k[C+4])+F(k[C+5])+F(k[C+6])+F(k[C+7]),C+=8,p.rsum+=F(o[R+0])+F(o[R+1])+F(o[R+2])+F(o[R+3])+F(o[R+4])+F(o[R+5])+F(o[R+6])+F(o[R+7]),R+=8;if(y-=O,x+=O,p.totsamp+=O,p.totsamp==p.sampleWindow){var q=ct.STEPS_per_dB*10*Math.log10((p.lsum+p.rsum)/p.totsamp*.5+1e-37),ee=q<=0?0:0|q;ee>=p.A.length&&(ee=p.A.length-1),p.A[ee]++,p.lsum=p.rsum=0,qt.arraycopy(p.loutbuf,p.totsamp,p.loutbuf,0,MAX_ORDER),qt.arraycopy(p.routbuf,p.totsamp,p.routbuf,0,MAX_ORDER),qt.arraycopy(p.lstepbuf,p.totsamp,p.lstepbuf,0,MAX_ORDER),qt.arraycopy(p.rstepbuf,p.totsamp,p.rstepbuf,0,MAX_ORDER),p.totsamp=0}if(p.totsamp>p.sampleWindow)return GAIN_ANALYSIS_ERROR}return $<MAX_ORDER?(qt.arraycopy(p.linprebuf,$,p.linprebuf,0,MAX_ORDER-$),qt.arraycopy(p.rinprebuf,$,p.rinprebuf,0,MAX_ORDER-$),qt.arraycopy(B,te,p.linprebuf,MAX_ORDER-$,$),qt.arraycopy(H,n,p.rinprebuf,MAX_ORDER-$,$)):(qt.arraycopy(B,te+$-MAX_ORDER,p.linprebuf,0,MAX_ORDER),qt.arraycopy(H,n+$-MAX_ORDER,p.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function b(p,B){var te,H=0;for(te=0;te<B;te++)H+=p[te];if(H==0)return GAIN_NOT_ENOUGH_SAMPLES;var n=0|Math.ceil(H*(1-t));for(te=B;te-- >0&&!((n-=p[te])<=0););return e-te/ct.STEPS_per_dB}this.GetTitleGain=function(p){for(var B=b(p.A,p.A.length),te=0;te<p.A.length;te++)p.B[te]+=p.A[te],p.A[te]=0;for(var te=0;te<MAX_ORDER;te++)p.linprebuf[te]=p.lstepbuf[te]=p.loutbuf[te]=p.rinprebuf[te]=p.rstepbuf[te]=p.routbuf[te]=0;return p.totsamp=0,p.lsum=p.rsum=0,B}}var Sl=ct,Jt=pt;Jt.System;Jt.VbrMode;Jt.Float;Jt.ShortBlock;Jt.Util;Jt.Arrays;Jt.new_array_n;Jt.new_byte;Jt.new_double;var bn=Jt.new_float;Jt.new_float_n;var Tr=Jt.new_int;Jt.new_int_n;Jt.assert;var Kt=Sl;function Zd(){this.linprebuf=bn(Kt.MAX_ORDER*2),this.linpre=0,this.lstepbuf=bn(Kt.MAX_SAMPLES_PER_WINDOW+Kt.MAX_ORDER),this.lstep=0,this.loutbuf=bn(Kt.MAX_SAMPLES_PER_WINDOW+Kt.MAX_ORDER),this.lout=0,this.rinprebuf=bn(Kt.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=bn(Kt.MAX_SAMPLES_PER_WINDOW+Kt.MAX_ORDER),this.rstep=0,this.routbuf=bn(Kt.MAX_SAMPLES_PER_WINDOW+Kt.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Tr(0|Kt.STEPS_per_dB*Kt.MAX_dB),this.B=Tr(0|Kt.STEPS_per_dB*Kt.MAX_dB)}var Jd=Zd;function eu(e){this.bits=e}var kl=eu,ei=pt;ei.System;ei.VbrMode;ei.Float;ei.ShortBlock;ei.Util;ei.Arrays;ei.new_array_n;ei.new_byte;ei.new_double;var wr=ei.new_float;ei.new_float_n;var tu=ei.new_int;ei.new_int_n;var Sr=ei.assert,iu=kl,kr=Lt(),nu=hs,au=ms;function su(e){var t=e;this.quantize=t,this.iteration_loop=function(i,a,s,d){var r=i.internal_flags,f=wr(nu.SFBMAX),E=wr(576),F=tu(2),b=0,p,B=r.l3_side,te=new iu(b);this.quantize.rv.ResvFrameBegin(i,te),b=te.bits;for(var H=0;H<r.mode_gr;H++){p=this.quantize.qupvt.on_pe(i,a,F,b,H,H),r.mode_ext==kr.MPG_MD_MS_LR&&(this.quantize.ms_convert(r.l3_side,H),this.quantize.qupvt.reduce_side(F,s[H],b,p));for(var n=0;n<r.channels_out;n++){var $,_,C=B.tt[H][n];C.block_type!=kr.SHORT_TYPE?($=0,_=r.PSY.mask_adjust-$):($=0,_=r.PSY.mask_adjust_short-$),r.masking_lower=Math.pow(10,_*.1),this.quantize.init_outer_loop(r,C),this.quantize.init_xrpow(r,C,E)&&(this.quantize.qupvt.calc_xmin(i,d[H][n],C,f),this.quantize.outer_loop(i,C,f,E,n,F[n])),this.quantize.iteration_finish_one(r,H,n),Sr(C.part2_3_length<=au.MAX_BITS_PER_CHANNEL),Sr(C.part2_3_length<=F[n])}}this.quantize.rv.ResvFrameEnd(r,b)}}var ou=su;function it(e,t,i,a){this.xlen=e,this.linmax=t,this.table=i,this.hlen=a}var ye={};ye.t1HB=[1,1,1,0];ye.t2HB=[1,2,1,3,1,1,3,2,0];ye.t3HB=[3,2,1,1,1,1,3,2,0];ye.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];ye.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];ye.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];ye.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];ye.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];ye.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];ye.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];ye.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];ye.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];ye.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];ye.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];ye.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];ye.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];ye.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];ye.t1l=[1,4,3,5];ye.t2l=[1,4,7,4,5,7,6,7,8];ye.t3l=[2,3,7,4,4,7,6,7,8];ye.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];ye.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];ye.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];ye.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];ye.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];ye.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];ye.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];ye.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];ye.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];ye.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];ye.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];ye.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];ye.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];ye.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4];ye.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4];ye.ht=[new it(0,0,null,null),new it(2,0,ye.t1HB,ye.t1l),new it(3,0,ye.t2HB,ye.t2l),new it(3,0,ye.t3HB,ye.t3l),new it(0,0,null,null),new it(4,0,ye.t5HB,ye.t5l),new it(4,0,ye.t6HB,ye.t6l),new it(6,0,ye.t7HB,ye.t7l),new it(6,0,ye.t8HB,ye.t8l),new it(6,0,ye.t9HB,ye.t9l),new it(8,0,ye.t10HB,ye.t10l),new it(8,0,ye.t11HB,ye.t11l),new it(8,0,ye.t12HB,ye.t12l),new it(16,0,ye.t13HB,ye.t13l),new it(0,0,null,ye.t16_5l),new it(16,0,ye.t15HB,ye.t15l),new it(1,1,ye.t16HB,ye.t16l),new it(2,3,ye.t16HB,ye.t16l),new it(3,7,ye.t16HB,ye.t16l),new it(4,15,ye.t16HB,ye.t16l),new it(6,63,ye.t16HB,ye.t16l),new it(8,255,ye.t16HB,ye.t16l),new it(10,1023,ye.t16HB,ye.t16l),new it(13,8191,ye.t16HB,ye.t16l),new it(4,15,ye.t24HB,ye.t24l),new it(5,31,ye.t24HB,ye.t24l),new it(6,63,ye.t24HB,ye.t24l),new it(7,127,ye.t24HB,ye.t24l),new it(8,255,ye.t24HB,ye.t24l),new it(9,511,ye.t24HB,ye.t24l),new it(11,2047,ye.t24HB,ye.t24l),new it(13,8191,ye.t24HB,ye.t24l),new it(0,0,ye.t32HB,ye.t32l),new it(0,0,ye.t33HB,ye.t33l)];ye.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];ye.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];ye.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];ye.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];ye.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];ye.scfsi_band=[0,6,11,16,21];var Fo=ye,Us,Ar;function Al(){if(Ar)return Us;Ar=1;var e=wl,t=pt;t.System;var i=t.VbrMode,a=t.Float;t.ShortBlock;var s=t.Util;t.Arrays,t.new_array_n,t.new_byte,t.new_double;var d=t.new_float;t.new_float_n;var r=t.new_int;t.new_int_n;var f=t.assert,E=Lt(),F=kl,b=ms;p.Q_MAX=256+1,p.Q_MAX2=116,p.LARGE_BITS=1e5,p.IXMAX_VAL=8206;function p(){var B=Vo(),te=null,H=null,n=null;this.setModules=function(N,K,W){te=N,H=K,n=W};function $(N){return f(0<=N+p.Q_MAX2&&N<p.Q_MAX),x[N+p.Q_MAX2]}this.IPOW20=function(N){return f(0<=N&&N<p.Q_MAX),z[N]};var _=2220446049250313e-31,C=p.IXMAX_VAL,k=C+2,R=p.Q_MAX,o=p.Q_MAX2;p.LARGE_BITS;var y=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var O=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=O,this.sfBandIndex=[new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var x=d(R+o+1),z=d(R),q=d(k),ee=d(k);this.adj43=ee;function ae(N,K){var W=n.ATHformula(K,N);return W-=y,W=Math.pow(10,W/10+N.ATHlower),W}function I(N){for(var K=N.internal_flags.ATH.l,W=N.internal_flags.ATH.psfb21,X=N.internal_flags.ATH.s,Y=N.internal_flags.ATH.psfb12,D=N.internal_flags,L=N.out_samplerate,c=0;c<E.SBMAX_l;c++){var h=D.scalefac_band.l[c],u=D.scalefac_band.l[c+1];K[c]=a.MAX_VALUE;for(var g=h;g<u;g++){var j=g*L/1152,ne=ae(N,j);K[c]=Math.min(K[c],ne)}}for(var c=0;c<E.PSFB21;c++){var h=D.scalefac_band.psfb21[c],u=D.scalefac_band.psfb21[c+1];W[c]=a.MAX_VALUE;for(var g=h;g<u;g++){var j=g*L/1152,ne=ae(N,j);W[c]=Math.min(W[c],ne)}}for(var c=0;c<E.SBMAX_s;c++){var h=D.scalefac_band.s[c],u=D.scalefac_band.s[c+1];X[c]=a.MAX_VALUE;for(var g=h;g<u;g++){var j=g*L/384,ne=ae(N,j);X[c]=Math.min(X[c],ne)}X[c]*=D.scalefac_band.s[c+1]-D.scalefac_band.s[c]}for(var c=0;c<E.PSFB12;c++){var h=D.scalefac_band.psfb12[c],u=D.scalefac_band.psfb12[c+1];Y[c]=a.MAX_VALUE;for(var g=h;g<u;g++){var j=g*L/384,ne=ae(N,j);Y[c]=Math.min(Y[c],ne)}Y[c]*=D.scalefac_band.s[13]-D.scalefac_band.s[12]}if(N.noATH){for(var c=0;c<E.SBMAX_l;c++)K[c]=1e-20;for(var c=0;c<E.PSFB21;c++)W[c]=1e-20;for(var c=0;c<E.SBMAX_s;c++)X[c]=1e-20;for(var c=0;c<E.PSFB12;c++)Y[c]=1e-20}D.ATH.floor=10*Math.log10(ae(N,-1))}this.iteration_init=function(N){var K=N.internal_flags,W=K.l3_side,X;if(K.iteration_init_init==0){for(K.iteration_init_init=1,W.main_data_begin=0,I(N),q[0]=0,X=1;X<k;X++)q[X]=Math.pow(X,4/3);for(X=0;X<k-1;X++)ee[X]=X+1-Math.pow(.5*(q[X]+q[X+1]),.75);for(ee[X]=.5,X=0;X<R;X++)z[X]=Math.pow(2,(X-210)*-.1875);for(X=0;X<=R+o;X++)x[X]=Math.pow(2,(X-210-o)*.25);te.huffman_init(K);{var Y,D,L,c;for(X=N.exp_nspsytune>>2&63,X>=32&&(X-=64),Y=Math.pow(10,X/4/10),X=N.exp_nspsytune>>8&63,X>=32&&(X-=64),D=Math.pow(10,X/4/10),X=N.exp_nspsytune>>14&63,X>=32&&(X-=64),L=Math.pow(10,X/4/10),X=N.exp_nspsytune>>20&63,X>=32&&(X-=64),c=L*Math.pow(10,X/4/10),X=0;X<E.SBMAX_l;X++){var h;X<=6?h=Y:X<=13?h=D:X<=20?h=L:h=c,K.nsPsy.longfact[X]=h}for(X=0;X<E.SBMAX_s;X++){var h;X<=5?h=Y:X<=10?h=D:X<=11?h=L:h=c,K.nsPsy.shortfact[X]=h}}}},this.on_pe=function(N,K,W,X,Y,D){var L=N.internal_flags,c=0,h,u=r(2),g,j=new F(c),ne=H.ResvMaxBits(N,X,j,D);c=j.bits;var J=c+ne;for(J>b.MAX_BITS_PER_GRANULE&&(J=b.MAX_BITS_PER_GRANULE),h=0,g=0;g<L.channels_out;++g)W[g]=Math.min(b.MAX_BITS_PER_CHANNEL,c/L.channels_out),u[g]=0|W[g]*K[Y][g]/700-W[g],u[g]>X*3/4&&(u[g]=X*3/4),u[g]<0&&(u[g]=0),u[g]+W[g]>b.MAX_BITS_PER_CHANNEL&&(u[g]=Math.max(0,b.MAX_BITS_PER_CHANNEL-W[g])),h+=u[g];if(h>ne)for(g=0;g<L.channels_out;++g)u[g]=ne*u[g]/h;for(g=0;g<L.channels_out;++g)W[g]+=u[g],ne-=u[g];for(h=0,g=0;g<L.channels_out;++g)h+=W[g];if(h>b.MAX_BITS_PER_GRANULE){var U=0;for(g=0;g<L.channels_out;++g)W[g]*=b.MAX_BITS_PER_GRANULE,W[g]/=h,U+=W[g];f(U<=b.MAX_BITS_PER_GRANULE)}return J},this.reduce_side=function(N,K,W,X){f(X<=b.MAX_BITS_PER_GRANULE),f(N[0]+N[1]<=b.MAX_BITS_PER_GRANULE);var Y=.33*(.5-K)/.5;Y<0&&(Y=0),Y>.5&&(Y=.5);var D=0|Y*.5*(N[0]+N[1]);D>b.MAX_BITS_PER_CHANNEL-N[0]&&(D=b.MAX_BITS_PER_CHANNEL-N[0]),D<0&&(D=0),N[1]>=125&&(N[1]-D>125?(N[0]<W&&(N[0]+=D),N[1]-=D):(N[0]+=N[1]-125,N[1]=125)),D=N[0]+N[1],D>X&&(N[0]=X*N[0]/D,N[1]=X*N[1]/D),f(N[0]<=b.MAX_BITS_PER_CHANNEL),f(N[1]<=b.MAX_BITS_PER_CHANNEL),f(N[0]+N[1]<=b.MAX_BITS_PER_GRANULE)},this.athAdjust=function(N,K,W){var X=90.30873362,Y=94.82444863,D=s.FAST_LOG10_X(K,10),L=N*N,c=0;return D-=W,L>1e-20&&(c=1+s.FAST_LOG10_X(L,10/X)),c<0&&(c=0),D*=c,D+=W+X-Y,Math.pow(10,.1*D)},this.calc_xmin=function(N,K,W,X){var Y=0,D=N.internal_flags,L,c=0,h=0,u=D.ATH,g=W.xr,j=N.VBR==i.vbr_mtrh?1:0,ne=D.masking_lower;for((N.VBR==i.vbr_mtrh||N.VBR==i.vbr_mt)&&(ne=1),L=0;L<W.psy_lmax;L++){var J,U,de,ve,_e,Le;N.VBR==i.vbr_rh||N.VBR==i.vbr_mtrh?U=athAdjust(u.adjust,u.l[L],u.floor):U=u.adjust*u.l[L],_e=W.width[L],de=U/_e,ve=_,Le=_e>>1,J=0;do{var Se,Ce;Se=g[c]*g[c],J+=Se,ve+=Se<de?Se:de,c++,Ce=g[c]*g[c],J+=Ce,ve+=Ce<de?Ce:de,c++}while(--Le>0);if(J>U&&h++,L==E.SBPSY_l){var Pe=U*D.nsPsy.longfact[L];ve<Pe&&(ve=Pe)}if(j!=0&&(U=ve),!N.ATHonly){var et=K.en.l[L];if(et>0){var Pe;Pe=J*K.thm.l[L]*ne/et,j!=0&&(Pe*=D.nsPsy.longfact[L]),U<Pe&&(U=Pe)}}j!=0?X[Y++]=U:X[Y++]=U*D.nsPsy.longfact[L]}var Ot=575;if(W.block_type!=E.SHORT_TYPE)for(var v=576;v--!=0&&B.EQ(g[v],0);)Ot=v;W.max_nonzero_coeff=Ot;for(var S=W.sfb_smin;L<W.psymax;S++,L+=3){var _e,Me,Be;for(N.VBR==i.vbr_rh||N.VBR==i.vbr_mtrh?Be=athAdjust(u.adjust,u.s[S],u.floor):Be=u.adjust*u.s[S],_e=W.width[L],Me=0;Me<3;Me++){var J=0,U,de,ve,Le=_e>>1;de=Be/_e,ve=_;do{var Se,Ce;Se=g[c]*g[c],J+=Se,ve+=Se<de?Se:de,c++,Ce=g[c]*g[c],J+=Ce,ve+=Ce<de?Ce:de,c++}while(--Le>0);if(J>Be&&h++,S==E.SBPSY_s){var Pe=Be*D.nsPsy.shortfact[S];ve<Pe&&(ve=Pe)}if(j!=0?U=ve:U=Be,!N.ATHonly&&!N.ATHshort){var et=K.en.s[S][Me];if(et>0){var Pe;Pe=J*K.thm.s[S][Me]*ne/et,j!=0&&(Pe*=D.nsPsy.shortfact[S]),U<Pe&&(U=Pe)}}j!=0?X[Y++]=U:X[Y++]=U*D.nsPsy.shortfact[S]}N.useTemporal&&(X[Y-3]>X[Y-3+1]&&(X[Y-3+1]+=(X[Y-3]-X[Y-3+1])*D.decay),X[Y-3+1]>X[Y-3+2]&&(X[Y-3+2]+=(X[Y-3+1]-X[Y-3+2])*D.decay))}return h};function m(N){this.s=N}this.calc_noise_core=function(N,K,W,X){var Y=0,D=K.s,L=N.l3_enc;if(D>N.count1)for(;W--!=0;){var c;c=N.xr[D],D++,Y+=c*c,c=N.xr[D],D++,Y+=c*c}else if(D>N.big_values){var h=d(2);for(h[0]=0,h[1]=X;W--!=0;){var c;c=Math.abs(N.xr[D])-h[L[D]],D++,Y+=c*c,c=Math.abs(N.xr[D])-h[L[D]],D++,Y+=c*c}}else for(;W--!=0;){var c;c=Math.abs(N.xr[D])-q[L[D]]*X,D++,Y+=c*c,c=Math.abs(N.xr[D])-q[L[D]]*X,D++,Y+=c*c}return K.s=D,Y},this.calc_noise=function(N,K,W,X,Y){var D=0,L=0,c,h,u=0,g=0,j=0,ne=-20,J=0,U=N.scalefac,de=0;for(X.over_SSD=0,c=0;c<N.psymax;c++){var ve=N.global_gain-(U[de++]+(N.preflag!=0?O[c]:0)<<N.scalefac_scale+1)-N.subblock_gain[N.window[c]]*8,_e=0;if(Y!=null&&Y.step[c]==ve)_e=Y.noise[c],J+=N.width[c],W[D++]=_e/K[L++],_e=Y.noise_log[c];else{var Le=$(ve);if(h=N.width[c]>>1,J+N.width[c]>N.max_nonzero_coeff){var Se;Se=N.max_nonzero_coeff-J+1,Se>0?h=Se>>1:h=0}var Ce=new m(J);_e=this.calc_noise_core(N,Ce,h,Le),J=Ce.s,Y!=null&&(Y.step[c]=ve,Y.noise[c]=_e),_e=W[D++]=_e/K[L++],_e=s.FAST_LOG10(Math.max(_e,1e-20)),Y!=null&&(Y.noise_log[c]=_e)}if(Y!=null&&(Y.global_gain=N.global_gain),j+=_e,_e>0){var Pe;Pe=Math.max(0|_e*10+.5,1),X.over_SSD+=Pe*Pe,u++,g+=_e}ne=Math.max(ne,_e)}return X.over_count=u,X.tot_noise=j,X.over_noise=g,X.max_noise=ne,u},this.set_pinfo=function(N,K,W,X,Y){var D=N.internal_flags,L,c,h,u,g,j=K.scalefac_scale==0?.5:1,ne=K.scalefac,J=d(L3Side.SFBMAX),U=d(L3Side.SFBMAX),de=new CalcNoiseResult;calc_xmin(N,W,K,J),calc_noise(K,J,U,de,null);var ve=0;for(c=K.sfb_lmax,K.block_type!=E.SHORT_TYPE&&K.mixed_block_flag==0&&(c=22),L=0;L<c;L++){var _e=D.scalefac_band.l[L],Le=D.scalefac_band.l[L+1],Se=Le-_e;for(u=0;ve<Le;ve++)u+=K.xr[ve]*K.xr[ve];u/=Se,g=1e15,D.pinfo.en[X][Y][L]=g*u,D.pinfo.xfsf[X][Y][L]=g*J[L]*U[L]/Se,W.en.l[L]>0&&!N.ATHonly?u=u/W.en.l[L]:u=0,D.pinfo.thr[X][Y][L]=g*Math.max(u*W.thm.l[L],D.ATH.l[L]),D.pinfo.LAMEsfb[X][Y][L]=0,K.preflag!=0&&L>=11&&(D.pinfo.LAMEsfb[X][Y][L]=-j*O[L]),L<E.SBPSY_l&&(f(ne[L]>=0),D.pinfo.LAMEsfb[X][Y][L]-=j*ne[L])}if(K.block_type==E.SHORT_TYPE)for(c=L,L=K.sfb_smin;L<E.SBMAX_s;L++)for(var _e=D.scalefac_band.s[L],Le=D.scalefac_band.s[L+1],Se=Le-_e,Ce=0;Ce<3;Ce++){for(u=0,h=_e;h<Le;h++)u+=K.xr[ve]*K.xr[ve],ve++;u=Math.max(u/Se,1e-20),g=1e15,D.pinfo.en_s[X][Y][3*L+Ce]=g*u,D.pinfo.xfsf_s[X][Y][3*L+Ce]=g*J[c]*U[c]/Se,W.en.s[L][Ce]>0?u=u/W.en.s[L][Ce]:u=0,(N.ATHonly||N.ATHshort)&&(u=0),D.pinfo.thr_s[X][Y][3*L+Ce]=g*Math.max(u*W.thm.s[L][Ce],D.ATH.s[L]),D.pinfo.LAMEsfb_s[X][Y][3*L+Ce]=-2*K.subblock_gain[Ce],L<E.SBPSY_s&&(D.pinfo.LAMEsfb_s[X][Y][3*L+Ce]-=j*ne[c]),c++}D.pinfo.LAMEqss[X][Y]=K.global_gain,D.pinfo.LAMEmainbits[X][Y]=K.part2_3_length+K.part2_length,D.pinfo.LAMEsfbits[X][Y]=K.part2_length,D.pinfo.over[X][Y]=de.over_count,D.pinfo.max_noise[X][Y]=de.max_noise*10,D.pinfo.over_noise[X][Y]=de.over_noise*10,D.pinfo.tot_noise[X][Y]=de.tot_noise*10,D.pinfo.over_SSD[X][Y]=de.over_SSD}}return Us=p,Us}var zs,Mr;function Ml(){if(Mr)return zs;Mr=1;var e=pt,t=e.System;e.VbrMode,e.Float,e.ShortBlock,e.Util;var i=e.Arrays;e.new_array_n,e.new_byte,e.new_double,e.new_float,e.new_float_n;var a=e.new_int;e.new_int_n;var s=e.assert,d=Lt(),r=Fo,f=Po,E=Al();function F(){var b=null;this.qupvt=null,this.setModules=function(D){this.qupvt=D,b=D};function p(D){this.bits=0|D}var B=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function te(D,L,c,h,u,g){var j=.5946/L;for(s(D>0),D=D>>1;D--!=0;)u[g++]=j>c[h++]?0:1,u[g++]=j>c[h++]?0:1}function H(D,L,c,h,u,g){s(D>0),D=D>>1;var j=D%2;for(D=D>>1;D--!=0;){var ne,J,U,de,ve,_e,Le,Se;ne=c[h++]*L,J=c[h++]*L,ve=0|ne,U=c[h++]*L,_e=0|J,de=c[h++]*L,Le=0|U,ne+=b.adj43[ve],Se=0|de,J+=b.adj43[_e],u[g++]=0|ne,U+=b.adj43[Le],u[g++]=0|J,de+=b.adj43[Se],u[g++]=0|U,u[g++]=0|de}if(j!=0){var ne,J,ve,_e;ne=c[h++]*L,J=c[h++]*L,ve=0|ne,_e=0|J,ne+=b.adj43[ve],J+=b.adj43[_e],u[g++]=0|ne,u[g++]=0|J}}function n(D,L,c,h,u){var g,j,ne=0,J,U=0,de=0,ve=0,_e=L,Le=0,Se=_e,Ce=0,Pe=D,et=0;for(J=u!=null&&h.global_gain==u.global_gain,h.block_type==d.SHORT_TYPE?j=38:j=21,g=0;g<=j;g++){var Ot=-1;if((J||h.block_type==d.NORM_TYPE)&&(Ot=h.global_gain-(h.scalefac[g]+(h.preflag!=0?b.pretab[g]:0)<<h.scalefac_scale+1)-h.subblock_gain[h.window[g]]*8),s(h.width[g]>=0),J&&u.step[g]==Ot)U!=0&&(H(U,c,Pe,et,Se,Ce),U=0),de!=0&&(te(de,c,Pe,et,Se,Ce),de=0);else{var v=h.width[g];if(ne+h.width[g]>h.max_nonzero_coeff){var S;S=h.max_nonzero_coeff-ne+1,i.fill(L,h.max_nonzero_coeff,576,0),v=S,v<0&&(v=0),g=j+1}if(U==0&&de==0&&(Se=_e,Ce=Le,Pe=D,et=ve),u!=null&&u.sfb_count1>0&&g>=u.sfb_count1&&u.step[g]>0&&Ot>=u.step[g]?(U!=0&&(H(U,c,Pe,et,Se,Ce),U=0,Se=_e,Ce=Le,Pe=D,et=ve),de+=v):(de!=0&&(te(de,c,Pe,et,Se,Ce),de=0,Se=_e,Ce=Le,Pe=D,et=ve),U+=v),v<=0){de!=0&&(te(de,c,Pe,et,Se,Ce),de=0),U!=0&&(H(U,c,Pe,et,Se,Ce),U=0);break}}g<=j&&(Le+=h.width[g],ve+=h.width[g],ne+=h.width[g])}U!=0&&(H(U,c,Pe,et,Se,Ce),U=0),de!=0&&(te(de,c,Pe,et,Se,Ce),de=0)}function $(D,L,c){var h=0,u=0;do{var g=D[L++],j=D[L++];h<g&&(h=g),u<j&&(u=j)}while(L<c);return h<u&&(h=u),h}function _(D,L,c,h,u,g){var j=r.ht[h].xlen*65536+r.ht[u].xlen,ne=0,J;do{var U=D[L++],de=D[L++];U!=0&&(U>14&&(U=15,ne+=j),U*=16),de!=0&&(de>14&&(de=15,ne+=j),U+=de),ne+=r.largetbl[U]}while(L<c);return J=ne&65535,ne>>=16,ne>J&&(ne=J,h=u),g.bits+=ne,h}function C(D,L,c,h){var u=0,g=r.ht[1].hlen;do{var j=D[L+0]*2+D[L+1];L+=2,u+=g[j]}while(L<c);return h.bits+=u,1}function k(D,L,c,h,u){var g=0,j,ne=r.ht[h].xlen,J;h==2?J=r.table23:J=r.table56;do{var U=D[L+0]*ne+D[L+1];L+=2,g+=J[U]}while(L<c);return j=g&65535,g>>=16,g>j&&(g=j,h++),u.bits+=g,h}function R(D,L,c,h,u){var g=0,j=0,ne=0,J=r.ht[h].xlen,U=r.ht[h].hlen,de=r.ht[h+1].hlen,ve=r.ht[h+2].hlen;do{var _e=D[L+0]*J+D[L+1];L+=2,g+=U[_e],j+=de[_e],ne+=ve[_e]}while(L<c);var Le=h;return g>j&&(g=j,Le++),g>ne&&(g=ne,Le=h+2),u.bits+=g,Le}var o=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function y(D,L,c,h){var u=$(D,L,c);switch(u){case 0:return u;case 1:return C(D,L,c,h);case 2:case 3:return k(D,L,c,o[u-1],h);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return R(D,L,c,o[u-1],h);default:if(u>E.IXMAX_VAL)return h.bits=E.LARGE_BITS,-1;u-=15;var g;for(g=24;g<32&&!(r.ht[g].linmax>=u);g++);var j;for(j=g-8;j<24&&!(r.ht[j].linmax>=u);j++);return _(D,L,c,j,g,h)}}this.noquant_count_bits=function(D,L,c){var h=L.l3_enc,u=Math.min(576,L.max_nonzero_coeff+2>>1<<1);for(c!=null&&(c.sfb_count1=0);u>1&&!(h[u-1]|h[u-2]);u-=2);L.count1=u;for(var g=0,j=0;u>3;u-=4){var ne;if(((h[u-1]|h[u-2]|h[u-3]|h[u-4])&2147483647)>1)break;ne=((h[u-4]*2+h[u-3])*2+h[u-2])*2+h[u-1],g+=r.t32l[ne],j+=r.t33l[ne]}var J=g;if(L.count1table_select=0,g>j&&(J=j,L.count1table_select=1),L.count1bits=J,L.big_values=u,u==0)return J;if(L.block_type==d.SHORT_TYPE)g=3*D.scalefac_band.s[3],g>L.big_values&&(g=L.big_values),j=L.big_values;else if(L.block_type==d.NORM_TYPE){if(s(u<=576),g=L.region0_count=D.bv_scf[u-2],j=L.region1_count=D.bv_scf[u-1],s(g+j+2<d.SBPSY_l),j=D.scalefac_band.l[g+j+2],g=D.scalefac_band.l[g+1],j<u){var U=new p(J);L.table_select[2]=y(h,j,u,U),J=U.bits}}else L.region0_count=7,L.region1_count=d.SBMAX_l-1-7-1,g=D.scalefac_band.l[7+1],j=u,g>j&&(g=j);if(g=Math.min(g,u),j=Math.min(j,u),s(g>=0),s(j>=0),0<g){var U=new p(J);L.table_select[0]=y(h,0,g,U),J=U.bits}if(g<j){var U=new p(J);L.table_select[1]=y(h,g,j,U),J=U.bits}if(D.use_best_huffman==2&&(L.part2_3_length=J,best_huffman_divide(D,L),J=L.part2_3_length),c!=null&&L.block_type==d.NORM_TYPE){for(var de=0;D.scalefac_band.l[de]<L.big_values;)de++;c.sfb_count1=de}return J},this.count_bits=function(D,L,c,h){var u=c.l3_enc,g=E.IXMAX_VAL/b.IPOW20(c.global_gain);if(c.xrpow_max>g)return E.LARGE_BITS;if(n(L,u,b.IPOW20(c.global_gain),c,h),D.substep_shaping&2)for(var j=0,ne=c.global_gain+c.scalefac_scale,J=.634521682242439/b.IPOW20(ne),U=0;U<c.sfbmax;U++){var de=c.width[U];if(s(de>=0),D.pseudohalf[U]==0)j+=de;else{var ve;for(ve=j,j+=de;ve<j;++ve)u[ve]=L[ve]>=J?u[ve]:0}}return this.noquant_count_bits(D,c,h)};function O(D,L,c,h,u,g,j){for(var ne=L.big_values,J=0;J<=7+15;J++)h[J]=E.LARGE_BITS;for(var J=0;J<16;J++){var U=D.scalefac_band.l[J+1];if(U>=ne)break;var de=0,ve=new p(de),_e=y(c,0,U,ve);de=ve.bits;for(var Le=0;Le<8;Le++){var Se=D.scalefac_band.l[J+Le+2];if(Se>=ne)break;var Ce=de;ve=new p(Ce);var Pe=y(c,U,Se,ve);Ce=ve.bits,h[J+Le]>Ce&&(h[J+Le]=Ce,u[J+Le]=J,g[J+Le]=_e,j[J+Le]=Pe)}}}function x(D,L,c,h,u,g,j,ne){for(var J=L.big_values,U=2;U<d.SBMAX_l+1;U++){var de=D.scalefac_band.l[U];if(de>=J)break;var ve=u[U-2]+L.count1bits;if(c.part2_3_length<=ve)break;var _e=new p(ve),Le=y(h,de,J,_e);ve=_e.bits,!(c.part2_3_length<=ve)&&(c.assign(L),c.part2_3_length=ve,c.region0_count=g[U-2],c.region1_count=U-2-g[U-2],c.table_select[0]=j[U-2],c.table_select[1]=ne[U-2],c.table_select[2]=Le)}}this.best_huffman_divide=function(D,L){var c=new f,h=L.l3_enc,u=a(7+15+1),g=a(7+15+1),j=a(7+15+1),ne=a(7+15+1);if(!(L.block_type==d.SHORT_TYPE&&D.mode_gr==1)){c.assign(L),L.block_type==d.NORM_TYPE&&(O(D,L,h,u,g,j,ne),x(D,c,L,h,u,g,j,ne));var J=c.big_values;if(!(J==0||(h[J-2]|h[J-1])>1)&&(J=L.count1+2,!(J>576))){c.assign(L),c.count1=J;var U=0,de=0;for(s(J<=576);J>c.big_values;J-=4){var ve=((h[J-4]*2+h[J-3])*2+h[J-2])*2+h[J-1];U+=r.t32l[ve],de+=r.t33l[ve]}if(c.big_values=J,c.count1table_select=0,U>de&&(U=de,c.count1table_select=1),c.count1bits=U,c.block_type==d.NORM_TYPE)x(D,c,L,h,u,g,j,ne);else{if(c.part2_3_length=U,U=D.scalefac_band.l[7+1],U>J&&(U=J),U>0){var _e=new p(c.part2_3_length);c.table_select[0]=y(h,0,U,_e),c.part2_3_length=_e.bits}if(J>U){var _e=new p(c.part2_3_length);c.table_select[1]=y(h,U,J,_e),c.part2_3_length=_e.bits}L.part2_3_length>c.part2_3_length&&L.assign(c)}}}};var z=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],q=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],ee=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],ae=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];F.slen1_tab=ee,F.slen2_tab=ae;function I(D,L){for(var c,h=L.tt[1][D],u=L.tt[0][D],g=0;g<r.scfsi_band.length-1;g++){for(c=r.scfsi_band[g];c<r.scfsi_band[g+1]&&!(u.scalefac[c]!=h.scalefac[c]&&h.scalefac[c]>=0);c++);if(c==r.scfsi_band[g+1]){for(c=r.scfsi_band[g];c<r.scfsi_band[g+1];c++)h.scalefac[c]=-1;L.scfsi[D][g]=1}}var j=0,ne=0;for(c=0;c<11;c++)h.scalefac[c]!=-1&&(ne++,j<h.scalefac[c]&&(j=h.scalefac[c]));for(var J=0,U=0;c<d.SBPSY_l;c++)h.scalefac[c]!=-1&&(U++,J<h.scalefac[c]&&(J=h.scalefac[c]));for(var g=0;g<16;g++)if(j<z[g]&&J<q[g]){var de=ee[g]*ne+ae[g]*U;h.part2_length>de&&(h.part2_length=de,h.scalefac_compress=g)}}this.best_scalefac_store=function(D,L,c,h){var u=h.tt[L][c],g,j,ne,J,U=0;for(ne=0,g=0;g<u.sfbmax;g++){var de=u.width[g];for(s(de>=0),ne+=de,J=-de;J<0&&u.l3_enc[J+ne]==0;J++);J==0&&(u.scalefac[g]=U=-2)}if(u.scalefac_scale==0&&u.preflag==0){var ve=0;for(g=0;g<u.sfbmax;g++)u.scalefac[g]>0&&(ve|=u.scalefac[g]);if(!(ve&1)&&ve!=0){for(g=0;g<u.sfbmax;g++)u.scalefac[g]>0&&(u.scalefac[g]>>=1);u.scalefac_scale=U=1}}if(u.preflag==0&&u.block_type!=d.SHORT_TYPE&&D.mode_gr==2){for(g=11;g<d.SBPSY_l&&!(u.scalefac[g]<b.pretab[g]&&u.scalefac[g]!=-2);g++);if(g==d.SBPSY_l){for(g=11;g<d.SBPSY_l;g++)u.scalefac[g]>0&&(u.scalefac[g]-=b.pretab[g]);u.preflag=U=1}}for(j=0;j<4;j++)h.scfsi[c][j]=0;for(D.mode_gr==2&&L==1&&h.tt[0][c].block_type!=d.SHORT_TYPE&&h.tt[1][c].block_type!=d.SHORT_TYPE&&(I(c,h),U=0),g=0;g<u.sfbmax;g++)u.scalefac[g]==-2&&(u.scalefac[g]=0);U!=0&&(D.mode_gr==2?this.scale_bitcount(u):this.scale_bitcount_lsf(D,u))};function m(D,L){for(var c=0;c<L;++c)if(D[c]<0)return!1;return!0}var N=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],K=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],W=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(D){var L,c,h=0,u=0,g,j=D.scalefac;if(s(m(j,D.sfbmax)),D.block_type==d.SHORT_TYPE)g=N,D.mixed_block_flag!=0&&(g=K);else if(g=W,D.preflag==0){for(c=11;c<d.SBPSY_l&&!(j[c]<b.pretab[c]);c++);if(c==d.SBPSY_l)for(D.preflag=1,c=11;c<d.SBPSY_l;c++)j[c]-=b.pretab[c]}for(c=0;c<D.sfbdivide;c++)h<j[c]&&(h=j[c]);for(;c<D.sfbmax;c++)u<j[c]&&(u=j[c]);for(D.part2_length=E.LARGE_BITS,L=0;L<16;L++)h<z[L]&&u<q[L]&&D.part2_length>g[L]&&(D.part2_length=g[L],D.scalefac_compress=L);return D.part2_length==E.LARGE_BITS};var X=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(D,L){var c,h,u,g,j,ne,J,U,de=a(4),ve=L.scalefac;for(L.preflag!=0?c=2:c=0,J=0;J<4;J++)de[J]=0;if(L.block_type==d.SHORT_TYPE){h=1;var _e=b.nr_of_sfb_block[c][h];for(U=0,u=0;u<4;u++)for(g=_e[u]/3,J=0;J<g;J++,U++)for(j=0;j<3;j++)ve[U*3+j]>de[u]&&(de[u]=ve[U*3+j])}else{h=0;var _e=b.nr_of_sfb_block[c][h];for(U=0,u=0;u<4;u++)for(g=_e[u],J=0;J<g;J++,U++)ve[U]>de[u]&&(de[u]=ve[U])}for(ne=!1,u=0;u<4;u++)de[u]>X[c][u]&&(ne=!0);if(!ne){var Le,Se,Ce,Pe;for(L.sfb_partition_table=b.nr_of_sfb_block[c][h],u=0;u<4;u++)L.slen[u]=Y[de[u]];switch(Le=L.slen[0],Se=L.slen[1],Ce=L.slen[2],Pe=L.slen[3],c){case 0:L.scalefac_compress=(Le*5+Se<<4)+(Ce<<2)+Pe;break;case 1:L.scalefac_compress=400+(Le*5+Se<<2)+Ce;break;case 2:L.scalefac_compress=500+Le*3+Se;break;default:t.err.printf("intensity stereo not implemented yet\n");break}}if(!ne)for(s(L.sfb_partition_table!=null),L.part2_length=0,u=0;u<4;u++)L.part2_length+=L.slen[u]*L.sfb_partition_table[u];return ne};var Y=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(D){for(var L=2;L<=576;L+=2){for(var c=0,h;D.scalefac_band.l[++c]<L;);for(h=B[c][0];D.scalefac_band.l[h+1]>L;)h--;for(h<0&&(h=B[c][0]),D.bv_scf[L-2]=h,h=B[c][1];D.scalefac_band.l[h+D.bv_scf[L-2]+2]>L;)h--;h<0&&(h=B[c][1]),D.bv_scf[L-1]=h}}}return zs=F,zs}var Ys,Ir;function Vo(){if(Ir)return Ys;Ir=1;var e=pt,t=e.System;e.VbrMode,e.Float,e.ShortBlock,e.Util;var i=e.Arrays;e.new_array_n;var a=e.new_byte;e.new_double,e.new_float;var s=e.new_float_n,d=e.new_int;e.new_int_n;var r=e.assert,f=Ml(),E=Fo,F=Lt(),b=ms;p.EQ=function(B,te){return Math.abs(B)>Math.abs(te)?Math.abs(B-te)<=Math.abs(B)*1e-6:Math.abs(B-te)<=Math.abs(te)*1e-6},p.NEQ=function(B,te){return!p.EQ(B,te)};function p(){var B=Ho(),te=this,H=32773,n=32,$=null,_=null,C=null,k=null;this.setModules=function(c,h,u,g){$=c,_=h,C=u,k=g};var R=null,o=0,y=0,O=0;this.getframebits=function(c){var h=c.internal_flags,u;h.bitrate_index!=0?u=E.bitrate_table[c.version][h.bitrate_index]:u=c.brate,r(8<=u&&u<=640);var g=0|(c.version+1)*72e3*u/c.out_samplerate+h.padding;return 8*g};function x(c){t.arraycopy(c.header[c.w_ptr].buf,0,R,y,c.sideinfo_len),y+=c.sideinfo_len,o+=c.sideinfo_len*8,c.w_ptr=c.w_ptr+1&b.MAX_HEADER_BUF-1}function z(c,h,u){for(r(u<n-2);u>0;){var g;O==0&&(O=8,y++,r(y<B.LAME_MAXMP3BUFFER),r(c.header[c.w_ptr].write_timing>=o),c.header[c.w_ptr].write_timing==o&&x(c),R[y]=0),g=Math.min(u,O),u-=g,O-=g,r(u<n),r(O<n),R[y]|=h>>u<<O,o+=g}}function q(c,h,u){for(r(u<n-2);u>0;){var g;O==0&&(O=8,y++,r(y<B.LAME_MAXMP3BUFFER),R[y]=0),g=Math.min(u,O),u-=g,O-=g,r(u<n),r(O<n),R[y]|=h>>u<<O,o+=g}}function ee(c,h){var u=c.internal_flags,g;if(r(h>=0),h>=8&&(z(u,76,8),h-=8),h>=8&&(z(u,65,8),h-=8),h>=8&&(z(u,77,8),h-=8),h>=8&&(z(u,69,8),h-=8),h>=32){var j=C.getLameShortVersion();if(h>=32)for(g=0;g<j.length&&h>=8;++g)h-=8,z(u,j.charAt(g),8)}for(;h>=1;h-=1)z(u,u.ancillary_flag,1),u.ancillary_flag^=c.disable_reservoir?0:1;r(h==0)}function ae(c,h,u){for(var g=c.header[c.h_ptr].ptr;u>0;){var j=Math.min(u,8-(g&7));u-=j,r(u<n),c.header[c.h_ptr].buf[g>>3]|=h>>u<<8-(g&7)-j,g+=j}c.header[c.h_ptr].ptr=g}function I(c,h){c<<=8;for(var u=0;u<8;u++)c<<=1,h<<=1,(h^c)&65536&&(h^=H);return h}this.CRC_writeheader=function(c,h){var u=65535;u=I(h[2]&255,u),u=I(h[3]&255,u);for(var g=6;g<c.sideinfo_len;g++)u=I(h[g]&255,u);h[4]=byte(u>>8),h[5]=byte(u&255)};function m(c,h){var u=c.internal_flags,g,j,ne;if(g=u.l3_side,u.header[u.h_ptr].ptr=0,i.fill(u.header[u.h_ptr].buf,0,u.sideinfo_len,0),c.out_samplerate<16e3?ae(u,4094,12):ae(u,4095,12),ae(u,c.version,1),ae(u,4-3,2),ae(u,c.error_protection?0:1,1),ae(u,u.bitrate_index,4),ae(u,u.samplerate_index,2),ae(u,u.padding,1),ae(u,c.extension,1),ae(u,c.mode.ordinal(),2),ae(u,u.mode_ext,2),ae(u,c.copyright,1),ae(u,c.original,1),ae(u,c.emphasis,2),c.error_protection&&ae(u,0,16),c.version==1){for(r(g.main_data_begin>=0),ae(u,g.main_data_begin,9),u.channels_out==2?ae(u,g.private_bits,3):ae(u,g.private_bits,5),ne=0;ne<u.channels_out;ne++){var J;for(J=0;J<4;J++)ae(u,g.scfsi[ne][J],1)}for(j=0;j<2;j++)for(ne=0;ne<u.channels_out;ne++){var U=g.tt[j][ne];ae(u,U.part2_3_length+U.part2_length,12),ae(u,U.big_values/2,9),ae(u,U.global_gain,8),ae(u,U.scalefac_compress,4),U.block_type!=F.NORM_TYPE?(ae(u,1,1),ae(u,U.block_type,2),ae(u,U.mixed_block_flag,1),U.table_select[0]==14&&(U.table_select[0]=16),ae(u,U.table_select[0],5),U.table_select[1]==14&&(U.table_select[1]=16),ae(u,U.table_select[1],5),ae(u,U.subblock_gain[0],3),ae(u,U.subblock_gain[1],3),ae(u,U.subblock_gain[2],3)):(ae(u,0,1),U.table_select[0]==14&&(U.table_select[0]=16),ae(u,U.table_select[0],5),U.table_select[1]==14&&(U.table_select[1]=16),ae(u,U.table_select[1],5),U.table_select[2]==14&&(U.table_select[2]=16),ae(u,U.table_select[2],5),r(0<=U.region0_count&&U.region0_count<16),r(0<=U.region1_count&&U.region1_count<8),ae(u,U.region0_count,4),ae(u,U.region1_count,3)),ae(u,U.preflag,1),ae(u,U.scalefac_scale,1),ae(u,U.count1table_select,1)}}else for(r(g.main_data_begin>=0),ae(u,g.main_data_begin,8),ae(u,g.private_bits,u.channels_out),j=0,ne=0;ne<u.channels_out;ne++){var U=g.tt[j][ne];ae(u,U.part2_3_length+U.part2_length,12),ae(u,U.big_values/2,9),ae(u,U.global_gain,8),ae(u,U.scalefac_compress,9),U.block_type!=F.NORM_TYPE?(ae(u,1,1),ae(u,U.block_type,2),ae(u,U.mixed_block_flag,1),U.table_select[0]==14&&(U.table_select[0]=16),ae(u,U.table_select[0],5),U.table_select[1]==14&&(U.table_select[1]=16),ae(u,U.table_select[1],5),ae(u,U.subblock_gain[0],3),ae(u,U.subblock_gain[1],3),ae(u,U.subblock_gain[2],3)):(ae(u,0,1),U.table_select[0]==14&&(U.table_select[0]=16),ae(u,U.table_select[0],5),U.table_select[1]==14&&(U.table_select[1]=16),ae(u,U.table_select[1],5),U.table_select[2]==14&&(U.table_select[2]=16),ae(u,U.table_select[2],5),r(0<=U.region0_count&&U.region0_count<16),r(0<=U.region1_count&&U.region1_count<8),ae(u,U.region0_count,4),ae(u,U.region1_count,3)),ae(u,U.scalefac_scale,1),ae(u,U.count1table_select,1)}c.error_protection&&CRC_writeheader(u,u.header[u.h_ptr].buf);{var de=u.h_ptr;r(u.header[de].ptr==u.sideinfo_len*8),u.h_ptr=de+1&b.MAX_HEADER_BUF-1,u.header[u.h_ptr].write_timing=u.header[de].write_timing+h,u.h_ptr==u.w_ptr&&t.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}}function N(c,h){var u=E.ht[h.count1table_select+32],g,j=0,ne=h.big_values,J=h.big_values;for(r(h.count1table_select<2),g=(h.count1-h.big_values)/4;g>0;--g){var U=0,de=0,ve;ve=h.l3_enc[ne+0],ve!=0&&(de+=8,h.xr[J+0]<0&&U++,r(ve<=1)),ve=h.l3_enc[ne+1],ve!=0&&(de+=4,U*=2,h.xr[J+1]<0&&U++,r(ve<=1)),ve=h.l3_enc[ne+2],ve!=0&&(de+=2,U*=2,h.xr[J+2]<0&&U++,r(ve<=1)),ve=h.l3_enc[ne+3],ve!=0&&(de++,U*=2,h.xr[J+3]<0&&U++,r(ve<=1)),ne+=4,J+=4,z(c,U+u.table[de],u.hlen[de]),j+=u.hlen[de]}return j}function K(c,h,u,g,j){var ne=E.ht[h],J=0;if(r(h<32),h==0)return J;for(var U=u;U<g;U+=2){var de=0,ve=0,_e=ne.xlen,Le=ne.xlen,Se=0,Ce=j.l3_enc[U],Pe=j.l3_enc[U+1];if(Ce!=0&&(j.xr[U]<0&&Se++,de--),h>15){if(Ce>14){var et=Ce-15;r(et<=ne.linmax),Se|=et<<1,ve=_e,Ce=15}if(Pe>14){var Ot=Pe-15;r(Ot<=ne.linmax),Se<<=_e,Se|=Ot,ve+=_e,Pe=15}Le=16}Pe!=0&&(Se<<=1,j.xr[U+1]<0&&Se++,de--),r((Ce|Pe)<16),Ce=Ce*Le+Pe,ve-=de,de+=ne.hlen[Ce],r(de<=n),r(ve<=n),z(c,ne.table[Ce],de),z(c,Se,ve),J+=de+ve}return J}function W(c,h){var u=3*c.scalefac_band.s[3];u>h.big_values&&(u=h.big_values);var g=K(c,h.table_select[0],0,u,h);return g+=K(c,h.table_select[1],u,h.big_values,h),g}function X(c,h){var u,g,j,ne;u=h.big_values,r(0<=u&&u<=576);var J=h.region0_count+1;return r(0<=J),r(J<c.scalefac_band.l.length),j=c.scalefac_band.l[J],J+=h.region1_count+1,r(0<=J),r(J<c.scalefac_band.l.length),ne=c.scalefac_band.l[J],j>u&&(j=u),ne>u&&(ne=u),g=K(c,h.table_select[0],0,j,h),g+=K(c,h.table_select[1],j,ne,h),g+=K(c,h.table_select[2],ne,u,h),g}function Y(c){var h,u,g,j,ne=0,J=c.internal_flags,U=J.l3_side;if(c.version==1)for(h=0;h<2;h++)for(u=0;u<J.channels_out;u++){var de=U.tt[h][u],ve=f.slen1_tab[de.scalefac_compress],_e=f.slen2_tab[de.scalefac_compress];for(j=0,g=0;g<de.sfbdivide;g++)de.scalefac[g]!=-1&&(z(J,de.scalefac[g],ve),j+=ve);for(;g<de.sfbmax;g++)de.scalefac[g]!=-1&&(z(J,de.scalefac[g],_e),j+=_e);r(j==de.part2_length),de.block_type==F.SHORT_TYPE?j+=W(J,de):j+=X(J,de),j+=N(J,de),r(j==de.part2_3_length+de.part2_length),ne+=j}else for(h=0,u=0;u<J.channels_out;u++){var de=U.tt[h][u],Le,Se,Ce=0;if(r(de.sfb_partition_table!=null),j=0,g=0,Se=0,de.block_type==F.SHORT_TYPE){for(;Se<4;Se++){var Pe=de.sfb_partition_table[Se]/3,et=de.slen[Se];for(Le=0;Le<Pe;Le++,g++)z(J,Math.max(de.scalefac[g*3+0],0),et),z(J,Math.max(de.scalefac[g*3+1],0),et),z(J,Math.max(de.scalefac[g*3+2],0),et),Ce+=3*et}j+=W(J,de)}else{for(;Se<4;Se++){var Pe=de.sfb_partition_table[Se],et=de.slen[Se];for(Le=0;Le<Pe;Le++,g++)z(J,Math.max(de.scalefac[g],0),et),Ce+=et}j+=X(J,de)}j+=N(J,de),r(j==de.part2_3_length),r(Ce==de.part2_length),ne+=Ce+j}return ne}function D(){this.total=0}function L(c,h){var u=c.internal_flags,g,j,ne,J,U;return U=u.w_ptr,J=u.h_ptr-1,J==-1&&(J=b.MAX_HEADER_BUF-1),g=u.header[J].write_timing-o,h.total=g,g>=0&&(j=1+J-U,J<U&&(j=1+J-U+b.MAX_HEADER_BUF),g-=j*8*u.sideinfo_len),ne=te.getframebits(c),g+=ne,h.total+=ne,h.total%8!=0?h.total=1+h.total/8:h.total=h.total/8,h.total+=y+1,g<0&&t.err.println("strange error flushing buffer ... \n"),g}this.flush_bitstream=function(c){var h=c.internal_flags,u,g,j=h.h_ptr-1;if(j==-1&&(j=b.MAX_HEADER_BUF-1),u=h.l3_side,!((g=L(c,new D))<0)){if(ee(c,g),r(h.header[j].write_timing+this.getframebits(c)==o),h.ResvSize=0,u.main_data_begin=0,h.findReplayGain){var ne=$.GetTitleGain(h.rgdata);r(NEQ(ne,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),h.RadioGain=Math.floor(ne*10+.5)|0}h.findPeakSample&&(h.noclipGainChange=Math.ceil(Math.log10(h.PeakSample/32767)*20*10)|0,h.noclipGainChange>0&&(EQ(c.scale,1)||EQ(c.scale,0))?h.noclipScale=Math.floor(32767/h.PeakSample*100)/100:h.noclipScale=-1)}},this.add_dummy_byte=function(c,h,u){for(var g=c.internal_flags,j;u-- >0;)for(q(g,h,8),j=0;j<b.MAX_HEADER_BUF;++j)g.header[j].write_timing+=8},this.format_bitstream=function(c){var h=c.internal_flags,u;u=h.l3_side;var g=this.getframebits(c);ee(c,u.resvDrain_pre),m(c,g);var j=8*h.sideinfo_len;if(j+=Y(c),ee(c,u.resvDrain_post),j+=u.resvDrain_post,u.main_data_begin+=(g-j)/8,L(c,new D)!=h.ResvSize&&t.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),u.main_data_begin*8!=h.ResvSize&&(t.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*u.main_data_begin,h.ResvSize,u.resvDrain_post,u.resvDrain_pre,8*h.sideinfo_len,j-u.resvDrain_post-8*h.sideinfo_len,j,j%8,g),t.err.println("This is a fatal error.  It has several possible causes:"),t.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),t.err.println(" 9%%  Your system is overclocked"),t.err.println(" 1%%  bug in LAME encoding library"),h.ResvSize=u.main_data_begin*8),r(o%8==0),o>1e9){var ne;for(ne=0;ne<b.MAX_HEADER_BUF;++ne)h.header[ne].write_timing-=o;o=0}return 0},this.copy_buffer=function(c,h,u,g,j){var ne=y+1;if(ne<=0)return 0;if(g!=0&&ne>g)return-1;if(t.arraycopy(R,0,h,u,ne),y=-1,O=0,j!=0){var J=d(1);if(J[0]=c.nMusicCRC,k.updateMusicCRC(J,h,u,ne),c.nMusicCRC=J[0],ne>0&&(c.VBR_seek_table.nBytesWritten+=ne),c.decode_on_the_fly){for(var U=s([2,1152]),de=ne,ve=-1,_e;ve!=0;)if(ve=_.hip_decode1_unclipped(c.hip,h,u,de,U[0],U[1]),de=0,ve==-1&&(ve=0),ve>0){if(r(ve<=1152),c.findPeakSample){for(_e=0;_e<ve;_e++)U[0][_e]>c.PeakSample?c.PeakSample=U[0][_e]:-U[0][_e]>c.PeakSample&&(c.PeakSample=-U[0][_e]);if(c.channels_out>1)for(_e=0;_e<ve;_e++)U[1][_e]>c.PeakSample?c.PeakSample=U[1][_e]:-U[1][_e]>c.PeakSample&&(c.PeakSample=-U[1][_e])}if(c.findReplayGain&&$.AnalyzeSamples(c.rgdata,U[0],0,U[1],0,ve,c.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return ne},this.init_bit_stream_w=function(c){R=a(B.LAME_MAXMP3BUFFER),c.h_ptr=c.w_ptr=0,c.header[c.h_ptr].write_timing=0,y=-1,O=0,o=0}}return Ys=p,Ys}var Gs,Rr;function Ho(){if(Rr)return Gs;Rr=1;var e=pt,t=e.System,i=e.VbrMode;e.Float;var a=e.ShortBlock;e.Util,e.Arrays,e.new_array_n,e.new_byte,e.new_double;var s=e.new_float;e.new_float_n,e.new_int;var d=e.new_int_n,r=e.new_short_n,f=e.assert,E=kd,F=Id,b=ms,p=Qd,B=Jd,te=ou,H=Vo(),n=Fo,$=Lt();function _(){var C=Qn,k=this,R=128*1024;_.V9=410,_.V8=420,_.V7=430,_.V6=440,_.V5=450,_.V4=460,_.V3=470,_.V2=480,_.V1=490,_.V0=500,_.R3MIX=1e3,_.STANDARD=1001,_.EXTREME=1002,_.INSANE=1003,_.STANDARD_FAST=1004,_.EXTREME_FAST=1005,_.MEDIUM=1006,_.MEDIUM_FAST=1007;var o=16384+R;_.LAME_MAXMP3BUFFER=o;var y,O,x,z,q,ee=new E,ae,I,m;this.enc=new $,this.setModules=function(v,S,Me,Be,je,Ke,Oe,De,Ye){y=v,O=S,x=Me,z=Be,q=je,ae=Ke,I=De,m=Ye,this.enc.setModules(O,ee,z,ae)};function N(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=s($.SBMAX_l),this.bo_s_weight=s($.SBMAX_s)}function K(){this.lowerlimit=0}function W(v,S){this.lowpass=S}var X=4294479419;function Y(v){var S;return v.class_id=X,S=v.internal_flags=new b,v.mode=C.NOT_SET,v.original=1,v.in_samplerate=44100,v.num_channels=2,v.num_samples=-1,v.bWriteVbrTag=!0,v.quality=-1,v.short_blocks=null,S.subblock_gain=-1,v.lowpassfreq=0,v.highpassfreq=0,v.lowpasswidth=-1,v.highpasswidth=-1,v.VBR=i.vbr_off,v.VBR_q=4,v.ATHcurve=-1,v.VBR_mean_bitrate_kbps=128,v.VBR_min_bitrate_kbps=0,v.VBR_max_bitrate_kbps=0,v.VBR_hard_min=0,S.VBR_min_bitrate=1,S.VBR_max_bitrate=13,v.quant_comp=-1,v.quant_comp_short=-1,v.msfix=-1,S.resample_ratio=1,S.OldValue[0]=180,S.OldValue[1]=180,S.CurrentStep[0]=4,S.CurrentStep[1]=4,S.masking_lower=1,S.nsPsy.attackthre=-1,S.nsPsy.attackthre_s=-1,v.scale=-1,v.athaa_type=-1,v.ATHtype=-1,v.athaa_loudapprox=-1,v.athaa_sensitivity=0,v.useTemporal=null,v.interChRatio=-1,S.mf_samples_to_encode=$.ENCDELAY+$.POSTDELAY,v.encoder_padding=0,S.mf_size=$.ENCDELAY-$.MDCTDELAY,v.findReplayGain=!1,v.decode_on_the_fly=!1,S.decode_on_the_fly=!1,S.findReplayGain=!1,S.findPeakSample=!1,S.RadioGain=0,S.AudiophileGain=0,S.noclipGainChange=0,S.noclipScale=-1,v.preset=0,v.write_id3tag_automatic=!0,0}this.lame_init=function(){var v=new F;return Y(v),v.lame_allocated_gfp=1,v};function D(v){return v>1?0:v<=0?1:Math.cos(Math.PI/2*v)}this.nearestBitrateFullIndex=function(v){var S=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],Me=0,Be=0,je=0,Ke=0;Ke=S[16],je=16,Be=S[16],Me=16;for(var Oe=0;Oe<16;Oe++)if(Math.max(v,S[Oe+1])!=v){Ke=S[Oe+1],je=Oe+1,Be=S[Oe],Me=Oe;break}return Ke-v>v-Be?Me:je};function L(v,S){var Me=44100;return S>=48e3?Me=48e3:S>=44100?Me=44100:S>=32e3?Me=32e3:S>=24e3?Me=24e3:S>=22050?Me=22050:S>=16e3?Me=16e3:S>=12e3?Me=12e3:S>=11025?Me=11025:S>=8e3&&(Me=8e3),v==-1?Me:(v<=15960&&(Me=44100),v<=15250&&(Me=32e3),v<=11220&&(Me=24e3),v<=9970&&(Me=22050),v<=7230&&(Me=16e3),v<=5420&&(Me=12e3),v<=4510&&(Me=11025),v<=3970&&(Me=8e3),S<Me?S>44100?48e3:S>32e3?44100:S>24e3?32e3:S>22050?24e3:S>16e3?22050:S>12e3?16e3:S>11025?12e3:S>8e3?11025:8e3:Me)}function c(v,S){switch(v){case 44100:return S.version=1,0;case 48e3:return S.version=1,1;case 32e3:return S.version=1,2;case 22050:return S.version=0,0;case 24e3:return S.version=0,1;case 16e3:return S.version=0,2;case 11025:return S.version=0,0;case 12e3:return S.version=0,1;case 8e3:return S.version=0,2;default:return S.version=0,-1}}function h(v,S,Me){Me<16e3&&(S=2);for(var Be=n.bitrate_table[S][1],je=2;je<=14;je++)n.bitrate_table[S][je]>0&&Math.abs(n.bitrate_table[S][je]-v)<Math.abs(Be-v)&&(Be=n.bitrate_table[S][je]);return Be}function u(v,S,Me){Me<16e3&&(S=2);for(var Be=0;Be<=14;Be++)if(n.bitrate_table[S][Be]>0&&n.bitrate_table[S][Be]==v)return Be;return-1}function g(v,S){var Me=[new W(8,2e3),new W(16,3700),new W(24,3900),new W(32,5500),new W(40,7e3),new W(48,7500),new W(56,1e4),new W(64,11e3),new W(80,13500),new W(96,15100),new W(112,15600),new W(128,17e3),new W(160,17500),new W(192,18600),new W(224,19400),new W(256,19700),new W(320,20500)],Be=k.nearestBitrateFullIndex(S);v.lowerlimit=Me[Be].lowpass}function j(v){var S=v.internal_flags,Me=32,Be=-1;if(S.lowpass1>0){for(var je=999,Ke=0;Ke<=31;Ke++){var Oe=Ke/31;Oe>=S.lowpass2&&(Me=Math.min(Me,Ke)),S.lowpass1<Oe&&Oe<S.lowpass2&&(je=Math.min(je,Ke))}je==999?S.lowpass1=(Me-.75)/31:S.lowpass1=(je-.75)/31,S.lowpass2=Me/31}if(S.highpass2>0&&S.highpass2<.9*(.75/31)&&(S.highpass1=0,S.highpass2=0,t.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),S.highpass2>0){for(var De=-1,Ke=0;Ke<=31;Ke++){var Oe=Ke/31;Oe<=S.highpass1&&(Be=Math.max(Be,Ke)),S.highpass1<Oe&&Oe<S.highpass2&&(De=Math.max(De,Ke))}S.highpass1=Be/31,De==-1?S.highpass2=(Be+.75)/31:S.highpass2=(De+.75)/31}for(var Ke=0;Ke<32;Ke++){var Ye,Fe,Oe=Ke/31;S.highpass2>S.highpass1?Ye=D((S.highpass2-Oe)/(S.highpass2-S.highpass1+1e-20)):Ye=1,S.lowpass2>S.lowpass1?Fe=D((Oe-S.lowpass1)/(S.lowpass2-S.lowpass1+1e-20)):Fe=1,S.amp_filter[Ke]=Ye*Fe}}function ne(v){var S=v.internal_flags;switch(v.quality){default:case 9:S.psymodel=0,S.noise_shaping=0,S.noise_shaping_amp=0,S.noise_shaping_stop=0,S.use_best_huffman=0,S.full_outer_loop=0;break;case 8:v.quality=7;case 7:S.psymodel=1,S.noise_shaping=0,S.noise_shaping_amp=0,S.noise_shaping_stop=0,S.use_best_huffman=0,S.full_outer_loop=0;break;case 6:S.psymodel=1,S.noise_shaping==0&&(S.noise_shaping=1),S.noise_shaping_amp=0,S.noise_shaping_stop=0,S.subblock_gain==-1&&(S.subblock_gain=1),S.use_best_huffman=0,S.full_outer_loop=0;break;case 5:S.psymodel=1,S.noise_shaping==0&&(S.noise_shaping=1),S.noise_shaping_amp=0,S.noise_shaping_stop=0,S.subblock_gain==-1&&(S.subblock_gain=1),S.use_best_huffman=0,S.full_outer_loop=0;break;case 4:S.psymodel=1,S.noise_shaping==0&&(S.noise_shaping=1),S.noise_shaping_amp=0,S.noise_shaping_stop=0,S.subblock_gain==-1&&(S.subblock_gain=1),S.use_best_huffman=1,S.full_outer_loop=0;break;case 3:S.psymodel=1,S.noise_shaping==0&&(S.noise_shaping=1),S.noise_shaping_amp=1,S.noise_shaping_stop=1,S.subblock_gain==-1&&(S.subblock_gain=1),S.use_best_huffman=1,S.full_outer_loop=0;break;case 2:S.psymodel=1,S.noise_shaping==0&&(S.noise_shaping=1),S.substep_shaping==0&&(S.substep_shaping=2),S.noise_shaping_amp=1,S.noise_shaping_stop=1,S.subblock_gain==-1&&(S.subblock_gain=1),S.use_best_huffman=1,S.full_outer_loop=0;break;case 1:S.psymodel=1,S.noise_shaping==0&&(S.noise_shaping=1),S.substep_shaping==0&&(S.substep_shaping=2),S.noise_shaping_amp=2,S.noise_shaping_stop=1,S.subblock_gain==-1&&(S.subblock_gain=1),S.use_best_huffman=1,S.full_outer_loop=0;break;case 0:S.psymodel=1,S.noise_shaping==0&&(S.noise_shaping=1),S.substep_shaping==0&&(S.substep_shaping=2),S.noise_shaping_amp=2,S.noise_shaping_stop=1,S.subblock_gain==-1&&(S.subblock_gain=1),S.use_best_huffman=1,S.full_outer_loop=0;break}}function J(v){var S=v.internal_flags;v.frameNum=0,v.write_id3tag_automatic&&I.id3tag_write_v2(v),S.bitrate_stereoMode_Hist=d([16,4+1]),S.bitrate_blockType_Hist=d([16,4+1+1]),S.PeakSample=0,v.bWriteVbrTag&&ae.InitVbrTag(v)}this.lame_init_params=function(v){var S=v.internal_flags;if(S.Class_ID=0,S.ATH==null&&(S.ATH=new p),S.PSY==null&&(S.PSY=new N),S.rgdata==null&&(S.rgdata=new B),S.channels_in=v.num_channels,S.channels_in==1&&(v.mode=C.MONO),S.channels_out=v.mode==C.MONO?1:2,S.mode_ext=$.MPG_MD_MS_LR,v.mode==C.MONO&&(v.force_ms=!1),v.VBR==i.vbr_off&&v.VBR_mean_bitrate_kbps!=128&&v.brate==0&&(v.brate=v.VBR_mean_bitrate_kbps),v.VBR==i.vbr_off||v.VBR==i.vbr_mtrh||v.VBR==i.vbr_mt||(v.free_format=!1),v.VBR==i.vbr_off&&v.brate==0&&H.EQ(v.compression_ratio,0)&&(v.compression_ratio=11.025),v.VBR==i.vbr_off&&v.compression_ratio>0&&(v.out_samplerate==0&&(v.out_samplerate=map2MP3Frequency(int(.97*v.in_samplerate))),v.brate=0|v.out_samplerate*16*S.channels_out/(1e3*v.compression_ratio),S.samplerate_index=c(v.out_samplerate,v),v.free_format||(v.brate=h(v.brate,v.version,v.out_samplerate))),v.out_samplerate!=0&&(v.out_samplerate<16e3?(v.VBR_mean_bitrate_kbps=Math.max(v.VBR_mean_bitrate_kbps,8),v.VBR_mean_bitrate_kbps=Math.min(v.VBR_mean_bitrate_kbps,64)):v.out_samplerate<32e3?(v.VBR_mean_bitrate_kbps=Math.max(v.VBR_mean_bitrate_kbps,8),v.VBR_mean_bitrate_kbps=Math.min(v.VBR_mean_bitrate_kbps,160)):(v.VBR_mean_bitrate_kbps=Math.max(v.VBR_mean_bitrate_kbps,32),v.VBR_mean_bitrate_kbps=Math.min(v.VBR_mean_bitrate_kbps,320))),v.lowpassfreq==0){var Me=16e3;switch(v.VBR){case i.vbr_off:{var Be=new K;g(Be,v.brate),Me=Be.lowerlimit;break}case i.vbr_abr:{var Be=new K;g(Be,v.VBR_mean_bitrate_kbps),Me=Be.lowerlimit;break}case i.vbr_rh:{var je=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=v.VBR_q&&v.VBR_q<=9){var Ke=je[v.VBR_q],Oe=je[v.VBR_q+1],De=v.VBR_q_frac;Me=linear_int(Ke,Oe,De)}else Me=19500;break}default:{var je=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=v.VBR_q&&v.VBR_q<=9){var Ke=je[v.VBR_q],Oe=je[v.VBR_q+1],De=v.VBR_q_frac;Me=linear_int(Ke,Oe,De)}else Me=19500}}v.mode==C.MONO&&(v.VBR==i.vbr_off||v.VBR==i.vbr_abr)&&(Me*=1.5),v.lowpassfreq=Me|0}if(v.out_samplerate==0&&(2*v.lowpassfreq>v.in_samplerate&&(v.lowpassfreq=v.in_samplerate/2),v.out_samplerate=L(v.lowpassfreq|0,v.in_samplerate)),v.lowpassfreq=Math.min(20500,v.lowpassfreq),v.lowpassfreq=Math.min(v.out_samplerate/2,v.lowpassfreq),v.VBR==i.vbr_off&&(v.compression_ratio=v.out_samplerate*16*S.channels_out/(1e3*v.brate)),v.VBR==i.vbr_abr&&(v.compression_ratio=v.out_samplerate*16*S.channels_out/(1e3*v.VBR_mean_bitrate_kbps)),v.bWriteVbrTag||(v.findReplayGain=!1,v.decode_on_the_fly=!1,S.findPeakSample=!1),S.findReplayGain=v.findReplayGain,S.decode_on_the_fly=v.decode_on_the_fly,S.decode_on_the_fly&&(S.findPeakSample=!0),S.findReplayGain&&y.InitGainAnalysis(S.rgdata,v.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return v.internal_flags=null,-6;switch(S.decode_on_the_fly&&!v.decode_only&&(S.hip!=null&&m.hip_decode_exit(S.hip),S.hip=m.hip_decode_init()),S.mode_gr=v.out_samplerate<=24e3?1:2,v.framesize=576*S.mode_gr,v.encoder_delay=$.ENCDELAY,S.resample_ratio=v.in_samplerate/v.out_samplerate,v.VBR){case i.vbr_mt:case i.vbr_rh:case i.vbr_mtrh:{var Ye=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];v.compression_ratio=Ye[v.VBR_q]}break;case i.vbr_abr:v.compression_ratio=v.out_samplerate*16*S.channels_out/(1e3*v.VBR_mean_bitrate_kbps);break;default:v.compression_ratio=v.out_samplerate*16*S.channels_out/(1e3*v.brate);break}if(v.mode==C.NOT_SET&&(v.mode=C.JOINT_STEREO),v.highpassfreq>0?(S.highpass1=2*v.highpassfreq,v.highpasswidth>=0?S.highpass2=2*(v.highpassfreq+v.highpasswidth):S.highpass2=(1+0)*2*v.highpassfreq,S.highpass1/=v.out_samplerate,S.highpass2/=v.out_samplerate):(S.highpass1=0,S.highpass2=0),v.lowpassfreq>0?(S.lowpass2=2*v.lowpassfreq,v.lowpasswidth>=0?(S.lowpass1=2*(v.lowpassfreq-v.lowpasswidth),S.lowpass1<0&&(S.lowpass1=0)):S.lowpass1=(1-0)*2*v.lowpassfreq,S.lowpass1/=v.out_samplerate,S.lowpass2/=v.out_samplerate):(S.lowpass1=0,S.lowpass2=0),j(v),S.samplerate_index=c(v.out_samplerate,v),S.samplerate_index<0)return v.internal_flags=null,-1;if(v.VBR==i.vbr_off){if(v.free_format)S.bitrate_index=0;else if(v.brate=h(v.brate,v.version,v.out_samplerate),S.bitrate_index=u(v.brate,v.version,v.out_samplerate),S.bitrate_index<=0)return v.internal_flags=null,-1}else S.bitrate_index=1;v.analysis&&(v.bWriteVbrTag=!1),S.pinfo!=null&&(v.bWriteVbrTag=!1),O.init_bit_stream_w(S);for(var Fe=S.samplerate_index+3*v.version+6*(v.out_samplerate<16e3?1:0),Te=0;Te<$.SBMAX_l+1;Te++)S.scalefac_band.l[Te]=z.sfBandIndex[Fe].l[Te];for(var Te=0;Te<$.PSFB21+1;Te++){var st=(S.scalefac_band.l[22]-S.scalefac_band.l[21])/$.PSFB21,St=S.scalefac_band.l[21]+Te*st;S.scalefac_band.psfb21[Te]=St}S.scalefac_band.psfb21[$.PSFB21]=576;for(var Te=0;Te<$.SBMAX_s+1;Te++)S.scalefac_band.s[Te]=z.sfBandIndex[Fe].s[Te];for(var Te=0;Te<$.PSFB12+1;Te++){var st=(S.scalefac_band.s[13]-S.scalefac_band.s[12])/$.PSFB12,St=S.scalefac_band.s[12]+Te*st;S.scalefac_band.psfb12[Te]=St}S.scalefac_band.psfb12[$.PSFB12]=192,v.version==1?S.sideinfo_len=S.channels_out==1?4+17:4+32:S.sideinfo_len=S.channels_out==1?4+9:4+17,v.error_protection&&(S.sideinfo_len+=2),J(v),S.Class_ID=X;{var tt;for(tt=0;tt<19;tt++)S.nsPsy.pefirbuf[tt]=700*S.mode_gr*S.channels_out;v.ATHtype==-1&&(v.ATHtype=4)}switch(f(v.VBR_q<=9),f(v.VBR_q>=0),v.VBR){case i.vbr_mt:v.VBR=i.vbr_mtrh;case i.vbr_mtrh:{v.useTemporal==null&&(v.useTemporal=!1),x.apply_preset(v,500-v.VBR_q*10,0),v.quality<0&&(v.quality=LAME_DEFAULT_QUALITY),v.quality<5&&(v.quality=0),v.quality>5&&(v.quality=5),S.PSY.mask_adjust=v.maskingadjust,S.PSY.mask_adjust_short=v.maskingadjust_short,v.experimentalY?S.sfb21_extra=!1:S.sfb21_extra=v.out_samplerate>44e3,S.iteration_loop=new VBRNewIterationLoop(q);break}case i.vbr_rh:{x.apply_preset(v,500-v.VBR_q*10,0),S.PSY.mask_adjust=v.maskingadjust,S.PSY.mask_adjust_short=v.maskingadjust_short,v.experimentalY?S.sfb21_extra=!1:S.sfb21_extra=v.out_samplerate>44e3,v.quality>6&&(v.quality=6),v.quality<0&&(v.quality=LAME_DEFAULT_QUALITY),S.iteration_loop=new VBROldIterationLoop(q);break}default:{var A;S.sfb21_extra=!1,v.quality<0&&(v.quality=LAME_DEFAULT_QUALITY),A=v.VBR,A==i.vbr_off&&(v.VBR_mean_bitrate_kbps=v.brate),x.apply_preset(v,v.VBR_mean_bitrate_kbps,0),v.VBR=A,S.PSY.mask_adjust=v.maskingadjust,S.PSY.mask_adjust_short=v.maskingadjust_short,A==i.vbr_off?S.iteration_loop=new te(q):S.iteration_loop=new ABRIterationLoop(q);break}}if(f(v.scale>=0),v.VBR!=i.vbr_off){if(S.VBR_min_bitrate=1,S.VBR_max_bitrate=14,v.out_samplerate<16e3&&(S.VBR_max_bitrate=8),v.VBR_min_bitrate_kbps!=0&&(v.VBR_min_bitrate_kbps=h(v.VBR_min_bitrate_kbps,v.version,v.out_samplerate),S.VBR_min_bitrate=u(v.VBR_min_bitrate_kbps,v.version,v.out_samplerate),S.VBR_min_bitrate<0)||v.VBR_max_bitrate_kbps!=0&&(v.VBR_max_bitrate_kbps=h(v.VBR_max_bitrate_kbps,v.version,v.out_samplerate),S.VBR_max_bitrate=u(v.VBR_max_bitrate_kbps,v.version,v.out_samplerate),S.VBR_max_bitrate<0))return-1;v.VBR_min_bitrate_kbps=n.bitrate_table[v.version][S.VBR_min_bitrate],v.VBR_max_bitrate_kbps=n.bitrate_table[v.version][S.VBR_max_bitrate],v.VBR_mean_bitrate_kbps=Math.min(n.bitrate_table[v.version][S.VBR_max_bitrate],v.VBR_mean_bitrate_kbps),v.VBR_mean_bitrate_kbps=Math.max(n.bitrate_table[v.version][S.VBR_min_bitrate],v.VBR_mean_bitrate_kbps)}return v.tune&&(S.PSY.mask_adjust+=v.tune_value_a,S.PSY.mask_adjust_short+=v.tune_value_a),ne(v),f(v.scale>=0),v.athaa_type<0?S.ATH.useAdjust=3:S.ATH.useAdjust=v.athaa_type,S.ATH.aaSensitivityP=Math.pow(10,v.athaa_sensitivity/-10),v.short_blocks==null&&(v.short_blocks=a.short_block_allowed),v.short_blocks==a.short_block_allowed&&(v.mode==C.JOINT_STEREO||v.mode==C.STEREO)&&(v.short_blocks=a.short_block_coupled),v.quant_comp<0&&(v.quant_comp=1),v.quant_comp_short<0&&(v.quant_comp_short=0),v.msfix<0&&(v.msfix=0),v.exp_nspsytune=v.exp_nspsytune|1,v.internal_flags.nsPsy.attackthre<0&&(v.internal_flags.nsPsy.attackthre=E.NSATTACKTHRE),v.internal_flags.nsPsy.attackthre_s<0&&(v.internal_flags.nsPsy.attackthre_s=E.NSATTACKTHRE_S),f(v.scale>=0),v.scale<0&&(v.scale=1),v.ATHtype<0&&(v.ATHtype=4),v.ATHcurve<0&&(v.ATHcurve=4),v.athaa_loudapprox<0&&(v.athaa_loudapprox=2),v.interChRatio<0&&(v.interChRatio=0),v.useTemporal==null&&(v.useTemporal=!0),S.slot_lag=S.frac_SpF=0,v.VBR==i.vbr_off&&(S.slot_lag=S.frac_SpF=(v.version+1)*72e3*v.brate%v.out_samplerate|0),z.iteration_init(v),ee.psymodel_init(v),f(v.scale>=0),0};function U(v,S){(v.in_buffer_0==null||v.in_buffer_nsamples<S)&&(v.in_buffer_0=s(S),v.in_buffer_1=s(S),v.in_buffer_nsamples=S)}this.lame_encode_flush=function(v,S,Me,Be){var je=v.internal_flags,Ke=r([2,1152]),Oe=0,De,Ye,Fe,Te,st=je.mf_samples_to_encode-$.POSTDELAY,St=de(v);if(je.mf_samples_to_encode<1)return 0;for(De=0,v.in_samplerate!=v.out_samplerate&&(st+=16*v.out_samplerate/v.in_samplerate),Fe=v.framesize-st%v.framesize,Fe<576&&(Fe+=v.framesize),v.encoder_padding=Fe,Te=(st+Fe)/v.framesize;Te>0&&Oe>=0;){var tt=St-je.mf_size,A=v.frameNum;tt*=v.in_samplerate,tt/=v.out_samplerate,tt>1152&&(tt=1152),tt<1&&(tt=1),Ye=Be-De,Be==0&&(Ye=0),Oe=this.lame_encode_buffer(v,Ke[0],Ke[1],tt,S,Me,Ye),Me+=Oe,De+=Oe,Te-=A!=v.frameNum?1:0}if(je.mf_samples_to_encode=0,Oe<0||(Ye=Be-De,Be==0&&(Ye=0),O.flush_bitstream(v),Oe=O.copy_buffer(je,S,Me,Ye,1),Oe<0))return Oe;if(Me+=Oe,De+=Oe,Ye=Be-De,Be==0&&(Ye=0),v.write_id3tag_automatic){if(I.id3tag_write_v1(v),Oe=O.copy_buffer(je,S,Me,Ye,0),Oe<0)return Oe;De+=Oe}return De},this.lame_encode_buffer=function(v,S,Me,Be,je,Ke,Oe){var De=v.internal_flags,Ye=[null,null];if(De.Class_ID!=X)return-3;if(Be==0)return 0;U(De,Be),Ye[0]=De.in_buffer_0,Ye[1]=De.in_buffer_1;for(var Fe=0;Fe<Be;Fe++)Ye[0][Fe]=S[Fe],De.channels_in>1&&(Ye[1][Fe]=Me[Fe]);return ve(v,Ye[0],Ye[1],Be,je,Ke,Oe)};function de(v){var S=$.BLKSIZE+v.framesize-$.FFTOFFSET;return S=Math.max(S,512+v.framesize-32),f(b.MFSIZE>=S),S}function ve(v,S,Me,Be,je,Ke,Oe){var De=v.internal_flags,Ye=0,Fe,Te,st,St,tt,A=[null,null],M=[null,null];if(De.Class_ID!=X)return-3;if(Be==0)return 0;if(tt=O.copy_buffer(De,je,Ke,Oe,0),tt<0)return tt;if(Ke+=tt,Ye+=tt,M[0]=S,M[1]=Me,H.NEQ(v.scale,0)&&H.NEQ(v.scale,1))for(Te=0;Te<Be;++Te)M[0][Te]*=v.scale,De.channels_out==2&&(M[1][Te]*=v.scale);if(H.NEQ(v.scale_left,0)&&H.NEQ(v.scale_left,1))for(Te=0;Te<Be;++Te)M[0][Te]*=v.scale_left;if(H.NEQ(v.scale_right,0)&&H.NEQ(v.scale_right,1))for(Te=0;Te<Be;++Te)M[1][Te]*=v.scale_right;if(v.num_channels==2&&De.channels_out==1)for(Te=0;Te<Be;++Te)M[0][Te]=.5*(M[0][Te]+M[1][Te]),M[1][Te]=0;St=de(v),A[0]=De.mfbuf[0],A[1]=De.mfbuf[1];for(var V=0;Be>0;){var G=[null,null],oe=0,P=0;G[0]=M[0],G[1]=M[1];var ie=new Le;if(Ot(v,A,G,V,Be,ie),oe=ie.n_in,P=ie.n_out,De.findReplayGain&&!De.decode_on_the_fly&&y.AnalyzeSamples(De.rgdata,A[0],De.mf_size,A[1],De.mf_size,P,De.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(Be-=oe,V+=oe,De.channels_out==2,De.mf_size+=P,f(De.mf_size<=b.MFSIZE),De.mf_samples_to_encode<1&&(De.mf_samples_to_encode=$.ENCDELAY+$.POSTDELAY),De.mf_samples_to_encode+=P,De.mf_size>=St){var re=Oe-Ye;if(Oe==0&&(re=0),Fe=_e(v,A[0],A[1],je,Ke,re),Fe<0)return Fe;for(Ke+=Fe,Ye+=Fe,De.mf_size-=v.framesize,De.mf_samples_to_encode-=v.framesize,st=0;st<De.channels_out;st++)for(Te=0;Te<De.mf_size;Te++)A[st][Te]=A[st][Te+v.framesize]}}return f(Be==0),Ye}function _e(v,S,Me,Be,je,Ke){var Oe=k.enc.lame_encode_mp3_frame(v,S,Me,Be,je,Ke);return v.frameNum++,Oe}function Le(){this.n_in=0,this.n_out=0}function Se(){this.num_used=0}function Ce(v,S){return S!=0?Ce(S,v%S):v}function Pe(v,S,Me){var Be=Math.PI*S;v/=Me,v<0&&(v=0),v>1&&(v=1);var je=v-.5,Ke=.42-.5*Math.cos(2*v*Math.PI)+.08*Math.cos(4*v*Math.PI);return Math.abs(je)<1e-9?Be/Math.PI:Ke*Math.sin(Me*Be*je)/(Math.PI*Me*je)}function et(v,S,Me,Be,je,Ke,Oe,De,Ye){var Fe=v.internal_flags,Te,st=0,St,tt=v.out_samplerate/Ce(v.out_samplerate,v.in_samplerate);tt>b.BPC&&(tt=b.BPC);var A=Math.abs(Fe.resample_ratio-Math.floor(.5+Fe.resample_ratio))<1e-4?1:0,M=1/Fe.resample_ratio;M>1&&(M=1);var V=31;V%2==0&&--V,V+=A;var G=V+1;if(Fe.fill_buffer_resample_init==0){for(Fe.inbuf_old[0]=s(G),Fe.inbuf_old[1]=s(G),Te=0;Te<=2*tt;++Te)Fe.blackfilt[Te]=s(G);for(Fe.itime[0]=0,Fe.itime[1]=0,st=0;st<=2*tt;st++){var oe=0,P=(st-tt)/(2*tt);for(Te=0;Te<=V;Te++)oe+=Fe.blackfilt[st][Te]=Pe(Te-P,M,V);for(Te=0;Te<=V;Te++)Fe.blackfilt[st][Te]/=oe}Fe.fill_buffer_resample_init=1}var ie=Fe.inbuf_old[Ye];for(St=0;St<Be;St++){var re,se;if(re=St*Fe.resample_ratio,st=0|Math.floor(re-Fe.itime[Ye]),V+st-V/2>=Oe)break;var P=re-Fe.itime[Ye]-(st+.5*(V%2));f(Math.abs(P)<=.501),se=0|Math.floor(P*2*tt+tt+.5);var ce=0;for(Te=0;Te<=V;++Te){var le=0|Te+st-V/2,he;f(le<Oe),f(le+G>=0),he=le<0?ie[G+le]:je[Ke+le],ce+=he*Fe.blackfilt[se][Te]}S[Me+St]=ce}if(De.num_used=Math.min(Oe,V+st-V/2),Fe.itime[Ye]+=De.num_used-St*Fe.resample_ratio,De.num_used>=G)for(Te=0;Te<G;Te++)ie[Te]=je[Ke+De.num_used+Te-G];else{var Ee=G-De.num_used;for(Te=0;Te<Ee;++Te)ie[Te]=ie[Te+De.num_used];for(st=0;Te<G;++Te,++st)ie[Te]=je[Ke+st];f(st==De.num_used)}return St}function Ot(v,S,Me,Be,je,Ke){var Oe=v.internal_flags;if(Oe.resample_ratio<.9999||Oe.resample_ratio>1.0001)for(var De=0;De<Oe.channels_out;De++){var Ye=new Se;Ke.n_out=et(v,S[De],Oe.mf_size,v.framesize,Me[De],Be,je,Ye,De),Ke.n_in=Ye.num_used}else{Ke.n_out=Math.min(v.framesize,je),Ke.n_in=Ke.n_out;for(var Fe=0;Fe<Ke.n_out;++Fe)S[0][Oe.mf_size+Fe]=Me[0][Be+Fe],Oe.channels_out==2&&(S[1][Oe.mf_size+Fe]=Me[1][Be+Fe])}}}return Gs=_,Gs}var ti=pt;ti.System;var Bi=ti.VbrMode;ti.Float;ti.ShortBlock;ti.Util;ti.Arrays;ti.new_array_n;ti.new_byte;ti.new_double;ti.new_float;ti.new_float_n;ti.new_int;ti.new_int_n;ti.assert;function ru(){var e=Ho();function t(b,p,B,te,H,n,$,_,C,k,R,o,y,O,x){this.vbr_q=b,this.quant_comp=p,this.quant_comp_s=B,this.expY=te,this.st_lrm=H,this.st_s=n,this.masking_adj=$,this.masking_adj_short=_,this.ath_lower=C,this.ath_curve=k,this.ath_sensitivity=R,this.interch=o,this.safejoint=y,this.sfb21mod=O,this.msfix=x}function i(b,p,B,te,H,n,$,_,C,k,R,o,y,O){this.quant_comp=p,this.quant_comp_s=B,this.safejoint=te,this.nsmsfix=H,this.st_lrm=n,this.st_s=$,this.nsbass=_,this.scale=C,this.masking_adj=k,this.ath_lower=R,this.ath_curve=o,this.interch=y,this.sfscale=O}var a;this.setModules=function(b){a=b};var s=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],d=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function r(b,p,B){var te=b.VBR==Bi.vbr_rh?s:d,H=b.VBR_q_frac,n=te[p],$=te[p+1],_=n;n.st_lrm=n.st_lrm+H*($.st_lrm-n.st_lrm),n.st_s=n.st_s+H*($.st_s-n.st_s),n.masking_adj=n.masking_adj+H*($.masking_adj-n.masking_adj),n.masking_adj_short=n.masking_adj_short+H*($.masking_adj_short-n.masking_adj_short),n.ath_lower=n.ath_lower+H*($.ath_lower-n.ath_lower),n.ath_curve=n.ath_curve+H*($.ath_curve-n.ath_curve),n.ath_sensitivity=n.ath_sensitivity+H*($.ath_sensitivity-n.ath_sensitivity),n.interch=n.interch+H*($.interch-n.interch),n.msfix=n.msfix+H*($.msfix-n.msfix),F(b,_.vbr_q),B!=0?b.quant_comp=_.quant_comp:Math.abs(b.quant_comp- -1)>0||(b.quant_comp=_.quant_comp),B!=0?b.quant_comp_short=_.quant_comp_s:Math.abs(b.quant_comp_short- -1)>0||(b.quant_comp_short=_.quant_comp_s),_.expY!=0&&(b.experimentalY=_.expY!=0),B!=0?b.internal_flags.nsPsy.attackthre=_.st_lrm:Math.abs(b.internal_flags.nsPsy.attackthre- -1)>0||(b.internal_flags.nsPsy.attackthre=_.st_lrm),B!=0?b.internal_flags.nsPsy.attackthre_s=_.st_s:Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)>0||(b.internal_flags.nsPsy.attackthre_s=_.st_s),B!=0?b.maskingadjust=_.masking_adj:Math.abs(b.maskingadjust-0)>0||(b.maskingadjust=_.masking_adj),B!=0?b.maskingadjust_short=_.masking_adj_short:Math.abs(b.maskingadjust_short-0)>0||(b.maskingadjust_short=_.masking_adj_short),B!=0?b.ATHlower=-_.ath_lower/10:Math.abs(-b.ATHlower*10-0)>0||(b.ATHlower=-_.ath_lower/10),B!=0?b.ATHcurve=_.ath_curve:Math.abs(b.ATHcurve- -1)>0||(b.ATHcurve=_.ath_curve),B!=0?b.athaa_sensitivity=_.ath_sensitivity:Math.abs(b.athaa_sensitivity- -1)>0||(b.athaa_sensitivity=_.ath_sensitivity),_.interch>0&&(B!=0?b.interChRatio=_.interch:Math.abs(b.interChRatio- -1)>0||(b.interChRatio=_.interch)),_.safejoint>0&&(b.exp_nspsytune=b.exp_nspsytune|_.safejoint),_.sfb21mod>0&&(b.exp_nspsytune=b.exp_nspsytune|_.sfb21mod<<20),B!=0?b.msfix=_.msfix:Math.abs(b.msfix- -1)>0||(b.msfix=_.msfix),B==0&&(b.VBR_q=p,b.VBR_q_frac=H)}var f=[new i(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new i(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new i(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new i(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new i(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new i(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new i(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new i(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new i(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new i(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new i(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new i(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new i(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new i(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new i(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new i(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new i(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function E(b,p,B){var te=p,H=a.nearestBitrateFullIndex(p);if(b.VBR=Bi.vbr_abr,b.VBR_mean_bitrate_kbps=te,b.VBR_mean_bitrate_kbps=Math.min(b.VBR_mean_bitrate_kbps,320),b.VBR_mean_bitrate_kbps=Math.max(b.VBR_mean_bitrate_kbps,8),b.brate=b.VBR_mean_bitrate_kbps,b.VBR_mean_bitrate_kbps>320&&(b.disable_reservoir=!0),f[H].safejoint>0&&(b.exp_nspsytune=b.exp_nspsytune|2),f[H].sfscale>0&&(b.internal_flags.noise_shaping=2),Math.abs(f[H].nsbass)>0){var n=int(f[H].nsbass*4);n<0&&(n+=64),b.exp_nspsytune=b.exp_nspsytune|n<<2}return B!=0?b.quant_comp=f[H].quant_comp:Math.abs(b.quant_comp- -1)>0||(b.quant_comp=f[H].quant_comp),B!=0?b.quant_comp_short=f[H].quant_comp_s:Math.abs(b.quant_comp_short- -1)>0||(b.quant_comp_short=f[H].quant_comp_s),B!=0?b.msfix=f[H].nsmsfix:Math.abs(b.msfix- -1)>0||(b.msfix=f[H].nsmsfix),B!=0?b.internal_flags.nsPsy.attackthre=f[H].st_lrm:Math.abs(b.internal_flags.nsPsy.attackthre- -1)>0||(b.internal_flags.nsPsy.attackthre=f[H].st_lrm),B!=0?b.internal_flags.nsPsy.attackthre_s=f[H].st_s:Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)>0||(b.internal_flags.nsPsy.attackthre_s=f[H].st_s),B!=0?b.scale=f[H].scale:Math.abs(b.scale- -1)>0||(b.scale=f[H].scale),B!=0?b.maskingadjust=f[H].masking_adj:Math.abs(b.maskingadjust-0)>0||(b.maskingadjust=f[H].masking_adj),f[H].masking_adj>0?B!=0?b.maskingadjust_short=f[H].masking_adj*.9:Math.abs(b.maskingadjust_short-0)>0||(b.maskingadjust_short=f[H].masking_adj*.9):B!=0?b.maskingadjust_short=f[H].masking_adj*1.1:Math.abs(b.maskingadjust_short-0)>0||(b.maskingadjust_short=f[H].masking_adj*1.1),B!=0?b.ATHlower=-f[H].ath_lower/10:Math.abs(-b.ATHlower*10-0)>0||(b.ATHlower=-f[H].ath_lower/10),B!=0?b.ATHcurve=f[H].ath_curve:Math.abs(b.ATHcurve- -1)>0||(b.ATHcurve=f[H].ath_curve),B!=0?b.interChRatio=f[H].interch:Math.abs(b.interChRatio- -1)>0||(b.interChRatio=f[H].interch),p}this.apply_preset=function(b,p,B){switch(p){case e.R3MIX:{p=e.V3,b.VBR=Bi.vbr_mtrh;break}case e.MEDIUM:{p=e.V4,b.VBR=Bi.vbr_rh;break}case e.MEDIUM_FAST:{p=e.V4,b.VBR=Bi.vbr_mtrh;break}case e.STANDARD:{p=e.V2,b.VBR=Bi.vbr_rh;break}case e.STANDARD_FAST:{p=e.V2,b.VBR=Bi.vbr_mtrh;break}case e.EXTREME:{p=e.V0,b.VBR=Bi.vbr_rh;break}case e.EXTREME_FAST:{p=e.V0,b.VBR=Bi.vbr_mtrh;break}case e.INSANE:return p=320,b.preset=p,E(b,p,B),b.VBR=Bi.vbr_off,p}switch(b.preset=p,p){case e.V9:return r(b,9,B),p;case e.V8:return r(b,8,B),p;case e.V7:return r(b,7,B),p;case e.V6:return r(b,6,B),p;case e.V5:return r(b,5,B),p;case e.V4:return r(b,4,B),p;case e.V3:return r(b,3,B),p;case e.V2:return r(b,2,B),p;case e.V1:return r(b,1,B),p;case e.V0:return r(b,0,B),p}return 8<=p&&p<=320?E(b,p,B):(b.preset=0,p)};function F(b,p){var B=0;return 0>p&&(B=-1,p=0),9<p&&(B=-1,p=9),b.VBR_q=p,b.VBR_q_frac=0,B}}var lu=ru;function du(){this.setModules=function(e,t){}}var uu=du;function fu(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var cu=fu,qo=pt,Br=qo.new_float,hu=qo.new_int;qo.assert;function mu(){this.global_gain=0,this.sfb_count1=0,this.step=hu(39),this.noise=Br(39),this.noise_log=Br(39)}var vu=mu,ii=pt,zi=ii.System,$r=ii.VbrMode;ii.Float;ii.ShortBlock;var xs=ii.Util,gn=ii.Arrays;ii.new_array_n;ii.new_byte;ii.new_double;var Ln=ii.new_float;ii.new_float_n;ii.new_int;ii.new_int_n;var bi=ii.assert,pu=uu,Ws=cu,bu=vu,nt=Lt(),Dr=Po,Lr=hs;function gu(){var e;this.rv=null;var t;this.qupvt=null;var i,a=new pu,s;this.setModules=function(_,C,k,R){e=_,t=C,this.rv=C,i=k,this.qupvt=k,s=R,a.setModules(i,s)},this.ms_convert=function(_,C){for(var k=0;k<576;++k){var R=_.tt[C][0].xr[k],o=_.tt[C][1].xr[k];_.tt[C][0].xr[k]=(R+o)*(xs.SQRT2*.5),_.tt[C][1].xr[k]=(R-o)*(xs.SQRT2*.5)}};function d(_,C,k,R){R=0;for(var o=0;o<=k;++o){var y=Math.abs(_.xr[o]);R+=y,C[o]=Math.sqrt(y*Math.sqrt(y)),C[o]>_.xrpow_max&&(_.xrpow_max=C[o])}return R}this.init_xrpow=function(_,C,k){var R=0,o=0|C.max_nonzero_coeff;if(bi(k!=null),C.xrpow_max=0,bi(0<=o&&o<=575),gn.fill(k,o,576,0),R=d(C,k,o,R),R>1e-20){var y=0;_.substep_shaping&2&&(y=1);for(var O=0;O<C.psymax;O++)_.pseudohalf[O]=y;return!0}return gn.fill(C.l3_enc,0,576,0),!1};function r(_,C){var k=_.ATH,R=C.xr;if(C.block_type!=nt.SHORT_TYPE)for(var o=!1,y=nt.PSFB21-1;y>=0&&!o;y--){var O=_.scalefac_band.psfb21[y],x=_.scalefac_band.psfb21[y+1],z=i.athAdjust(k.adjust,k.psfb21[y],k.floor);_.nsPsy.longfact[21]>1e-12&&(z*=_.nsPsy.longfact[21]);for(var q=x-1;q>=O;q--)if(Math.abs(R[q])<z)R[q]=0;else{o=!0;break}}else for(var ee=0;ee<3;ee++)for(var o=!1,y=nt.PSFB12-1;y>=0&&!o;y--){var O=_.scalefac_band.s[12]*3+(_.scalefac_band.s[13]-_.scalefac_band.s[12])*ee+(_.scalefac_band.psfb12[y]-_.scalefac_band.psfb12[0]),x=O+(_.scalefac_band.psfb12[y+1]-_.scalefac_band.psfb12[y]),ae=i.athAdjust(k.adjust,k.psfb12[y],k.floor);_.nsPsy.shortfact[12]>1e-12&&(ae*=_.nsPsy.shortfact[12]);for(var q=x-1;q>=O;q--)if(Math.abs(R[q])<ae)R[q]=0;else{o=!0;break}}}this.init_outer_loop=function(_,C){C.part2_3_length=0,C.big_values=0,C.count1=0,C.global_gain=210,C.scalefac_compress=0,C.table_select[0]=0,C.table_select[1]=0,C.table_select[2]=0,C.subblock_gain[0]=0,C.subblock_gain[1]=0,C.subblock_gain[2]=0,C.subblock_gain[3]=0,C.region0_count=0,C.region1_count=0,C.preflag=0,C.scalefac_scale=0,C.count1table_select=0,C.part2_length=0,C.sfb_lmax=nt.SBPSY_l,C.sfb_smin=nt.SBPSY_s,C.psy_lmax=_.sfb21_extra?nt.SBMAX_l:nt.SBPSY_l,C.psymax=C.psy_lmax,C.sfbmax=C.sfb_lmax,C.sfbdivide=11;for(var k=0;k<nt.SBMAX_l;k++)C.width[k]=_.scalefac_band.l[k+1]-_.scalefac_band.l[k],C.window[k]=3;if(C.block_type==nt.SHORT_TYPE){var R=Ln(576);C.sfb_smin=0,C.sfb_lmax=0,C.mixed_block_flag!=0&&(C.sfb_smin=3,C.sfb_lmax=_.mode_gr*2+4),C.psymax=C.sfb_lmax+3*((_.sfb21_extra?nt.SBMAX_s:nt.SBPSY_s)-C.sfb_smin),C.sfbmax=C.sfb_lmax+3*(nt.SBPSY_s-C.sfb_smin),C.sfbdivide=C.sfbmax-18,C.psy_lmax=C.sfb_lmax;var o=_.scalefac_band.l[C.sfb_lmax];zi.arraycopy(C.xr,0,R,0,576);for(var k=C.sfb_smin;k<nt.SBMAX_s;k++)for(var y=_.scalefac_band.s[k],O=_.scalefac_band.s[k+1],x=0;x<3;x++)for(var z=y;z<O;z++)C.xr[o++]=R[3*z+x];for(var q=C.sfb_lmax,k=C.sfb_smin;k<nt.SBMAX_s;k++)C.width[q]=C.width[q+1]=C.width[q+2]=_.scalefac_band.s[k+1]-_.scalefac_band.s[k],C.window[q]=0,C.window[q+1]=1,C.window[q+2]=2,q+=3}C.count1bits=0,C.sfb_partition_table=i.nr_of_sfb_block[0][0],C.slen[0]=0,C.slen[1]=0,C.slen[2]=0,C.slen[3]=0,C.max_nonzero_coeff=575,gn.fill(C.scalefac,0),r(_,C)};function f(_){this.ordinal=_}f.BINSEARCH_NONE=new f(0),f.BINSEARCH_UP=new f(1),f.BINSEARCH_DOWN=new f(2);function E(_,C,k,R,o){var y,O=_.CurrentStep[R],x=!1,z=_.OldValue[R],q=f.BINSEARCH_NONE;for(C.global_gain=z,k-=C.part2_length,bi(O!=0);;){var ee;if(y=s.count_bits(_,o,C,null),O==1||y==k)break;y>k?(q==f.BINSEARCH_DOWN&&(x=!0),x&&(O/=2),q=f.BINSEARCH_UP,ee=O):(q==f.BINSEARCH_UP&&(x=!0),x&&(O/=2),q=f.BINSEARCH_DOWN,ee=-O),C.global_gain+=ee,C.global_gain<0&&(C.global_gain=0,x=!0),C.global_gain>255&&(C.global_gain=255,x=!0)}for(bi(C.global_gain>=0),bi(C.global_gain<256);y>k&&C.global_gain<255;)C.global_gain++,y=s.count_bits(_,o,C,null);return _.CurrentStep[R]=z-C.global_gain>=4?4:2,_.OldValue[R]=C.global_gain,C.part2_3_length=y,y}this.trancate_smallspectrums=function(_,C,k,R){var o=Ln(Lr.SFBMAX);if(!(!(_.substep_shaping&4)&&C.block_type==nt.SHORT_TYPE||_.substep_shaping&128)){i.calc_noise(C,k,o,new Ws,null);for(var O=0;O<576;O++){var y=0;C.l3_enc[O]!=0&&(y=Math.abs(C.xr[O])),R[O]=y}var O=0,x=8;C.block_type==nt.SHORT_TYPE&&(x=6);do{var z,q,ee,ae,I=C.width[x];if(O+=I,!(o[x]>=1)&&(gn.sort(R,O-I,I),!BitStream.EQ(R[O-1],0))){z=(1-o[x])*k[x],q=0,ae=0;do{var m;for(ee=1;ae+ee<I&&!BitStream.NEQ(R[ae+O-I],R[ae+O+ee-I]);ee++);if(m=R[ae+O-I]*R[ae+O-I]*ee,z<m){ae!=0&&(q=R[ae+O-I-1]);break}z-=m,ae+=ee}while(ae<I);if(!BitStream.EQ(q,0))do Math.abs(C.xr[O-I])<=q&&(C.l3_enc[O-I]=0);while(--I>0)}}while(++x<C.psymax);C.part2_3_length=s.noquant_count_bits(_,C,null)}};function F(_){for(var C=0;C<_.sfbmax;C++)if(_.scalefac[C]+_.subblock_gain[_.window[C]]==0)return!1;return!0}function b(_){return xs.FAST_LOG10(.368+.632*_*_*_)}function p(_,C){for(var k=1e-37,R=0;R<C.psymax;R++)k+=b(_[R]);return Math.max(1e-20,k)}function B(_,C,k,R,o){var y;switch(_){default:case 9:{C.over_count>0?(y=k.over_SSD<=C.over_SSD,k.over_SSD==C.over_SSD&&(y=k.bits<C.bits)):y=k.max_noise<0&&k.max_noise*10+k.bits<=C.max_noise*10+C.bits;break}case 0:y=k.over_count<C.over_count||k.over_count==C.over_count&&k.over_noise<C.over_noise||k.over_count==C.over_count&&BitStream.EQ(k.over_noise,C.over_noise)&&k.tot_noise<C.tot_noise;break;case 8:k.max_noise=p(o,R);case 1:y=k.max_noise<C.max_noise;break;case 2:y=k.tot_noise<C.tot_noise;break;case 3:y=k.tot_noise<C.tot_noise&&k.max_noise<C.max_noise;break;case 4:y=k.max_noise<=0&&C.max_noise>.2||k.max_noise<=0&&C.max_noise<0&&C.max_noise>k.max_noise-.2&&k.tot_noise<C.tot_noise||k.max_noise<=0&&C.max_noise>0&&C.max_noise>k.max_noise-.2&&k.tot_noise<C.tot_noise+C.over_noise||k.max_noise>0&&C.max_noise>-.05&&C.max_noise>k.max_noise-.1&&k.tot_noise+k.over_noise<C.tot_noise+C.over_noise||k.max_noise>0&&C.max_noise>-.1&&C.max_noise>k.max_noise-.15&&k.tot_noise+k.over_noise+k.over_noise<C.tot_noise+C.over_noise+C.over_noise;break;case 5:y=k.over_noise<C.over_noise||BitStream.EQ(k.over_noise,C.over_noise)&&k.tot_noise<C.tot_noise;break;case 6:y=k.over_noise<C.over_noise||BitStream.EQ(k.over_noise,C.over_noise)&&(k.max_noise<C.max_noise||BitStream.EQ(k.max_noise,C.max_noise)&&k.tot_noise<=C.tot_noise);break;case 7:y=k.over_count<C.over_count||k.over_noise<C.over_noise;break}return C.over_count==0&&(y=y&&k.bits<C.bits),y}function te(_,C,k,R,o){var y=_.internal_flags,O;C.scalefac_scale==0?O=1.2968395546510096:O=1.6817928305074292;for(var x=0,z=0;z<C.sfbmax;z++)x<k[z]&&(x=k[z]);var q=y.noise_shaping_amp;switch(q==3&&(o?q=2:q=1),q){case 2:break;case 1:x>1?x=Math.pow(x,.5):x*=.95;break;case 0:default:x>1?x=1:x*=.95;break}for(var ee=0,z=0;z<C.sfbmax;z++){var ae=C.width[z],I;if(ee+=ae,!(k[z]<x)){if(y.substep_shaping&2&&(y.pseudohalf[z]=y.pseudohalf[z]==0?1:0,y.pseudohalf[z]==0&&y.noise_shaping_amp==2))return;for(C.scalefac[z]++,I=-ae;I<0;I++)R[ee+I]*=O,R[ee+I]>C.xrpow_max&&(C.xrpow_max=R[ee+I]);if(y.noise_shaping_amp==2)return}}}function H(_,C){for(var k=1.2968395546510096,R=0,o=0;o<_.sfbmax;o++){var y=_.width[o],O=_.scalefac[o];if(_.preflag!=0&&(O+=i.pretab[o]),R+=y,O&1){O++;for(var x=-y;x<0;x++)C[R+x]*=k,C[R+x]>_.xrpow_max&&(_.xrpow_max=C[R+x])}_.scalefac[o]=O>>1}_.preflag=0,_.scalefac_scale=1}function n(_,C,k){var R,o=C.scalefac;for(R=0;R<C.sfb_lmax;R++)if(o[R]>=16)return!0;for(var y=0;y<3;y++){var O=0,x=0;for(R=C.sfb_lmax+y;R<C.sfbdivide;R+=3)O<o[R]&&(O=o[R]);for(;R<C.sfbmax;R+=3)x<o[R]&&(x=o[R]);if(!(O<16&&x<8)){if(C.subblock_gain[y]>=7)return!0;C.subblock_gain[y]++;var z=_.scalefac_band.l[C.sfb_lmax];for(R=C.sfb_lmax+y;R<C.sfbmax;R+=3){var q,ee=C.width[R],ae=o[R];if(bi(ae>=0),ae=ae-(4>>C.scalefac_scale),ae>=0){o[R]=ae,z+=ee*3;continue}o[R]=0;{var I=210+(ae<<C.scalefac_scale+1);q=i.IPOW20(I)}z+=ee*(y+1);for(var m=-ee;m<0;m++)k[z+m]*=q,k[z+m]>C.xrpow_max&&(C.xrpow_max=k[z+m]);z+=ee*(3-y-1)}{var q=i.IPOW20(202);z+=C.width[R]*(y+1);for(var m=-C.width[R];m<0;m++)k[z+m]*=q,k[z+m]>C.xrpow_max&&(C.xrpow_max=k[z+m])}}}return!1}function $(_,C,k,R,o){var y=_.internal_flags;te(_,C,k,R,o);var O=F(C);return O?!1:(y.mode_gr==2?O=s.scale_bitcount(C):O=s.scale_bitcount_lsf(y,C),O?(y.noise_shaping>1&&(gn.fill(y.pseudohalf,0),C.scalefac_scale==0?(H(C,R),O=!1):C.block_type==nt.SHORT_TYPE&&y.subblock_gain>0&&(O=n(y,C,R)||F(C))),O||(y.mode_gr==2?O=s.scale_bitcount(C):O=s.scale_bitcount_lsf(y,C)),!O):!0)}this.outer_loop=function(_,C,k,R,o,y){var O=_.internal_flags,x=new Dr,z=Ln(576),q=Ln(Lr.SFBMAX),ee=new Ws,ae,I=new bu,m=9999999,N=!1,K=!1,W=0;if(E(O,C,y,o,R),O.noise_shaping==0)return 100;i.calc_noise(C,k,q,ee,I),ee.bits=C.part2_3_length,x.assign(C);var X=0;for(zi.arraycopy(R,0,z,0,576);!N;){do{var Y=new Ws,D,L=255;if(O.substep_shaping&2?D=20:D=3,O.sfb21_extra&&(q[x.sfbmax]>1||x.block_type==nt.SHORT_TYPE&&(q[x.sfbmax+1]>1||q[x.sfbmax+2]>1))||!$(_,x,q,R,K))break;x.scalefac_scale!=0&&(L=254);var c=y-x.part2_length;if(c<=0)break;for(;(x.part2_3_length=s.count_bits(O,R,x,I))>c&&x.global_gain<=L;)x.global_gain++;if(x.global_gain>L)break;if(ee.over_count==0){for(;(x.part2_3_length=s.count_bits(O,R,x,I))>m&&x.global_gain<=L;)x.global_gain++;if(x.global_gain>L)break}if(i.calc_noise(x,k,q,Y,I),Y.bits=x.part2_3_length,C.block_type!=nt.SHORT_TYPE?ae=_.quant_comp:ae=_.quant_comp_short,ae=B(ae,ee,Y,x,q)?1:0,ae!=0)m=C.part2_3_length,ee=Y,C.assign(x),X=0,zi.arraycopy(R,0,z,0,576);else if(O.full_outer_loop==0&&(++X>D&&ee.over_count==0||O.noise_shaping_amp==3&&K&&X>30||O.noise_shaping_amp==3&&K&&x.global_gain-W>15))break}while(x.global_gain+x.scalefac_scale<255);O.noise_shaping_amp==3?K?N=!0:(x.assign(C),zi.arraycopy(z,0,R,0,576),X=0,W=x.global_gain,K=!0):N=!0}return bi(C.global_gain+C.scalefac_scale<=255),_.VBR==$r.vbr_rh||_.VBR==$r.vbr_mtrh?zi.arraycopy(z,0,R,0,576):O.substep_shaping&1&&trancate_smallspectrums(O,C,k,R),ee.over_count},this.iteration_finish_one=function(_,C,k){var R=_.l3_side,o=R.tt[C][k];s.best_scalefac_store(_,C,k,R),_.use_best_huffman==1&&s.best_huffman_divide(_,o),t.ResvAdjust(_,o)},this.VBR_encode_granule=function(_,C,k,R,o,y,O){var x=_.internal_flags,z=new Dr,q=Ln(576),ee=O,ae=O+1,I=(O+y)/2,m,N,K=0,W=x.sfb21_extra;bi(ee<=LameInternalFlags.MAX_BITS_PER_CHANNEL),gn.fill(z.l3_enc,0);do bi(I>=y),bi(I<=O),bi(y<=O),I>ee-42?x.sfb21_extra=!1:x.sfb21_extra=W,N=outer_loop(_,C,k,R,o,I),N<=0?(K=1,ae=C.part2_3_length,z.assign(C),zi.arraycopy(R,0,q,0,576),O=ae-32,m=O-y,I=(O+y)/2):(y=I+32,m=O-y,I=(O+y)/2,K!=0&&(K=2,C.assign(z),zi.arraycopy(q,0,R,0,576)));while(m>12);x.sfb21_extra=W,K==2&&zi.arraycopy(z.l3_enc,0,C.l3_enc,0,576),bi(C.part2_3_length<=ee)},this.get_framebits=function(_,C){var k=_.internal_flags;k.bitrate_index=k.VBR_min_bitrate;var R=e.getframebits(_);k.bitrate_index=1,R=e.getframebits(_);for(var o=1;o<=k.VBR_max_bitrate;o++){k.bitrate_index=o;var y=new MeanBits(R);C[o]=t.ResvFrameBegin(_,y),R=y.bits}},this.VBR_old_prepare=function(_,C,k,R,o,y,O,x,z){var q=_.internal_flags,ee,ae=0,I=1,m=0;q.bitrate_index=q.VBR_max_bitrate;var N=t.ResvFrameBegin(_,new MeanBits(0))/q.mode_gr;get_framebits(_,y);for(var K=0;K<q.mode_gr;K++){var W=i.on_pe(_,C,x[K],N,K,0);q.mode_ext==nt.MPG_MD_MS_LR&&(ms_convert(q.l3_side,K),i.reduce_side(x[K],k[K],N,W));for(var X=0;X<q.channels_out;++X){var Y=q.l3_side.tt[K][X];Y.block_type!=nt.SHORT_TYPE?(ae=1.28/(1+Math.exp(3.5-C[K][X]/300))-.05,ee=q.PSY.mask_adjust-ae):(ae=2.56/(1+Math.exp(3.5-C[K][X]/300))-.14,ee=q.PSY.mask_adjust_short-ae),q.masking_lower=Math.pow(10,ee*.1),init_outer_loop(q,Y),z[K][X]=i.calc_xmin(_,R[K][X],Y,o[K][X]),z[K][X]!=0&&(I=0),O[K][X]=126,m+=x[K][X]}}for(var K=0;K<q.mode_gr;K++)for(var X=0;X<q.channels_out;X++)m>y[q.VBR_max_bitrate]&&(x[K][X]*=y[q.VBR_max_bitrate],x[K][X]/=m),O[K][X]>x[K][X]&&(O[K][X]=x[K][X]);return I},this.bitpressure_strategy=function(_,C,k,R){for(var o=0;o<_.mode_gr;o++)for(var y=0;y<_.channels_out;y++){for(var O=_.l3_side.tt[o][y],x=C[o][y],z=0,q=0;q<O.psy_lmax;q++)x[z++]*=1+.029*q*q/nt.SBMAX_l/nt.SBMAX_l;if(O.block_type==nt.SHORT_TYPE)for(var q=O.sfb_smin;q<nt.SBMAX_s;q++)x[z++]*=1+.029*q*q/nt.SBMAX_s/nt.SBMAX_s,x[z++]*=1+.029*q*q/nt.SBMAX_s/nt.SBMAX_s,x[z++]*=1+.029*q*q/nt.SBMAX_s/nt.SBMAX_s;R[o][y]=0|Math.max(k[o][y],.9*R[o][y])}},this.VBR_new_prepare=function(_,C,k,R,o,y){var O=_.internal_flags,x=1,z=0,q=0,ee;if(_.free_format){O.bitrate_index=0;var ae=new MeanBits(z);ee=t.ResvFrameBegin(_,ae),z=ae.bits,o[0]=ee}else{O.bitrate_index=O.VBR_max_bitrate;var ae=new MeanBits(z);t.ResvFrameBegin(_,ae),z=ae.bits,get_framebits(_,o),ee=o[O.VBR_max_bitrate]}for(var I=0;I<O.mode_gr;I++){i.on_pe(_,C,y[I],z,I,0),O.mode_ext==nt.MPG_MD_MS_LR&&ms_convert(O.l3_side,I);for(var m=0;m<O.channels_out;++m){var N=O.l3_side.tt[I][m];O.masking_lower=Math.pow(10,O.PSY.mask_adjust*.1),init_outer_loop(O,N),i.calc_xmin(_,k[I][m],N,R[I][m])!=0&&(x=0),q+=y[I][m]}}for(var I=0;I<O.mode_gr;I++)for(var m=0;m<O.channels_out;m++)q>ee&&(y[I][m]*=ee,y[I][m]/=q);return x},this.calc_target_bits=function(_,C,k,R,o,y){var O=_.internal_flags,x=O.l3_side,z,q,ee,ae,I=0;O.bitrate_index=O.VBR_max_bitrate;var m=new MeanBits(I);for(y[0]=t.ResvFrameBegin(_,m),I=m.bits,O.bitrate_index=1,I=e.getframebits(_)-O.sideinfo_len*8,o[0]=I/(O.mode_gr*O.channels_out),I=_.VBR_mean_bitrate_kbps*_.framesize*1e3,O.substep_shaping&1&&(I*=1.09),I/=_.out_samplerate,I-=O.sideinfo_len*8,I/=O.mode_gr*O.channels_out,z=.93+.07*(11-_.compression_ratio)/(11-5.5),z<.9&&(z=.9),z>1&&(z=1),q=0;q<O.mode_gr;q++){var N=0;for(ee=0;ee<O.channels_out;ee++){if(R[q][ee]=int(z*I),C[q][ee]>700){var K=int((C[q][ee]-700)/1.4),W=x.tt[q][ee];R[q][ee]=int(z*I),W.block_type==nt.SHORT_TYPE&&K<I/2&&(K=I/2),K>I*3/2?K=I*3/2:K<0&&(K=0),R[q][ee]+=K}R[q][ee]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(R[q][ee]=LameInternalFlags.MAX_BITS_PER_CHANNEL),N+=R[q][ee]}if(N>LameInternalFlags.MAX_BITS_PER_GRANULE)for(ee=0;ee<O.channels_out;++ee)R[q][ee]*=LameInternalFlags.MAX_BITS_PER_GRANULE,R[q][ee]/=N}if(O.mode_ext==nt.MPG_MD_MS_LR)for(q=0;q<O.mode_gr;q++)i.reduce_side(R[q],k[q],I*O.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(ae=0,q=0;q<O.mode_gr;q++)for(ee=0;ee<O.channels_out;ee++)R[q][ee]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(R[q][ee]=LameInternalFlags.MAX_BITS_PER_CHANNEL),ae+=R[q][ee];if(ae>y[0])for(q=0;q<O.mode_gr;q++)for(ee=0;ee<O.channels_out;ee++)R[q][ee]*=y[0],R[q][ee]/=ae}}var yu=gu,_u=pt,ma=_u.assert;function Eu(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,i){var a=t.internal_flags,s,d=a.l3_side,r=e.getframebits(t);i.bits=(r-a.sideinfo_len*8)/a.mode_gr;var f=8*256*a.mode_gr-8;t.brate>320?s=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(s=8*1440,t.strict_ISO&&(s=8*int(32e4/(t.out_samplerate/1152)/8+.5))),a.ResvMax=s-r,a.ResvMax>f&&(a.ResvMax=f),(a.ResvMax<0||t.disable_reservoir)&&(a.ResvMax=0);var E=i.bits*a.mode_gr+Math.min(a.ResvSize,a.ResvMax);return E>s&&(E=s),ma(a.ResvMax%8==0),ma(a.ResvMax>=0),d.resvDrain_pre=0,a.pinfo!=null&&(a.pinfo.mean_bits=i.bits/2,a.pinfo.resvsize=a.ResvSize),E},this.ResvMaxBits=function(t,i,a,s){var d=t.internal_flags,r,f=d.ResvSize,E=d.ResvMax;s!=0&&(f+=i),d.substep_shaping&1&&(E*=.9),a.bits=i,f*10>E*9?(r=f-E*9/10,a.bits+=r,d.substep_shaping|=128):(r=0,d.substep_shaping&=127,!t.disable_reservoir&&!(d.substep_shaping&1)&&(a.bits-=.1*i));var F=f<d.ResvMax*6/10?f:d.ResvMax*6/10;return F-=r,F<0&&(F=0),F},this.ResvAdjust=function(t,i){t.ResvSize-=i.part2_3_length+i.part2_length},this.ResvFrameEnd=function(t,i){var a,s=t.l3_side;t.ResvSize+=i*t.mode_gr;var d=0;s.resvDrain_post=0,s.resvDrain_pre=0,(a=t.ResvSize%8)!=0&&(d+=a),a=t.ResvSize-d-t.ResvMax,a>0&&(ma(a%8==0),ma(a>=0),d+=a);{var r=Math.min(s.main_data_begin*8,d)/8;s.resvDrain_pre+=8*r,d-=8*r,t.ResvSize-=8*r,s.main_data_begin-=r}s.resvDrain_post+=d,t.ResvSize-=d}}var Cu=Eu;function Tu(){var e="http://www.mp3dev.org/",t=3,i=98,a=4,s=0,d=93;this.getLameVersion=function(){return t+"."+i+"."+a},this.getLameShortVersion=function(){return t+"."+i+"."+a},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+i+"r"},this.getPsyVersion=function(){return s+"."+d},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var wu=Tu,ni=pt,Su=ni.System,Qs=ni.VbrMode;ni.Float;var Or=ni.ShortBlock;ni.Util;var ku=ni.Arrays;ni.new_array_n;var va=ni.new_byte;ni.new_double;ni.new_float;ni.new_float_n;ni.new_int;ni.new_int_n;var Au=ni.assert;xn.NUMTOCENTRIES=100;xn.MAXFRAMESIZE=2880;function xn(){var e,t,i;this.setModules=function(I,m,N){e=I,t=m,i=N};var a=1,s=2,d=4,r=8,f=xn.NUMTOCENTRIES,E=xn.MAXFRAMESIZE,F=f+4+4+4+4+4,b=F+9+1+1+8+1+1+3+1+1+2+4+2+2,p=128,B=64,te=32,H=null,n="Xing",$="Info",_=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function C(I,m){if(I.nVbrNumFrames++,I.sum+=m,I.seen++,!(I.seen<I.want)&&(I.pos<I.size&&(I.bag[I.pos]=I.sum,I.pos++,I.seen=0),I.pos==I.size)){for(var N=1;N<I.size;N+=2)I.bag[N/2]=I.bag[N];I.want*=2,I.pos/=2}}function k(I,m){if(!(I.pos<=0))for(var N=1;N<f;++N){var K=N/f,W,X,Y=0|Math.floor(K*I.pos);Y>I.pos-1&&(Y=I.pos-1),W=I.bag[Y],X=I.sum;var D=0|256*W/X;D>255&&(D=255),m[N]=255&D}}this.addVbrFrame=function(I){var m=I.internal_flags,N=Tables.bitrate_table[I.version][m.bitrate_index];Au(m.VBR_seek_table.bag!=null),C(m.VBR_seek_table,N)};function R(I,m){var N=I[m+0]&255;return N<<=8,N|=I[m+1]&255,N<<=8,N|=I[m+2]&255,N<<=8,N|=I[m+3]&255,N}function o(I,m,N){I[m+0]=255&(N>>24&255),I[m+1]=255&(N>>16&255),I[m+2]=255&(N>>8&255),I[m+3]=255&(N&255)}function y(I,m,N){I[m+0]=255&(N>>8&255),I[m+1]=255&(N&255)}function O(I,m){return new String(I,m,n.length(),H).equals(n)||new String(I,m,$.length(),H).equals($)}function x(I,m,N){return 255&(I<<m|N&~(-1<<m))}function z(I,m){var N=I.internal_flags;m[0]=x(m[0],8,255),m[1]=x(m[1],3,7),m[1]=x(m[1],1,I.out_samplerate<16e3?0:1),m[1]=x(m[1],1,I.version),m[1]=x(m[1],2,4-3),m[1]=x(m[1],1,I.error_protection?0:1),m[2]=x(m[2],4,N.bitrate_index),m[2]=x(m[2],2,N.samplerate_index),m[2]=x(m[2],1,0),m[2]=x(m[2],1,I.extension),m[3]=x(m[3],2,I.mode.ordinal()),m[3]=x(m[3],2,N.mode_ext),m[3]=x(m[3],1,I.copyright),m[3]=x(m[3],1,I.original),m[3]=x(m[3],2,I.emphasis),m[0]=255;var K=255&(m[1]&241),W;I.version==1?W=p:I.out_samplerate<16e3?W=te:W=B,I.VBR==Qs.vbr_off&&(W=I.brate);var X;I.free_format?X=0:X=255&16*e.BitrateIndex(W,I.version,I.out_samplerate),I.version==1?(m[1]=255&(K|10),K=255&(m[2]&13),m[2]=255&(X|K)):(m[1]=255&(K|2),K=255&(m[2]&13),m[2]=255&(X|K))}this.getVbrTag=function(I){var m=new VBRTagData,N=0;m.flags=0;var K=I[N+1]>>3&1,W=I[N+2]>>2&3,X=I[N+3]>>6&3,Y=I[N+2]>>4&15;if(Y=Tables.bitrate_table[K][Y],I[N+1]>>4==14?m.samprate=Tables.samplerate_table[2][W]:m.samprate=Tables.samplerate_table[K][W],K!=0?X!=3?N+=32+4:N+=17+4:X!=3?N+=17+4:N+=9+4,!O(I,N))return null;N+=4,m.hId=K;var D=m.flags=R(I,N);if(N+=4,D&a&&(m.frames=R(I,N),N+=4),D&s&&(m.bytes=R(I,N),N+=4),D&d){if(m.toc!=null)for(var L=0;L<f;L++)m.toc[L]=I[N+L];N+=f}m.vbrScale=-1,D&r&&(m.vbrScale=R(I,N),N+=4),m.headersize=(K+1)*72e3*Y/m.samprate,N+=21;var c=I[N+0]<<4;c+=I[N+1]>>4;var h=(I[N+1]&15)<<8;return h+=I[N+2]&255,(c<0||c>3e3)&&(c=-1),(h<0||h>3e3)&&(h=-1),m.encDelay=c,m.encPadding=h,m},this.InitVbrTag=function(I){var m=I.internal_flags,N;I.version==1?N=p:I.out_samplerate<16e3?N=te:N=B,I.VBR==Qs.vbr_off&&(N=I.brate);var K=(I.version+1)*72e3*N/I.out_samplerate,W=m.sideinfo_len+b;if(m.VBR_seek_table.TotalFrameSize=K,K<W||K>E){I.bWriteVbrTag=!1;return}m.VBR_seek_table.nVbrNumFrames=0,m.VBR_seek_table.nBytesWritten=0,m.VBR_seek_table.sum=0,m.VBR_seek_table.seen=0,m.VBR_seek_table.want=1,m.VBR_seek_table.pos=0,m.VBR_seek_table.bag==null&&(m.VBR_seek_table.bag=new int[400],m.VBR_seek_table.size=400);var X=va(E);z(I,X);for(var Y=m.VBR_seek_table.TotalFrameSize,D=0;D<Y;++D)t.add_dummy_byte(I,X[D]&255,1)};function q(I,m){var N=m^I;return m=m>>8^_[N&255],m}this.updateMusicCRC=function(I,m,N,K){for(var W=0;W<K;++W)I[0]=q(m[N+W],I[0])};function ee(I,m,N,K,W){var X=I.internal_flags,Y=0,D=I.encoder_delay,L=I.encoder_padding,c=100-10*I.VBR_q-I.quality,h=i.getLameVeryShortVersion(),u,g=0,j,ne=[1,5,3,2,4,0,3],J=0|(I.lowpassfreq/100+.5>255?255:I.lowpassfreq/100+.5),U=0,de=0,ve=0,_e=I.internal_flags.noise_shaping,Le=0,Se=0,Ce=0,Pe=0,et=0,Ot=(I.exp_nspsytune&1)!=0,v=(I.exp_nspsytune&2)!=0,S=!1,Me=!1,Be=I.internal_flags.nogap_total,je=I.internal_flags.nogap_current,Ke=I.ATHtype,Oe=0,De;switch(I.VBR){case vbr_abr:De=I.VBR_mean_bitrate_kbps;break;case vbr_off:De=I.brate;break;default:De=I.VBR_min_bitrate_kbps}switch(I.VBR.ordinal()<ne.length?u=ne[I.VBR.ordinal()]:u=0,j=16*g+u,X.findReplayGain&&(X.RadioGain>510&&(X.RadioGain=510),X.RadioGain<-510&&(X.RadioGain=-510),de=8192,de|=3072,X.RadioGain>=0?de|=X.RadioGain:(de|=512,de|=-X.RadioGain)),X.findPeakSample&&(U=Math.abs(0|X.PeakSample/32767*Math.pow(2,23)+.5)),Be!=-1&&(je>0&&(Me=!0),je<Be-1&&(S=!0)),Oe=Ke+((Ot?1:0)<<4)+((v?1:0)<<5)+((S?1:0)<<6)+((Me?1:0)<<7),c<0&&(c=0),I.mode){case MONO:Le=0;break;case STEREO:Le=1;break;case DUAL_CHANNEL:Le=2;break;case JOINT_STEREO:I.force_ms?Le=4:Le=3;break;case NOT_SET:default:Le=7;break}I.in_samplerate<=32e3?Ce=0:I.in_samplerate==48e3?Ce=2:I.in_samplerate>48e3?Ce=3:Ce=1,(I.short_blocks==Or.short_block_forced||I.short_blocks==Or.short_block_dispensed||I.lowpassfreq==-1&&I.highpassfreq==-1||I.scale_left<I.scale_right||I.scale_left>I.scale_right||I.disable_reservoir&&I.brate<320||I.noATH||I.ATHonly||Ke==0||I.in_samplerate<=32e3)&&(Se=1),Pe=_e+(Le<<2)+(Se<<5)+(Ce<<6),et=X.nMusicCRC,o(N,K+Y,c),Y+=4;for(var Ye=0;Ye<9;Ye++)N[K+Y+Ye]=255&h.charAt(Ye);Y+=9,N[K+Y]=255&j,Y++,N[K+Y]=255&J,Y++,o(N,K+Y,U),Y+=4,y(N,K+Y,de),Y+=2,y(N,K+Y,ve),Y+=2,N[K+Y]=255&Oe,Y++,De>=255?N[K+Y]=255:N[K+Y]=255&De,Y++,N[K+Y]=255&D>>4,N[K+Y+1]=255&(D<<4)+(L>>8),N[K+Y+2]=255&L,Y+=3,N[K+Y]=255&Pe,Y++,N[K+Y++]=0,y(N,K+Y,I.preset),Y+=2,o(N,K+Y,m),Y+=4,y(N,K+Y,et),Y+=2;for(var Fe=0;Fe<Y;Fe++)W=q(N[K+Fe],W);return y(N,K+Y,W),Y+=2,Y}function ae(I){I.seek(0);var m=va(10);I.readFully(m);var N;return new String(m,"ISO-8859-1").startsWith("ID3")?N=0:N=((m[6]&127)<<21|(m[7]&127)<<14|(m[8]&127)<<7|m[9]&127)+m.length,N}this.getLameTagFrame=function(I,m){var N=I.internal_flags;if(!I.bWriteVbrTag||N.Class_ID!=Lame.LAME_ID||N.VBR_seek_table.pos<=0)return 0;if(m.length<N.VBR_seek_table.TotalFrameSize)return N.VBR_seek_table.TotalFrameSize;ku.fill(m,0,N.VBR_seek_table.TotalFrameSize,0),z(I,m);var K=va(f);if(I.free_format)for(var W=1;W<f;++W)K[W]=255&255*W/100;else k(N.VBR_seek_table,K);var X=N.sideinfo_len;I.error_protection&&(X-=2),I.VBR==Qs.vbr_off?(m[X++]=255&$.charAt(0),m[X++]=255&$.charAt(1),m[X++]=255&$.charAt(2),m[X++]=255&$.charAt(3)):(m[X++]=255&n.charAt(0),m[X++]=255&n.charAt(1),m[X++]=255&n.charAt(2),m[X++]=255&n.charAt(3)),o(m,X,a+s+d+r),X+=4,o(m,X,N.VBR_seek_table.nVbrNumFrames),X+=4;var Y=N.VBR_seek_table.nBytesWritten+N.VBR_seek_table.TotalFrameSize;o(m,X,0|Y),X+=4,Su.arraycopy(K,0,m,X,K.length),X+=K.length,I.error_protection&&t.CRC_writeheader(N,m);for(var D=0,W=0;W<X;W++)D=q(m[W],D);return X+=ee(I,Y,m,X,D),N.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(I,m){var N=I.internal_flags;if(N.VBR_seek_table.pos<=0||(m.seek(m.length()),m.length()==0))return-1;var K=ae(m);m.seek(K);var W=va(E),X=getLameTagFrame(I,W);return X>W.length?-1:(X<1||m.write(W,0,X),0)}}var Mu=xn,ai=pt;ai.System;ai.VbrMode;ai.Float;ai.ShortBlock;ai.Util;ai.Arrays;ai.new_array_n;var Nr=ai.new_byte;ai.new_double;ai.new_float;ai.new_float_n;ai.new_int;ai.new_int_n;var Pr=ai.assert,Iu=Ho(),Ru=lu,Bu=Sl,$u=Al(),Du=yu,Lu=Ml(),Ou=Cu,Nu=Qn,Pu=Vo();Lt();var Fu=wu,Vu=Mu;function Hu(){this.setModules=function(e,t){}}function qu(){this.setModules=function(e,t,i){}}function Ku(){}function ju(){this.setModules=function(e,t){}}function Xu(e,t,i){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,i=128);var a=new Iu,s=new Hu,d=new Bu,r=new Pu,f=new Ru,E=new $u,F=new Du,b=new Vu,p=new Fu,B=new ju,te=new Ou,H=new Lu,n=new qu,$=new Ku;a.setModules(d,r,f,E,F,b,p,B,$),r.setModules(d,$,p,b),B.setModules(r,p),f.setModules(a),F.setModules(r,te,E,H),E.setModules(H,te,a.enc.psy),te.setModules(r),H.setModules(E),b.setModules(a,r,p),s.setModules(n,$),n.setModules(p,B,f);var _=a.lame_init();_.num_channels=e,_.in_samplerate=t,_.brate=i,_.mode=Nu.STEREO,_.quality=3,_.bWriteVbrTag=!1,_.disable_reservoir=!0,_.write_id3tag_automatic=!1;var C=a.lame_init_params(_);Pr(C==0);var k=1152,R=0|1.25*k+7200,o=Nr(R);this.encodeBuffer=function(y,O){e==1&&(O=y),Pr(y.length==O.length),y.length>k&&(k=y.length,R=0|1.25*k+7200,o=Nr(R));var x=a.lame_encode_buffer(_,y,O,y.length,o,0,R);return new Int8Array(o.subarray(0,x))},this.flush=function(){var y=a.lame_encode_flush(_,o,0,R);return new Int8Array(o.subarray(0,y))}}function Si(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function vs(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}Si.RIFF=vs("RIFF");Si.WAVE=vs("WAVE");Si.fmt_=vs("fmt ");Si.data=vs("data");Si.readHeader=function(e){var t=new Si,i=e.getUint32(0,!1);if(Si.RIFF==i&&(e.getUint32(4,!0),Si.WAVE==e.getUint32(8,!1)&&Si.fmt_==e.getUint32(12,!1))){var a=e.getUint32(16,!0),s=16+4;switch(a){case 16:case 18:t.channels=e.getUint16(s+2,!0),t.sampleRate=e.getUint32(s+4,!0);break;default:throw"extended fmt chunk not implemented"}s+=a;for(var d=Si.data,r=0;d!=i&&(i=e.getUint32(s,!1),r=e.getUint32(s+4,!0),d!=i);)s+=r+8;return t.dataLen=r,t.dataOffset=s+8,t}};ns.Mp3Encoder=Xu;ns.WavHeader=Si;const Uu={name:"Capsule",props:{admin:Boolean,identifiant:String,item:Object,pad:Object,couleur:String,indexCol:Number,tabindex:Number,action:String,statut:String,digidrive:Boolean}},zu={class:"contenu"},Yu={key:0,class:"material-icons"},Gu=["innerHTML"],xu={key:2,class:"media"},Wu=["tabindex","src","alt"],Qu=["tabindex","src","alt"],Zu=["tabindex"],Ju=["src","alt"],e1={key:3},t1=["href"],i1=["src","alt"],n1={key:4},a1=["href"],s1=["src","alt"],o1={key:3,class:"media"},r1=["src","alt"],l1=["src","alt"],d1={key:2},u1=["src","alt"],f1={key:3},c1=["src","alt"],h1={key:4},m1=["src","alt"],v1={key:4,class:"evaluation"},p1={class:"etoiles"},b1=["tabindex","title"],g1=["tabindex","title"],y1=["tabindex","title"],_1=["tabindex","title"],E1={class:"badge"},C1=["tabindex","title","data-description"],T1={key:2,class:"media-type"},w1={class:"material-icons"},S1=["tabindex","title"],k1=["tabindex","title"],A1={key:5,class:"moderation"},M1=["tabindex"],I1={key:6,class:"moderation"},R1=["tabindex"],B1={key:1,class:"bouton"};function $1(e,t,i,a,s,d){return T(),w("div",zu,[i.item.titre!==""?(T(),w("div",{key:0,class:"titre",style:rt({background:e.$parent.$parent.eclaircirCouleur(i.item.couleur)})},[l("span",null,Z(i.item.titre),1),i.action==="organiser"?(T(),w("i",Yu,"drag_indicator")):fe("",!0)],4)):fe("",!0),i.item.texte!==""?(T(),w("div",{key:1,class:"texte",innerHTML:i.item.texte},null,8,Gu)):fe("",!0),i.item.media!==""&&i.action!=="organiser"?(T(),w("div",xu,[i.item.type==="image"?(T(),w("img",{key:0,role:"button",tabindex:i.tabindex,src:"/"+e.$parent.$parent.definirDossierFichiers(i.pad.id)+"/"+i.pad.id+"/"+i.item.media,loading:"lazy",alt:i.item.media,onClick:t[0]||(t[0]=r=>e.$parent.$parent.afficherVisionneuse(i.item)),onKeydown:t[1]||(t[1]=Q(r=>e.$parent.$parent.afficherVisionneuse(i.item),["enter"]))},null,40,Wu)):i.item.type==="lien-image"?(T(),w("img",{key:1,role:"button",tabindex:i.tabindex,src:i.item.media,loading:"lazy",alt:i.item.media,onClick:t[2]||(t[2]=r=>e.$parent.$parent.afficherVisionneuse(i.item)),onKeydown:t[3]||(t[3]=Q(r=>e.$parent.$parent.afficherVisionneuse(i.item),["enter"]))},null,40,Qu)):i.item.type==="audio"||i.item.type==="video"||i.item.type==="document"||i.item.type==="pdf"||i.item.type==="office"||i.item.type==="embed"?(T(),w("span",{key:2,role:"button",tabindex:i.tabindex,onClick:t[4]||(t[4]=r=>e.$parent.$parent.afficherVisionneuse(i.item)),onKeydown:t[5]||(t[5]=Q(r=>e.$parent.$parent.afficherVisionneuse(i.item),["enter"]))},[l("img",{class:Ne({vignette:e.$parent.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.$parent.definirVignette(i.item),alt:e.$parent.$parent.definirVignette(i.item),loading:"lazy"},null,10,Ju)],40,Zu)):i.item.type==="lien"?(T(),w("span",e1,[l("a",{href:i.item.media,target:"_blank"},[l("img",{class:Ne({vignette:e.$parent.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.$parent.definirVignette(i.item),alt:e.$parent.$parent.definirVignette(i.item),loading:"lazy"},null,10,i1)],8,t1)])):(T(),w("span",n1,[l("a",{href:"/"+e.$parent.$parent.definirDossierFichiers(i.pad.id)+"/"+i.pad.id+"/"+i.item.media,download:""},[l("img",{class:Ne({vignette:e.$parent.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.$parent.definirVignette(i.item),alt:e.$parent.$parent.definirVignette(i.item),loading:"lazy"},null,10,s1)],8,a1)]))])):i.item.media!==""&&i.action==="organiser"?(T(),w("div",o1,[i.item.type==="image"?(T(),w("img",{key:0,src:"/"+e.$parent.$parent.definirDossierFichiers(i.pad.id)+"/"+i.pad.id+"/"+i.item.media,loading:"lazy",alt:i.item.media},null,8,r1)):i.item.type==="lien-image"?(T(),w("img",{key:1,src:i.item.media,loading:"lazy",alt:i.item.media},null,8,l1)):i.item.type==="audio"||i.item.type==="video"||i.item.type==="document"||i.item.type==="pdf"||i.item.type==="office"||i.item.type==="embed"?(T(),w("span",d1,[l("img",{class:Ne({vignette:e.$parent.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.$parent.definirVignette(i.item),loading:"lazy",alt:e.$parent.$parent.definirVignette(i.item)},null,10,u1)])):i.item.type==="lien"?(T(),w("span",f1,[l("img",{class:Ne({vignette:e.$parent.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.$parent.definirVignette(i.item),loading:"lazy",alt:e.$parent.$parent.definirVignette(i.item)},null,10,c1)])):(T(),w("span",h1,[l("img",{class:Ne({vignette:e.$parent.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.$parent.definirVignette(i.item),loading:"lazy",alt:e.$parent.$parent.definirVignette(i.item)},null,10,m1)]))])):fe("",!0),i.pad.evaluations==="activees"?(T(),w("div",v1,[l("span",p1,[(T(!0),w(Qe,null,Je(e.$parent.$parent.definirEvaluationCapsule(i.item.evaluations),r=>(T(),w("i",{class:Ne(["material-icons",{evalue:e.$parent.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!0}]),key:"etoilepleine_"+r},"star",2))),128)),(T(!0),w(Qe,null,Je(5-e.$parent.$parent.definirEvaluationCapsule(i.item.evaluations),r=>(T(),w("i",{class:Ne(["material-icons",{evalue:e.$parent.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!0}]),key:"etoilevide_"+r},"star_outline",2))),128)),l("span",null,"("+Z(i.item.evaluations.length)+")",1)]),e.$parent.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!1&&i.action!=="organiser"?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("evaluerCapsule"),style:rt({color:i.couleur}),onClick:t[6]||(t[6]=r=>e.$parent.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,"")),onKeydown:t[7]||(t[7]=Q(r=>e.$parent.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,""),["enter"]))},t[22]||(t[22]=[l("i",{class:"material-icons"},"add_comment",-1)]),44,b1)):e.$parent.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!0&&i.action!=="organiser"?(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("evaluerCapsule"),style:rt({color:i.couleur}),onClick:t[8]||(t[8]=r=>e.$parent.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,i.item.evaluations)),onKeydown:t[9]||(t[9]=Q(r=>e.$parent.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,i.item.evaluations),["enter"]))},t[23]||(t[23]=[l("i",{class:"material-icons"},"rate_review",-1)]),44,g1)):fe("",!0)])):fe("",!0),l("div",{class:"action",style:rt({color:i.item.couleur})},[(i.item.identifiant===i.identifiant||i.admin||i.pad.contributions==="modifiables")&&i.action!=="organiser"?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("modifierCapsule"),onClick:t[10]||(t[10]=r=>e.$parent.$parent.ouvrirModaleBloc("edition",i.item,i.indexCol)),onKeydown:t[11]||(t[11]=Q(r=>e.$parent.$parent.ouvrirModaleBloc("edition",i.item,i.indexCol),["enter"]))},t[24]||(t[24]=[l("i",{class:"material-icons"},"edit",-1)]),40,y1)):fe("",!0),i.pad.commentaires==="actives"?(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("commenterCapsule"),onClick:t[12]||(t[12]=r=>e.$parent.$parent.ouvrirModaleCommentaires(i.item.bloc,i.item.titre)),onKeydown:t[13]||(t[13]=Q(r=>e.$parent.$parent.ouvrirModaleCommentaires(i.item.bloc,i.item.titre),["enter"]))},[t[25]||(t[25]=l("i",{class:"material-icons"},"comment",-1)),l("span",E1,Z(i.item.commentaires),1)],40,_1)):fe("",!0),l("span",{class:"bouton info",role:"button",tabindex:i.tabindex,title:e.$t("informationsCapsule"),"data-description":e.$parent.$parent.definirDescription(i.item)},t[26]||(t[26]=[l("i",{class:"material-icons"},"info",-1)]),8,C1),i.item.media!==""?(T(),w("span",T1,[l("i",w1,Z(e.$parent.$parent.definirIconeMedia(i.item)),1)])):fe("",!0),i.admin&&i.pad.copieBloc==="activee"&&(i.statut==="utilisateur"||i.digidrive)&&i.action!=="organiser"?(T(),w("span",{key:3,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("copierCapsule"),onClick:t[14]||(t[14]=r=>e.$parent.$parent.afficherEnvoyerBloc(i.item.bloc,i.item.titre)),onKeydown:t[15]||(t[15]=Q(r=>e.$parent.$parent.afficherEnvoyerBloc(i.item.bloc,i.item.titre),["enter"]))},t[27]||(t[27]=[l("i",{class:"material-icons"},"send",-1)]),40,S1)):fe("",!0),(i.item.identifiant===i.identifiant||i.admin)&&i.action!=="organiser"?(T(),w("span",{key:4,class:"bouton supprimer",role:"button",tabindex:i.tabindex,title:e.$t("supprimerCapsule"),onClick:t[16]||(t[16]=r=>e.$parent.$parent.afficherSupprimerBloc(i.item.bloc,i.item.titre,i.indexCol)),onKeydown:t[17]||(t[17]=Q(r=>e.$parent.$parent.afficherSupprimerBloc(i.item.bloc,i.item.titre,i.indexCol),["enter"]))},t[28]||(t[28]=[l("i",{class:"material-icons"},"delete",-1)]),40,k1)):fe("",!0)],4),i.item.visibilite==="privee"&&i.admin?(T(),w("div",A1,[l("span",{class:"bouton",role:"button",tabindex:i.tabindex,onClick:t[18]||(t[18]=r=>e.$parent.$parent.autoriserBloc(i.item,"privee")),onKeydown:t[19]||(t[19]=Q(r=>e.$parent.$parent.autoriserBloc(i.item,"privee"),["enter"]))},Z(e.$t("afficherCapsule")),41,M1)])):i.pad.contributions==="moderees"&&i.item.visibilite==="masquee"?(T(),w("div",I1,[i.admin?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:i.tabindex,onClick:t[20]||(t[20]=r=>e.$parent.$parent.autoriserBloc(i.item,"moderee")),onKeydown:t[21]||(t[21]=Q(r=>e.$parent.$parent.autoriserBloc(i.item,"moderee"),["enter"]))},Z(e.$t("validerCapsule")),41,R1)):i.item.identifiant===i.identifiant?(T(),w("span",B1,Z(e.$t("enAttenteModeration")),1)):fe("",!0)])):fe("",!0)])}const D1=ds(Uu,[["render",$1]]),L1={name:"CapsuleAlt",props:{admin:Boolean,identifiant:String,item:Object,pad:Object,couleur:String,indexCol:Number,tabindex:Number,action:String,statut:String,digidrive:Boolean}},O1={class:"contenu"},N1={key:0,class:"material-icons"},P1=["innerHTML"],F1={key:2,class:"media"},V1=["tabindex","src","alt"],H1=["tabindex","src","alt"],q1=["tabindex"],K1=["src","alt"],j1={key:3},X1=["href"],U1=["src","alt"],z1={key:4},Y1=["href"],G1=["src","alt"],x1={key:3,class:"media"},W1=["src","alt"],Q1=["src","alt"],Z1={key:2},J1=["src","alt"],ef={key:3},tf=["src","alt"],nf={key:4},af=["src","alt"],sf={key:4,class:"evaluation"},of={class:"etoiles"},rf=["tabindex","title"],lf=["tabindex","title"],df=["tabindex","title"],uf=["tabindex","title"],ff={class:"badge"},cf=["tabindex","title","data-description"],hf={key:2,class:"media-type"},mf={class:"material-icons"},vf=["tabindex","title"],pf=["tabindex","title"],bf={key:5,class:"moderation"},gf=["tabindex"],yf={key:6,class:"moderation"},_f=["tabindex"],Ef={key:1,class:"bouton"};function Cf(e,t,i,a,s,d){return T(),w("div",O1,[i.item.titre!==""?(T(),w("div",{key:0,class:"titre",style:rt({background:e.$parent.eclaircirCouleur(i.item.couleur)})},[l("span",null,Z(i.item.titre),1),i.action==="organiser"?(T(),w("i",N1,"drag_indicator")):fe("",!0)],4)):fe("",!0),i.item.texte!==""?(T(),w("div",{key:1,class:"texte",innerHTML:i.item.texte},null,8,P1)):fe("",!0),i.item.media!==""&&i.action!=="organiser"?(T(),w("div",F1,[i.item.type==="image"?(T(),w("img",{key:0,role:"button",tabindex:i.tabindex,src:"/"+e.$parent.definirDossierFichiers(i.pad.id)+"/"+i.pad.id+"/"+i.item.media,loading:"lazy",alt:i.item.media,onClick:t[0]||(t[0]=r=>e.$parent.afficherVisionneuse(i.item)),onKeydown:t[1]||(t[1]=Q(r=>e.$parent.afficherVisionneuse(i.item),["enter"]))},null,40,V1)):i.item.type==="lien-image"?(T(),w("img",{key:1,role:"button",tabindex:i.tabindex,src:i.item.media,loading:"lazy",alt:i.item.media,onClick:t[2]||(t[2]=r=>e.$parent.afficherVisionneuse(i.item)),onKeydown:t[3]||(t[3]=Q(r=>e.$parent.afficherVisionneuse(i.item),["enter"]))},null,40,H1)):i.item.type==="audio"||i.item.type==="video"||i.item.type==="document"||i.item.type==="pdf"||i.item.type==="office"||i.item.type==="embed"?(T(),w("span",{key:2,role:"button",tabindex:i.tabindex,onClick:t[4]||(t[4]=r=>e.$parent.afficherVisionneuse(i.item)),onKeydown:t[5]||(t[5]=Q(r=>e.$parent.afficherVisionneuse(i.item),["enter"]))},[l("img",{class:Ne({vignette:e.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.definirVignette(i.item),alt:e.$parent.definirVignette(i.item),loading:"lazy"},null,10,K1)],40,q1)):i.item.type==="lien"?(T(),w("span",j1,[l("a",{href:i.item.media,target:"_blank"},[l("img",{class:Ne({vignette:e.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.definirVignette(i.item),alt:e.$parent.definirVignette(i.item),loading:"lazy"},null,10,U1)],8,X1)])):(T(),w("span",z1,[l("a",{href:"/"+e.$parent.definirDossierFichiers(i.pad.id)+"/"+i.pad.id+"/"+i.item.media,download:""},[l("img",{class:Ne({vignette:e.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.definirVignette(i.item),alt:e.$parent.definirVignette(i.item),loading:"lazy"},null,10,G1)],8,Y1)]))])):i.item.media!==""&&i.action==="organiser"?(T(),w("div",x1,[i.item.type==="image"?(T(),w("img",{key:0,src:"/"+e.$parent.definirDossierFichiers(i.pad.id)+"/"+i.pad.id+"/"+i.item.media,loading:"lazy",alt:i.item.media},null,8,W1)):i.item.type==="lien-image"?(T(),w("img",{key:1,src:i.item.media,loading:"lazy",alt:i.item.media},null,8,Q1)):i.item.type==="audio"||i.item.type==="video"||i.item.type==="document"||i.item.type==="pdf"||i.item.type==="office"||i.item.type==="embed"?(T(),w("span",Z1,[l("img",{class:Ne({vignette:e.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.definirVignette(i.item),loading:"lazy",alt:e.$parent.definirVignette(i.item)},null,10,J1)])):i.item.type==="lien"?(T(),w("span",ef,[l("img",{class:Ne({vignette:e.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.definirVignette(i.item),loading:"lazy",alt:e.$parent.definirVignette(i.item)},null,10,tf)])):(T(),w("span",nf,[l("img",{class:Ne({vignette:e.$parent.definirVignette(i.item).substring(0,5)!=="/img/"}),src:e.$parent.definirVignette(i.item),loading:"lazy",alt:e.$parent.definirVignette(i.item)},null,10,af)]))])):fe("",!0),i.pad.evaluations==="activees"?(T(),w("div",sf,[l("span",of,[(T(!0),w(Qe,null,Je(e.$parent.definirEvaluationCapsule(i.item.evaluations),r=>(T(),w("i",{class:Ne(["material-icons",{evalue:e.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!0}]),key:"etoilepleine_"+r},"star",2))),128)),(T(!0),w(Qe,null,Je(5-e.$parent.definirEvaluationCapsule(i.item.evaluations),r=>(T(),w("i",{class:Ne(["material-icons",{evalue:e.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!0}]),key:"etoilevide_"+r},"star_outline",2))),128)),l("span",null,"("+Z(i.item.evaluations.length)+")",1)]),e.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!1&&i.action!=="organiser"?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("evaluerCapsule"),style:rt({color:i.couleur}),onClick:t[6]||(t[6]=r=>e.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,"")),onKeydown:t[7]||(t[7]=Q(r=>e.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,""),["enter"]))},t[22]||(t[22]=[l("i",{class:"material-icons"},"add_comment",-1)]),44,rf)):e.$parent.verifierUtilisateurEvaluation(i.item.evaluations)===!0&&i.action!=="organiser"?(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("evaluerCapsule"),style:rt({color:i.couleur}),onClick:t[8]||(t[8]=r=>e.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,i.item.evaluations)),onKeydown:t[9]||(t[9]=Q(r=>e.$parent.ouvrirModaleEvaluations(i.item.bloc,i.item.titre,i.item.evaluations),["enter"]))},t[23]||(t[23]=[l("i",{class:"material-icons"},"rate_review",-1)]),44,lf)):fe("",!0)])):fe("",!0),l("div",{class:"action",style:rt({color:i.item.couleur})},[(i.item.identifiant===i.identifiant||i.admin||i.pad.contributions==="modifiables")&&i.action!=="organiser"?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("modifierCapsule"),onClick:t[10]||(t[10]=r=>e.$parent.ouvrirModaleBloc("edition",i.item,i.indexCol)),onKeydown:t[11]||(t[11]=Q(r=>e.$parent.ouvrirModaleBloc("edition",i.item,i.indexCol),["enter"]))},t[24]||(t[24]=[l("i",{class:"material-icons"},"edit",-1)]),40,df)):fe("",!0),i.pad.commentaires==="actives"?(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("commenterCapsule"),onClick:t[12]||(t[12]=r=>e.$parent.ouvrirModaleCommentaires(i.item.bloc,i.item.titre)),onKeydown:t[13]||(t[13]=Q(r=>e.$parent.ouvrirModaleCommentaires(i.item.bloc,i.item.titre),["enter"]))},[t[25]||(t[25]=l("i",{class:"material-icons"},"comment",-1)),l("span",ff,Z(i.item.commentaires),1)],40,uf)):fe("",!0),l("span",{class:"bouton info",role:"button",tabindex:i.tabindex,title:e.$t("informationsCapsule"),"data-description":e.$parent.definirDescription(i.item)},t[26]||(t[26]=[l("i",{class:"material-icons"},"info",-1)]),8,cf),i.item.media!==""?(T(),w("span",hf,[l("i",mf,Z(e.$parent.definirIconeMedia(i.item)),1)])):fe("",!0),i.admin&&i.pad.copieBloc==="activee"&&(i.statut==="utilisateur"||i.digidrive)&&i.action!=="organiser"?(T(),w("span",{key:3,class:"bouton",role:"button",tabindex:i.tabindex,title:e.$t("copierCapsule"),onClick:t[14]||(t[14]=r=>e.$parent.afficherEnvoyerBloc(i.item.bloc,i.item.titre)),onKeydown:t[15]||(t[15]=Q(r=>e.$parent.afficherEnvoyerBloc(i.item.bloc,i.item.titre),["enter"]))},t[27]||(t[27]=[l("i",{class:"material-icons"},"send",-1)]),40,vf)):fe("",!0),(i.item.identifiant===i.identifiant||i.admin)&&i.action!=="organiser"?(T(),w("span",{key:4,class:"bouton supprimer",role:"button",tabindex:i.tabindex,title:e.$t("supprimerCapsule"),onClick:t[16]||(t[16]=r=>e.$parent.afficherSupprimerBloc(i.item.bloc,i.item.titre,i.indexCol)),onKeydown:t[17]||(t[17]=Q(r=>e.$parent.afficherSupprimerBloc(i.item.bloc,i.item.titre,i.indexCol),["enter"]))},t[28]||(t[28]=[l("i",{class:"material-icons"},"delete",-1)]),40,pf)):fe("",!0)],4),i.item.visibilite==="privee"&&i.admin?(T(),w("div",bf,[l("span",{class:"bouton",role:"button",tabindex:i.tabindex,onClick:t[18]||(t[18]=r=>e.$parent.autoriserBloc(i.item,"privee")),onKeydown:t[19]||(t[19]=Q(r=>e.$parent.autoriserBloc(i.item,"privee"),["enter"]))},Z(e.$t("afficherCapsule")),41,gf)])):i.pad.contributions==="moderees"&&i.item.visibilite==="masquee"?(T(),w("div",yf,[i.admin?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:i.tabindex,onClick:t[20]||(t[20]=r=>e.$parent.autoriserBloc(i.item,"moderee")),onKeydown:t[21]||(t[21]=Q(r=>e.$parent.autoriserBloc(i.item,"moderee"),["enter"]))},Z(e.$t("validerCapsule")),41,_f)):i.item.identifiant===i.identifiant?(T(),w("span",Ef,Z(e.$t("enAttenteModeration")),1)):fe("",!0)])):fe("",!0)])}const Tf=ds(L1,[["render",Cf]]);const wf={name:"Emojis",props:{type:String,diaporama:Boolean,tabindex:Number},data(){return{emoticones:["😀","😃","😄","😁","😆","😅","😂","🤣","🥲","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🥸","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","🤡","👻","💀","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","💯","✔️","☀️","✨","🎉"],gestes:["👋","🤚","✋","👌","🤌","🤏","🤞","🤟","🤘","🤙","👈","👉","👆","👇","👍","👎","✊","👊","🤛","🤜","👏","🙌","👐","🤲","🤝","🙏","💅","🤳","💪","🦾","🦵","🦿","🦶","👣","👂","🦻","👃","🫀","🫁","🧠","🦷","🦴","👀","👅","👄","💋","🩸"],natures:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐻","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🪱","🐛","🦋","🐌","🐞","🐜","🪰","🪲","🪳","🦟","🦗","🕷","🕸","🦂","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦞","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🐊","🐅","🐆","🦓","🦍","🦧","🦣","🐘","🦛","🦏","🐪","🐫","🦒","🦘","🦬","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🦙","🐐","🦌","🐕","🐩","🦮","🐕","🦺","🐈","🪶","🐓","🦃","🦤","🦚","🦜","🦢","🦩","🐇","🦝","🦨","🦡","🦫","🦦","🦥","🐁","🐀","🐿","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🪵","🌱","🌿","🍀","🎍","🪴","🎋","🍃","🍂","🍁","🍄","🐚","🪨","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","🪐","💫","⭐","🌟","✨","💥","🔥","🌈","⛅","⛄","💨","💧","💦","🌊"],aliments:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🫑","🌽","🥕","🫒","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🌰","🥜","🍯","🥛","🍼","🫖","🍵","🧃","🥤","🧋","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍾","🧊","🥄","🍴","🥣","🥡","🥢","🧂"],objets:["🎍","💝","🎎","🎒","🎓","🎏","🎆","🎇","🎐","🎑","🎃","👻","🎅","🎄","🎁","🎋","🎉","🎊","🎈","🎌","🔮","🎥","📷","📹","📼","💿","📀","💽","💾","💻","📱","📞","📟","📠","📡","📺","📻","🔊","🔔","📢","📣","⏳","⌛","⏰","⌚","🔓","🔒","🔏","🔐","🔑","🔎","💡","🔦","🔌","🔋","🔍","🛀","🚽","🔧","🔩","🔨","🚪","🚬","💣","🔫","🔪","💊","💉","💰","💴","💵","💳","💸","📲","📧","📥","📤","📩","📨","📫","📪","📮","📦","📝","📄","📃","📑","📊","📈","📉","📜","📋","📅","📆","📇","📁","📂","📌","📎","📏","📐","📕","📗","📘","📙","📓","📔","📒","📚","📖","🔖","📛","📰","🎨","🎬","🎤","🎧","🎼","🎵","🎶","🎹","🎻","🎺","🎷","🎸","👾","🎮","🃏","🎴","🀄","🎲","🎯","🏈","🏀","⚽","⚾","🎾","🎱","🎳","⛳","🏁","🏆","🎿","🏂","🏊","🏄","🎣","🍵","🍶","👑"],lieux:["🏠","🏡","🏫","🏢","🏣","🏥","🏦","🏪","🏩","🏨","💒","⛪","🏬","🌇","🌆","🏯","🏰","⛺","🏭","🗼","🗾","🗻","🌄","🌅","🌃","🗽","🌉","🎠","🎡","⛲","🎢","🚢","⛵","🚤","🚀","💺","🚉","🚄","🚅","🚇","🚃","🚌","🚙","🚗","🚕","🚚","🚨","🚓","🚒","🚑","🚲","💈","🚏","🎫","🚥","🚧","🔰","⛽","🏮","🎰","🗿","🎪","🎭","📍","🚩"]}},methods:{definirClasses(){return this.diaporama===!0?this.type+" diaporama":this.type},insererEmoji(e){this.$emit("emoji",e)}}},Sf={class:"categorie"},kf=["tabindex","onClick","onKeydown"],Af={class:"categorie"},Mf=["tabindex","onClick","onKeydown"],If={class:"categorie"},Rf=["tabindex","onClick","onKeydown"],Bf={class:"categorie"},$f=["tabindex","onClick","onKeydown"],Df={class:"categorie"},Lf=["tabindex","onClick","onKeydown"],Of={class:"categorie"},Nf=["tabindex","onClick","onKeydown"];function Pf(e,t,i,a,s,d){return T(),w("div",{id:"emojis",class:Ne(d.definirClasses())},[l("h5",null,Z(e.$t("emoticones")),1),l("div",Sf,[(T(!0),w(Qe,null,Je(s.emoticones,(r,f)=>(T(),w("span",{role:"button",tabindex:i.tabindex,onClick:E=>d.insererEmoji(r),onKeydown:Q(E=>d.insererEmoji(r),["enter"]),key:"emoticone_"+f},Z(r),41,kf))),128))]),l("h5",null,Z(e.$t("gestesEtCorps")),1),l("div",Af,[(T(!0),w(Qe,null,Je(s.gestes,(r,f)=>(T(),w("span",{role:"button",tabindex:i.tabindex,onClick:E=>d.insererEmoji(r),onKeydown:Q(E=>d.insererEmoji(r),["enter"]),key:"geste_"+f},Z(r),41,Mf))),128))]),l("h5",null,Z(e.$t("nature")),1),l("div",If,[(T(!0),w(Qe,null,Je(s.natures,(r,f)=>(T(),w("span",{role:"button",tabindex:i.tabindex,onClick:E=>d.insererEmoji(r),onKeydown:Q(E=>d.insererEmoji(r),["enter"]),key:"nature_"+f},Z(r),41,Rf))),128))]),l("h5",null,Z(e.$t("aliments")),1),l("div",Bf,[(T(!0),w(Qe,null,Je(s.aliments,(r,f)=>(T(),w("span",{role:"button",tabindex:i.tabindex,onClick:E=>d.insererEmoji(r),onKeydown:Q(E=>d.insererEmoji(r),["enter"]),key:"aliment_"+f},Z(r),41,$f))),128))]),l("h5",null,Z(e.$t("objets")),1),l("div",Df,[(T(!0),w(Qe,null,Je(s.objets,(r,f)=>(T(),w("span",{role:"button",tabindex:i.tabindex,onClick:E=>d.insererEmoji(r),onKeydown:Q(E=>d.insererEmoji(r),["enter"]),key:"objet_"+f},Z(r),41,Lf))),128))]),l("h5",null,Z(e.$t("lieux")),1),l("div",Of,[(T(!0),w(Qe,null,Je(s.lieux,(r,f)=>(T(),w("span",{role:"button",tabindex:i.tabindex,onClick:E=>d.insererEmoji(r),onKeydown:Q(E=>d.insererEmoji(r),["enter"]),key:"lieu_"+f},Z(r),41,Nf))),128))])],2)}const Ff=ds(wf,[["render",Pf],["__scopeId","data-v-c5e823db"]]);/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Fr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,a)}return i}function Fi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Fr(Object(i),!0).forEach(function(a){Vf(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fr(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Ca(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ca=function(t){return typeof t}:Ca=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ca(e)}function Vf(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ji(){return ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ji.apply(this,arguments)}function Hf(e,t){if(e==null)return{};var i={},a=Object.keys(e),s,d;for(d=0;d<a.length;d++)s=a[d],!(t.indexOf(s)>=0)&&(i[s]=e[s]);return i}function qf(e,t){if(e==null)return{};var i=Hf(e,t),a,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)a=d[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var Kf="1.14.0";function qi(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Xi=qi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zn=qi(/Edge/i),Vr=qi(/firefox/i),qn=qi(/safari/i)&&!qi(/chrome/i)&&!qi(/android/i),Il=qi(/iP(ad|od|hone)/i),jf=qi(/chrome/i)&&qi(/android/i),Rl={capture:!1,passive:!1};function lt(e,t,i){e.addEventListener(t,i,!Xi&&Rl)}function at(e,t,i){e.removeEventListener(t,i,!Xi&&Rl)}function as(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Xf(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ni(e,t,i,a){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&as(e,t):as(e,t))||a&&e===i)return e;if(e===i)break}while(e=Xf(e))}return null}var Hr=/\s+/g;function li(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Hr," ").replace(" "+t+" "," ");e.className=(a+(i?" "+t:"")).replace(Hr," ")}}function Ue(e,t,i){var a=e&&e.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in a)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),a[t]=i+(typeof i=="string"?"":"px")}}function Sn(e,t){var i="";if(typeof e=="string")i=e;else do{var a=Ue(e,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function Bl(e,t,i){if(e){var a=e.getElementsByTagName(t),s=0,d=a.length;if(i)for(;s<d;s++)i(a[s],s);return a}return[]}function Pi(){var e=document.scrollingElement;return e||document.documentElement}function Mt(e,t,i,a,s){if(!(!e.getBoundingClientRect&&e!==window)){var d,r,f,E,F,b,p;if(e!==window&&e.parentNode&&e!==Pi()?(d=e.getBoundingClientRect(),r=d.top,f=d.left,E=d.bottom,F=d.right,b=d.height,p=d.width):(r=0,f=0,E=window.innerHeight,F=window.innerWidth,b=window.innerHeight,p=window.innerWidth),(t||i)&&e!==window&&(s=s||e.parentNode,!Xi))do if(s&&s.getBoundingClientRect&&(Ue(s,"transform")!=="none"||i&&Ue(s,"position")!=="static")){var B=s.getBoundingClientRect();r-=B.top+parseInt(Ue(s,"border-top-width")),f-=B.left+parseInt(Ue(s,"border-left-width")),E=r+d.height,F=f+d.width;break}while(s=s.parentNode);if(a&&e!==window){var te=Sn(s||e),H=te&&te.a,n=te&&te.d;te&&(r/=n,f/=H,p/=H,b/=n,E=r+b,F=f+p)}return{top:r,left:f,bottom:E,right:F,width:p,height:b}}}function qr(e,t,i){for(var a=Ji(e,!0),s=Mt(e)[t];a;){var d=Mt(a)[i],r=void 0;if(i==="top"||i==="left"?r=s>=d:r=s<=d,!r)return a;if(a===Pi())break;a=Ji(a,!1)}return!1}function An(e,t,i,a){for(var s=0,d=0,r=e.children;d<r.length;){if(r[d].style.display!=="none"&&r[d]!==ze.ghost&&(a||r[d]!==ze.dragged)&&Ni(r[d],i.draggable,e,!1)){if(s===t)return r[d];s++}d++}return null}function Ko(e,t){for(var i=e.lastElementChild;i&&(i===ze.ghost||Ue(i,"display")==="none"||t&&!as(i,t));)i=i.previousElementSibling;return i||null}function gi(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==ze.clone&&(!t||as(e,t))&&i++;return i}function Kr(e){var t=0,i=0,a=Pi();if(e)do{var s=Sn(e),d=s.a,r=s.d;t+=e.scrollLeft*d,i+=e.scrollTop*r}while(e!==a&&(e=e.parentNode));return[t,i]}function Uf(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[i][a])return Number(i)}return-1}function Ji(e,t){if(!e||!e.getBoundingClientRect)return Pi();var i=e,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Ue(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Pi();if(a||t)return i;a=!0}}while(i=i.parentNode);return Pi()}function zf(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Zs(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Kn;function $l(e,t){return function(){if(!Kn){var i=arguments,a=this;i.length===1?e.call(a,i[0]):e.apply(a,i),Kn=setTimeout(function(){Kn=void 0},t)}}}function Yf(){clearTimeout(Kn),Kn=void 0}function Dl(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function Ll(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var fi="Sortable"+new Date().getTime();function Gf(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(s){if(!(Ue(s,"display")==="none"||s===ze.ghost)){e.push({target:s,rect:Mt(s)});var d=Fi({},e[e.length-1].rect);if(s.thisAnimationDuration){var r=Sn(s,!0);r&&(d.top-=r.f,d.left-=r.e)}s.fromRect=d}})}},addAnimationState:function(a){e.push(a)},removeAnimationState:function(a){e.splice(Uf(e,{target:a}),1)},animateAll:function(a){var s=this;if(!this.options.animation){clearTimeout(t),typeof a=="function"&&a();return}var d=!1,r=0;e.forEach(function(f){var E=0,F=f.target,b=F.fromRect,p=Mt(F),B=F.prevFromRect,te=F.prevToRect,H=f.rect,n=Sn(F,!0);n&&(p.top-=n.f,p.left-=n.e),F.toRect=p,F.thisAnimationDuration&&Zs(B,p)&&!Zs(b,p)&&(H.top-p.top)/(H.left-p.left)===(b.top-p.top)/(b.left-p.left)&&(E=Wf(H,B,te,s.options)),Zs(p,b)||(F.prevFromRect=b,F.prevToRect=p,E||(E=s.options.animation),s.animate(F,H,p,E)),E&&(d=!0,r=Math.max(r,E),clearTimeout(F.animationResetTimer),F.animationResetTimer=setTimeout(function(){F.animationTime=0,F.prevFromRect=null,F.fromRect=null,F.prevToRect=null,F.thisAnimationDuration=null},E),F.thisAnimationDuration=E)}),clearTimeout(t),d?t=setTimeout(function(){typeof a=="function"&&a()},r):typeof a=="function"&&a(),e=[]},animate:function(a,s,d,r){if(r){Ue(a,"transition",""),Ue(a,"transform","");var f=Sn(this.el),E=f&&f.a,F=f&&f.d,b=(s.left-d.left)/(E||1),p=(s.top-d.top)/(F||1);a.animatingX=!!b,a.animatingY=!!p,Ue(a,"transform","translate3d("+b+"px,"+p+"px,0)"),this.forRepaintDummy=xf(a),Ue(a,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Ue(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){Ue(a,"transition",""),Ue(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},r)}}}}function xf(e){return e.offsetWidth}function Wf(e,t,i,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*a.animation}var yn=[],Js={initializeByDefault:!0},Jn={mount:function(t){for(var i in Js)Js.hasOwnProperty(i)&&!(i in t)&&(t[i]=Js[i]);yn.forEach(function(a){if(a.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),yn.push(t)},pluginEvent:function(t,i,a){var s=this;this.eventCanceled=!1,a.cancel=function(){s.eventCanceled=!0};var d=t+"Global";yn.forEach(function(r){i[r.pluginName]&&(i[r.pluginName][d]&&i[r.pluginName][d](Fi({sortable:i},a)),i.options[r.pluginName]&&i[r.pluginName][t]&&i[r.pluginName][t](Fi({sortable:i},a)))})},initializePlugins:function(t,i,a,s){yn.forEach(function(f){var E=f.pluginName;if(!(!t.options[E]&&!f.initializeByDefault)){var F=new f(t,i,t.options);F.sortable=t,F.options=t.options,t[E]=F,ji(a,F.defaults)}});for(var d in t.options)if(t.options.hasOwnProperty(d)){var r=this.modifyOption(t,d,t.options[d]);typeof r<"u"&&(t.options[d]=r)}},getEventProperties:function(t,i){var a={};return yn.forEach(function(s){typeof s.eventProperties=="function"&&ji(a,s.eventProperties.call(i[s.pluginName],t))}),a},modifyOption:function(t,i,a){var s;return yn.forEach(function(d){t[d.pluginName]&&d.optionListeners&&typeof d.optionListeners[i]=="function"&&(s=d.optionListeners[i].call(t[d.pluginName],a))}),s}};function Qf(e){var t=e.sortable,i=e.rootEl,a=e.name,s=e.targetEl,d=e.cloneEl,r=e.toEl,f=e.fromEl,E=e.oldIndex,F=e.newIndex,b=e.oldDraggableIndex,p=e.newDraggableIndex,B=e.originalEvent,te=e.putSortable,H=e.extraEventProperties;if(t=t||i&&i[fi],!!t){var n,$=t.options,_="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Xi&&!Zn?n=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(n=document.createEvent("Event"),n.initEvent(a,!0,!0)),n.to=r||i,n.from=f||i,n.item=s||i,n.clone=d,n.oldIndex=E,n.newIndex=F,n.oldDraggableIndex=b,n.newDraggableIndex=p,n.originalEvent=B,n.pullMode=te?te.lastPutMode:void 0;var C=Fi(Fi({},H),Jn.getEventProperties(a,t));for(var k in C)n[k]=C[k];i&&i.dispatchEvent(n),$[_]&&$[_].call(t,n)}}var Zf=["evt"],jt=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.evt,d=qf(a,Zf);Jn.pluginEvent.bind(ze)(t,i,Fi({dragEl:ke,parentEl:bt,ghostEl:We,rootEl:vt,nextEl:fn,lastDownEl:Ta,cloneEl:yt,cloneHidden:Wi,dragStarted:On,putSortable:It,activeSortable:ze.active,originalEvent:s,oldIndex:wn,oldDraggableIndex:jn,newIndex:di,newDraggableIndex:Gi,hideGhostForTarget:Fl,unhideGhostForTarget:Vl,cloneNowHidden:function(){Wi=!0},cloneNowShown:function(){Wi=!1},dispatchSortableEvent:function(f){Nt({sortable:i,name:f,originalEvent:s})}},d))};function Nt(e){Qf(Fi({putSortable:It,cloneEl:yt,targetEl:ke,rootEl:vt,oldIndex:wn,oldDraggableIndex:jn,newIndex:di,newDraggableIndex:Gi},e))}var ke,bt,We,vt,fn,Ta,yt,Wi,wn,di,jn,Gi,pa,It,Cn=!1,ss=!1,os=[],dn,wi,eo,to,jr,Xr,On,_n,Xn,Un=!1,ba=!1,wa,Dt,io=[],Eo=!1,rs=[],ps=typeof document<"u",ga=Il,Ur=Zn||Xi?"cssFloat":"float",Jf=ps&&!jf&&!Il&&"draggable"in document.createElement("div"),Ol=function(){if(ps){if(Xi)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Nl=function(t,i){var a=Ue(t),s=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),d=An(t,0,i),r=An(t,1,i),f=d&&Ue(d),E=r&&Ue(r),F=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Mt(d).width,b=E&&parseInt(E.marginLeft)+parseInt(E.marginRight)+Mt(r).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(d&&f.float&&f.float!=="none"){var p=f.float==="left"?"left":"right";return r&&(E.clear==="both"||E.clear===p)?"vertical":"horizontal"}return d&&(f.display==="block"||f.display==="flex"||f.display==="table"||f.display==="grid"||F>=s&&a[Ur]==="none"||r&&a[Ur]==="none"&&F+b>s)?"vertical":"horizontal"},ec=function(t,i,a){var s=a?t.left:t.top,d=a?t.right:t.bottom,r=a?t.width:t.height,f=a?i.left:i.top,E=a?i.right:i.bottom,F=a?i.width:i.height;return s===f||d===E||s+r/2===f+F/2},tc=function(t,i){var a;return os.some(function(s){var d=s[fi].options.emptyInsertThreshold;if(!(!d||Ko(s))){var r=Mt(s),f=t>=r.left-d&&t<=r.right+d,E=i>=r.top-d&&i<=r.bottom+d;if(f&&E)return a=s}}),a},Pl=function(t){function i(d,r){return function(f,E,F,b){var p=f.options.group.name&&E.options.group.name&&f.options.group.name===E.options.group.name;if(d==null&&(r||p))return!0;if(d==null||d===!1)return!1;if(r&&d==="clone")return d;if(typeof d=="function")return i(d(f,E,F,b),r)(f,E,F,b);var B=(r?f:E).options.group.name;return d===!0||typeof d=="string"&&d===B||d.join&&d.indexOf(B)>-1}}var a={},s=t.group;(!s||Ca(s)!="object")&&(s={name:s}),a.name=s.name,a.checkPull=i(s.pull,!0),a.checkPut=i(s.put),a.revertClone=s.revertClone,t.group=a},Fl=function(){!Ol&&We&&Ue(We,"display","none")},Vl=function(){!Ol&&We&&Ue(We,"display","")};ps&&document.addEventListener("click",function(e){if(ss)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ss=!1,!1},!0);var un=function(t){if(ke){t=t.touches?t.touches[0]:t;var i=tc(t.clientX,t.clientY);if(i){var a={};for(var s in t)t.hasOwnProperty(s)&&(a[s]=t[s]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[fi]._onDragOver(a)}}},ic=function(t){ke&&ke.parentNode[fi]._isOutsideThisEl(t.target)};function ze(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ji({},t),e[fi]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Nl(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,f){r.setData("Text",f.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ze.supportPointer!==!1&&"PointerEvent"in window&&!qn,emptyInsertThreshold:5};Jn.initializePlugins(this,e,i);for(var a in i)!(a in t)&&(t[a]=i[a]);Pl(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:Jf,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?lt(e,"pointerdown",this._onTapStart):(lt(e,"mousedown",this._onTapStart),lt(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(lt(e,"dragover",this),lt(e,"dragenter",this)),os.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ji(this,Gf())}ze.prototype={constructor:ze,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(_n=null)},_getDirection:function(t,i){return typeof this.options.direction=="function"?this.options.direction.call(this,t,i,ke):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,a=this.el,s=this.options,d=s.preventOnFilter,r=t.type,f=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,E=(f||t).target,F=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||E,b=s.filter;if(uc(a),!ke&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||s.disabled)&&!F.isContentEditable&&!(!this.nativeDraggable&&qn&&E&&E.tagName.toUpperCase()==="SELECT")&&(E=Ni(E,s.draggable,a,!1),!(E&&E.animated)&&Ta!==E)){if(wn=gi(E),jn=gi(E,s.draggable),typeof b=="function"){if(b.call(this,t,E,this)){Nt({sortable:i,rootEl:F,name:"filter",targetEl:E,toEl:a,fromEl:a}),jt("filter",i,{evt:t}),d&&t.cancelable&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(p){if(p=Ni(F,p.trim(),a,!1),p)return Nt({sortable:i,rootEl:p,name:"filter",targetEl:E,fromEl:a,toEl:a}),jt("filter",i,{evt:t}),!0}),b)){d&&t.cancelable&&t.preventDefault();return}s.handle&&!Ni(F,s.handle,a,!1)||this._prepareDragStart(t,f,E)}}},_prepareDragStart:function(t,i,a){var s=this,d=s.el,r=s.options,f=d.ownerDocument,E;if(a&&!ke&&a.parentNode===d){var F=Mt(a);if(vt=d,ke=a,bt=ke.parentNode,fn=ke.nextSibling,Ta=a,pa=r.group,ze.dragged=ke,dn={target:ke,clientX:(i||t).clientX,clientY:(i||t).clientY},jr=dn.clientX-F.left,Xr=dn.clientY-F.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,ke.style["will-change"]="all",E=function(){if(jt("delayEnded",s,{evt:t}),ze.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Vr&&s.nativeDraggable&&(ke.draggable=!0),s._triggerDragStart(t,i),Nt({sortable:s,name:"choose",originalEvent:t}),li(ke,r.chosenClass,!0)},r.ignore.split(",").forEach(function(b){Bl(ke,b.trim(),no)}),lt(f,"dragover",un),lt(f,"mousemove",un),lt(f,"touchmove",un),lt(f,"mouseup",s._onDrop),lt(f,"touchend",s._onDrop),lt(f,"touchcancel",s._onDrop),Vr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ke.draggable=!0),jt("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Zn||Xi))){if(ze.eventCanceled){this._onDrop();return}lt(f,"mouseup",s._disableDelayedDrag),lt(f,"touchend",s._disableDelayedDrag),lt(f,"touchcancel",s._disableDelayedDrag),lt(f,"mousemove",s._delayedDragTouchMoveHandler),lt(f,"touchmove",s._delayedDragTouchMoveHandler),r.supportPointer&&lt(f,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(E,r.delay)}else E()}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ke&&no(ke),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;at(t,"mouseup",this._disableDelayedDrag),at(t,"touchend",this._disableDelayedDrag),at(t,"touchcancel",this._disableDelayedDrag),at(t,"mousemove",this._delayedDragTouchMoveHandler),at(t,"touchmove",this._delayedDragTouchMoveHandler),at(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||t.pointerType=="touch"&&t,!this.nativeDraggable||i?this.options.supportPointer?lt(document,"pointermove",this._onTouchMove):i?lt(document,"touchmove",this._onTouchMove):lt(document,"mousemove",this._onTouchMove):(lt(ke,"dragend",this),lt(vt,"dragstart",this._onDragStart));try{document.selection?Sa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,i){if(Cn=!1,vt&&ke){jt("dragStarted",this,{evt:i}),this.nativeDraggable&&lt(document,"dragover",ic);var a=this.options;!t&&li(ke,a.dragClass,!1),li(ke,a.ghostClass,!0),ze.active=this,t&&this._appendGhost(),Nt({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(wi){this._lastX=wi.clientX,this._lastY=wi.clientY,Fl();for(var t=document.elementFromPoint(wi.clientX,wi.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(wi.clientX,wi.clientY),t!==i);)i=t;if(ke.parentNode[fi]._isOutsideThisEl(t),i)do{if(i[fi]){var a=void 0;if(a=i[fi]._onDragOver({clientX:wi.clientX,clientY:wi.clientY,target:t,rootEl:i}),a&&!this.options.dragoverBubble)break}t=i}while(i=i.parentNode);Vl()}},_onTouchMove:function(t){if(dn){var i=this.options,a=i.fallbackTolerance,s=i.fallbackOffset,d=t.touches?t.touches[0]:t,r=We&&Sn(We,!0),f=We&&r&&r.a,E=We&&r&&r.d,F=ga&&Dt&&Kr(Dt),b=(d.clientX-dn.clientX+s.x)/(f||1)+(F?F[0]-io[0]:0)/(f||1),p=(d.clientY-dn.clientY+s.y)/(E||1)+(F?F[1]-io[1]:0)/(E||1);if(!ze.active&&!Cn){if(a&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<a)return;this._onDragStart(t,!0)}if(We){r?(r.e+=b-(eo||0),r.f+=p-(to||0)):r={a:1,b:0,c:0,d:1,e:b,f:p};var B="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Ue(We,"webkitTransform",B),Ue(We,"mozTransform",B),Ue(We,"msTransform",B),Ue(We,"transform",B),eo=b,to=p,wi=d}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!We){var t=this.options.fallbackOnBody?document.body:vt,i=Mt(ke,!0,ga,!0,t),a=this.options;if(ga){for(Dt=t;Ue(Dt,"position")==="static"&&Ue(Dt,"transform")==="none"&&Dt!==document;)Dt=Dt.parentNode;Dt!==document.body&&Dt!==document.documentElement?(Dt===document&&(Dt=Pi()),i.top+=Dt.scrollTop,i.left+=Dt.scrollLeft):Dt=Pi(),io=Kr(Dt)}We=ke.cloneNode(!0),li(We,a.ghostClass,!1),li(We,a.fallbackClass,!0),li(We,a.dragClass,!0),Ue(We,"transition",""),Ue(We,"transform",""),Ue(We,"box-sizing","border-box"),Ue(We,"margin",0),Ue(We,"top",i.top),Ue(We,"left",i.left),Ue(We,"width",i.width),Ue(We,"height",i.height),Ue(We,"opacity","0.8"),Ue(We,"position",ga?"absolute":"fixed"),Ue(We,"zIndex","100000"),Ue(We,"pointerEvents","none"),ze.ghost=We,t.appendChild(We),Ue(We,"transform-origin",jr/parseInt(We.style.width)*100+"% "+Xr/parseInt(We.style.height)*100+"%")}},_onDragStart:function(t,i){var a=this,s=t.dataTransfer,d=a.options;if(jt("dragStart",this,{evt:t}),ze.eventCanceled){this._onDrop();return}jt("setupClone",this),ze.eventCanceled||(yt=Ll(ke),yt.draggable=!1,yt.style["will-change"]="",this._hideClone(),li(yt,this.options.chosenClass,!1),ze.clone=yt),a.cloneId=Sa(function(){jt("clone",a),!ze.eventCanceled&&(a.options.removeCloneOnHide||vt.insertBefore(yt,ke),a._hideClone(),Nt({sortable:a,name:"clone"}))}),!i&&li(ke,d.dragClass,!0),i?(ss=!0,a._loopId=setInterval(a._emulateDragOver,50)):(at(document,"mouseup",a._onDrop),at(document,"touchend",a._onDrop),at(document,"touchcancel",a._onDrop),s&&(s.effectAllowed="move",d.setData&&d.setData.call(a,s,ke)),lt(document,"drop",a),Ue(ke,"transform","translateZ(0)")),Cn=!0,a._dragStartId=Sa(a._dragStarted.bind(a,i,t)),lt(document,"selectstart",a),On=!0,qn&&Ue(document.body,"user-select","none")},_onDragOver:function(t){var i=this.el,a=t.target,s,d,r,f=this.options,E=f.group,F=ze.active,b=pa===E,p=f.sort,B=It||F,te,H=this,n=!1;if(Eo)return;function $(X,Y){jt(X,H,Fi({evt:t,isOwner:b,axis:te?"vertical":"horizontal",revert:r,dragRect:s,targetRect:d,canSort:p,fromSortable:B,target:a,completed:C,onMove:function(L,c){return ya(vt,i,ke,s,L,Mt(L),t,c)},changed:k},Y))}function _(){$("dragOverAnimationCapture"),H.captureAnimationState(),H!==B&&B.captureAnimationState()}function C(X){return $("dragOverCompleted",{insertion:X}),X&&(b?F._hideClone():F._showClone(H),H!==B&&(li(ke,It?It.options.ghostClass:F.options.ghostClass,!1),li(ke,f.ghostClass,!0)),It!==H&&H!==ze.active?It=H:H===ze.active&&It&&(It=null),B===H&&(H._ignoreWhileAnimating=a),H.animateAll(function(){$("dragOverAnimationComplete"),H._ignoreWhileAnimating=null}),H!==B&&(B.animateAll(),B._ignoreWhileAnimating=null)),(a===ke&&!ke.animated||a===i&&!a.animated)&&(_n=null),!f.dragoverBubble&&!t.rootEl&&a!==document&&(ke.parentNode[fi]._isOutsideThisEl(t.target),!X&&un(t)),!f.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),n=!0}function k(){di=gi(ke),Gi=gi(ke,f.draggable),Nt({sortable:H,name:"change",toEl:i,newIndex:di,newDraggableIndex:Gi,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),a=Ni(a,f.draggable,i,!0),$("dragOver"),ze.eventCanceled)return n;if(ke.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||H._ignoreWhileAnimating===a)return C(!1);if(ss=!1,F&&!f.disabled&&(b?p||(r=bt!==vt):It===this||(this.lastPutMode=pa.checkPull(this,F,ke,t))&&E.checkPut(this,F,ke,t))){if(te=this._getDirection(t,a)==="vertical",s=Mt(ke),$("dragOverValid"),ze.eventCanceled)return n;if(r)return bt=vt,_(),this._hideClone(),$("revert"),ze.eventCanceled||(fn?vt.insertBefore(ke,fn):vt.appendChild(ke)),C(!0);var R=Ko(i,f.draggable);if(!R||oc(t,te,this)&&!R.animated){if(R===ke)return C(!1);if(R&&i===t.target&&(a=R),a&&(d=Mt(a)),ya(vt,i,ke,s,a,d,t,!!a)!==!1)return _(),i.appendChild(ke),bt=i,k(),C(!0)}else if(R&&sc(t,te,this)){var o=An(i,0,f,!0);if(o===ke)return C(!1);if(a=o,d=Mt(a),ya(vt,i,ke,s,a,d,t,!1)!==!1)return _(),i.insertBefore(ke,o),bt=i,k(),C(!0)}else if(a.parentNode===i){d=Mt(a);var y=0,O,x=ke.parentNode!==i,z=!ec(ke.animated&&ke.toRect||s,a.animated&&a.toRect||d,te),q=te?"top":"left",ee=qr(a,"top","top")||qr(ke,"top","top"),ae=ee?ee.scrollTop:void 0;_n!==a&&(O=d[q],Un=!1,ba=!z&&f.invertSwap||x),y=rc(t,a,d,te,z?1:f.swapThreshold,f.invertedSwapThreshold==null?f.swapThreshold:f.invertedSwapThreshold,ba,_n===a);var I;if(y!==0){var m=gi(ke);do m-=y,I=bt.children[m];while(I&&(Ue(I,"display")==="none"||I===We))}if(y===0||I===a)return C(!1);_n=a,Xn=y;var N=a.nextElementSibling,K=!1;K=y===1;var W=ya(vt,i,ke,s,a,d,t,K);if(W!==!1)return(W===1||W===-1)&&(K=W===1),Eo=!0,setTimeout(ac,30),_(),K&&!N?i.appendChild(ke):a.parentNode.insertBefore(ke,K?N:a),ee&&Dl(ee,0,ae-ee.scrollTop),bt=ke.parentNode,O!==void 0&&!ba&&(wa=Math.abs(O-Mt(a)[q])),k(),C(!0)}if(i.contains(ke))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){at(document,"mousemove",this._onTouchMove),at(document,"touchmove",this._onTouchMove),at(document,"pointermove",this._onTouchMove),at(document,"dragover",un),at(document,"mousemove",un),at(document,"touchmove",un)},_offUpEvents:function(){var t=this.el.ownerDocument;at(t,"mouseup",this._onDrop),at(t,"touchend",this._onDrop),at(t,"pointerup",this._onDrop),at(t,"touchcancel",this._onDrop),at(document,"selectstart",this)},_onDrop:function(t){var i=this.el,a=this.options;if(di=gi(ke),Gi=gi(ke,a.draggable),jt("drop",this,{evt:t}),bt=ke&&ke.parentNode,di=gi(ke),Gi=gi(ke,a.draggable),ze.eventCanceled){this._nulling();return}Cn=!1,ba=!1,Un=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Co(this.cloneId),Co(this._dragStartId),this.nativeDraggable&&(at(document,"drop",this),at(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qn&&Ue(document.body,"user-select",""),Ue(ke,"transform",""),t&&(On&&(t.cancelable&&t.preventDefault(),!a.dropBubble&&t.stopPropagation()),We&&We.parentNode&&We.parentNode.removeChild(We),(vt===bt||It&&It.lastPutMode!=="clone")&&yt&&yt.parentNode&&yt.parentNode.removeChild(yt),ke&&(this.nativeDraggable&&at(ke,"dragend",this),no(ke),ke.style["will-change"]="",On&&!Cn&&li(ke,It?It.options.ghostClass:this.options.ghostClass,!1),li(ke,this.options.chosenClass,!1),Nt({sortable:this,name:"unchoose",toEl:bt,newIndex:null,newDraggableIndex:null,originalEvent:t}),vt!==bt?(di>=0&&(Nt({rootEl:bt,name:"add",toEl:bt,fromEl:vt,originalEvent:t}),Nt({sortable:this,name:"remove",toEl:bt,originalEvent:t}),Nt({rootEl:bt,name:"sort",toEl:bt,fromEl:vt,originalEvent:t}),Nt({sortable:this,name:"sort",toEl:bt,originalEvent:t})),It&&It.save()):di!==wn&&di>=0&&(Nt({sortable:this,name:"update",toEl:bt,originalEvent:t}),Nt({sortable:this,name:"sort",toEl:bt,originalEvent:t})),ze.active&&((di==null||di===-1)&&(di=wn,Gi=jn),Nt({sortable:this,name:"end",toEl:bt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){jt("nulling",this),vt=ke=bt=We=fn=yt=Ta=Wi=dn=wi=On=di=Gi=wn=jn=_n=Xn=It=pa=ze.dragged=ze.ghost=ze.clone=ze.active=null,rs.forEach(function(t){t.checked=!0}),rs.length=eo=to=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ke&&(this._onDragOver(t),nc(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],i,a=this.el.children,s=0,d=a.length,r=this.options;s<d;s++)i=a[s],Ni(i,r.draggable,this.el,!1)&&t.push(i.getAttribute(r.dataIdAttr)||dc(i));return t},sort:function(t,i){var a={},s=this.el;this.toArray().forEach(function(d,r){var f=s.children[r];Ni(f,this.options.draggable,s,!1)&&(a[d]=f)},this),i&&this.captureAnimationState(),t.forEach(function(d){a[d]&&(s.removeChild(a[d]),s.appendChild(a[d]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return Ni(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var a=this.options;if(i===void 0)return a[t];var s=Jn.modifyOption(this,t,i);typeof s<"u"?a[t]=s:a[t]=i,t==="group"&&Pl(a)},destroy:function(){jt("destroy",this);var t=this.el;t[fi]=null,at(t,"mousedown",this._onTapStart),at(t,"touchstart",this._onTapStart),at(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(at(t,"dragover",this),at(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),os.splice(os.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Wi){if(jt("hideClone",this),ze.eventCanceled)return;Ue(yt,"display","none"),this.options.removeCloneOnHide&&yt.parentNode&&yt.parentNode.removeChild(yt),Wi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Wi){if(jt("showClone",this),ze.eventCanceled)return;ke.parentNode==vt&&!this.options.group.revertClone?vt.insertBefore(yt,ke):fn?vt.insertBefore(yt,fn):vt.appendChild(yt),this.options.group.revertClone&&this.animate(ke,yt),Ue(yt,"display",""),Wi=!1}}};function nc(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ya(e,t,i,a,s,d,r,f){var E,F=e[fi],b=F.options.onMove,p;return window.CustomEvent&&!Xi&&!Zn?E=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent("move",!0,!0)),E.to=t,E.from=e,E.dragged=i,E.draggedRect=a,E.related=s||t,E.relatedRect=d||Mt(t),E.willInsertAfter=f,E.originalEvent=r,e.dispatchEvent(E),b&&(p=b.call(F,E,r)),p}function no(e){e.draggable=!1}function ac(){Eo=!1}function sc(e,t,i){var a=Mt(An(i.el,0,i.options,!0)),s=10;return t?e.clientX<a.left-s||e.clientY<a.top&&e.clientX<a.right:e.clientY<a.top-s||e.clientY<a.bottom&&e.clientX<a.left}function oc(e,t,i){var a=Mt(Ko(i.el,i.options.draggable)),s=10;return t?e.clientX>a.right+s||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+s}function rc(e,t,i,a,s,d,r,f){var E=a?e.clientY:e.clientX,F=a?i.height:i.width,b=a?i.top:i.left,p=a?i.bottom:i.right,B=!1;if(!r){if(f&&wa<F*s){if(!Un&&(Xn===1?E>b+F*d/2:E<p-F*d/2)&&(Un=!0),Un)B=!0;else if(Xn===1?E<b+wa:E>p-wa)return-Xn}else if(E>b+F*(1-s)/2&&E<p-F*(1-s)/2)return lc(t)}return B=B||r,B&&(E<b+F*d/2||E>p-F*d/2)?E>b+F/2?1:-1:0}function lc(e){return gi(ke)<gi(e)?1:-1}function dc(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,a=0;i--;)a+=t.charCodeAt(i);return a.toString(36)}function uc(e){rs.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var a=t[i];a.checked&&rs.push(a)}}function Sa(e){return setTimeout(e,0)}function Co(e){return clearTimeout(e)}ps&&lt(document,"touchmove",function(e){(ze.active||Cn)&&e.cancelable&&e.preventDefault()});ze.utils={on:lt,off:at,css:Ue,find:Bl,is:function(t,i){return!!Ni(t,i,t,!1)},extend:zf,throttle:$l,closest:Ni,toggleClass:li,clone:Ll,index:gi,nextTick:Sa,cancelNextTick:Co,detectDirection:Nl,getChild:An};ze.get=function(e){return e[fi]};ze.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(ze.utils=Fi(Fi({},ze.utils),a.utils)),Jn.mount(a)})};ze.create=function(e,t){return new ze(e,t)};ze.version=Kf;var wt=[],Nn,To,wo=!1,ao,so,ls,Pn;function fc(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?lt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?lt(document,"pointermove",this._handleFallbackAutoScroll):a.touches?lt(document,"touchmove",this._handleFallbackAutoScroll):lt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?at(document,"dragover",this._handleAutoScroll):(at(document,"pointermove",this._handleFallbackAutoScroll),at(document,"touchmove",this._handleFallbackAutoScroll),at(document,"mousemove",this._handleFallbackAutoScroll)),zr(),ka(),Yf()},nulling:function(){ls=To=Nn=wo=Pn=ao=so=null,wt.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var s=this,d=(i.touches?i.touches[0]:i).clientX,r=(i.touches?i.touches[0]:i).clientY,f=document.elementFromPoint(d,r);if(ls=i,a||this.options.forceAutoScrollFallback||Zn||Xi||qn){oo(i,this.options,f,a);var E=Ji(f,!0);wo&&(!Pn||d!==ao||r!==so)&&(Pn&&zr(),Pn=setInterval(function(){var F=Ji(document.elementFromPoint(d,r),!0);F!==E&&(E=F,ka()),oo(i,s.options,F,a)},10),ao=d,so=r)}else{if(!this.options.bubbleScroll||Ji(f,!0)===Pi()){ka();return}oo(i,this.options,Ji(f,!1),!1)}}},ji(e,{pluginName:"scroll",initializeByDefault:!0})}function ka(){wt.forEach(function(e){clearInterval(e.pid)}),wt=[]}function zr(){clearInterval(Pn)}var oo=$l(function(e,t,i,a){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,d=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,f=t.scrollSpeed,E=Pi(),F=!1,b;To!==i&&(To=i,ka(),Nn=t.scroll,b=t.scrollFn,Nn===!0&&(Nn=Ji(i,!0)));var p=0,B=Nn;do{var te=B,H=Mt(te),n=H.top,$=H.bottom,_=H.left,C=H.right,k=H.width,R=H.height,o=void 0,y=void 0,O=te.scrollWidth,x=te.scrollHeight,z=Ue(te),q=te.scrollLeft,ee=te.scrollTop;te===E?(o=k<O&&(z.overflowX==="auto"||z.overflowX==="scroll"||z.overflowX==="visible"),y=R<x&&(z.overflowY==="auto"||z.overflowY==="scroll"||z.overflowY==="visible")):(o=k<O&&(z.overflowX==="auto"||z.overflowX==="scroll"),y=R<x&&(z.overflowY==="auto"||z.overflowY==="scroll"));var ae=o&&(Math.abs(C-s)<=r&&q+k<O)-(Math.abs(_-s)<=r&&!!q),I=y&&(Math.abs($-d)<=r&&ee+R<x)-(Math.abs(n-d)<=r&&!!ee);if(!wt[p])for(var m=0;m<=p;m++)wt[m]||(wt[m]={});(wt[p].vx!=ae||wt[p].vy!=I||wt[p].el!==te)&&(wt[p].el=te,wt[p].vx=ae,wt[p].vy=I,clearInterval(wt[p].pid),(ae!=0||I!=0)&&(F=!0,wt[p].pid=setInterval((function(){a&&this.layer===0&&ze.active._onTouchMove(ls);var N=wt[this.layer].vy?wt[this.layer].vy*f:0,K=wt[this.layer].vx?wt[this.layer].vx*f:0;typeof b=="function"&&b.call(ze.dragged.parentNode[fi],K,N,e,ls,wt[this.layer].el)!=="continue"||Dl(wt[this.layer].el,K,N)}).bind({layer:p}),24))),p++}while(t.bubbleScroll&&B!==E&&(B=Ji(B,!1)));wo=F}},30),Hl=function(t){var i=t.originalEvent,a=t.putSortable,s=t.dragEl,d=t.activeSortable,r=t.dispatchSortableEvent,f=t.hideGhostForTarget,E=t.unhideGhostForTarget;if(i){var F=a||d;f();var b=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,p=document.elementFromPoint(b.clientX,b.clientY);E(),F&&!F.el.contains(p)&&(r("spill"),this.onSpill({dragEl:s,putSortable:a}))}};function jo(){}jo.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,a=t.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var s=An(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:Hl};ji(jo,{pluginName:"revertOnSpill"});function Xo(){}Xo.prototype={onSpill:function(t){var i=t.dragEl,a=t.putSortable,s=a||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:Hl};ji(Xo,{pluginName:"removeOnSpill"});ze.mount(new fc);ze.mount(Xo,jo);function cc(){return typeof window<"u"?window.console:global.console}const hc=cc();function mc(e){const t=Object.create(null);return function(a){return t[a]||(t[a]=e(a))}}const vc=/-(\w)/g,Yr=mc(e=>e.replace(vc,(t,i)=>i?i.toUpperCase():""));function ro(e){e.parentElement!==null&&e.parentElement.removeChild(e)}function Gr(e,t,i){const a=i===0?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,a)}function pc(e,t){return Object.values(e).indexOf(t)}function bc(e,t,i,a){if(!e)return[];const s=Object.values(e),d=t.length-a;return[...t].map((f,E)=>E>=d?s.length:s.indexOf(f))}function ql(e,t){this.$nextTick(()=>this.$emit(e.toLowerCase(),t))}function gc(e){return t=>{this.realList!==null&&this["onDrag"+e](t),ql.call(this,e,t)}}function yc(e){return["transition-group","TransitionGroup"].includes(e)}function _c(e){if(!e||e.length!==1)return!1;const[{type:t}]=e;return t?yc(t.name):!1}function Ec(e,t){return t?{...t.props,...t.attrs}:e}const So=["Start","Add","Remove","Update","End"],ko=["Choose","Unchoose","Sort","Filter","Clone"],Cc=["Move",...So,...ko].map(e=>"on"+e);let lo=null;const Tc={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},wc=jl({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...So.map(e=>e.toLowerCase()),...ko.map(e=>e.toLowerCase())],props:Tc,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const e=this.$slots.default?this.$slots.default():null,t=Ec(this.$attrs,this.componentData);return e?(this.transitionMode=_c(e),Qo(this.getTag(),t,e)):Qo(this.getTag(),t,[])},created(){this.list!==null&&this.modelValue!==null&&hc.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};So.forEach(s=>{e["on"+s]=gc.call(this,s)}),ko.forEach(s=>{e["on"+s]=ql.bind(this,s)});const t=Object.keys(this.$attrs).reduce((s,d)=>(s[Yr(d)]=this.$attrs[d],s),{}),i=Object.assign({},t,e,{onMove:(s,d)=>this.onDragMove(s,d)});!("draggable"in i)&&(i.draggable=">*");const a=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new ze(a,i),a.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?$i(this.component):this.tag},updateOptions(e){for(var t in e){const i=Yr(t);Cc.indexOf(i)===-1&&this._sortable.option(i,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=bc(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(e){const t=pc(this.getChildrenNodes()||[],e);if(t===-1)return null;const i=this.realList[t];return{index:t,element:i}},emitChanges(e){this.$nextTick(()=>{this.$emit("change",e)})},alterList(e){if(this.list){e(this.list);return}const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=t=>t.splice(...arguments);this.alterList(e)},updatePosition(e,t){const i=a=>a.splice(t,0,a.splice(e,1)[0]);this.alterList(i)},getVmIndex(e){const t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;var t=this.getChildrenNodes();t[e].data=null;const i=this.getComponent();i.children=[],i.kept=void 0},onDragStart(e){this.computeIndexes(),this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),lo=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(t===void 0)return;ro(e.item);const i=this.getVmIndex(e.newIndex);this.spliceList(i,0,t),this.computeIndexes();const a={element:t,newIndex:i};this.emitChanges({added:a})},onDragRemove(e){if(Gr(this.$el,e.item,e.oldIndex),e.pullMode==="clone"){ro(e.clone);return}if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const i={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:i})},onDragUpdate(e){ro(e.item),Gr(e.from,e.item,e.oldIndex);const t=this.context.index,i=this.getVmIndex(e.newIndex);this.updatePosition(t,i);const a={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:a})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const i=this.move;if(!i||!this.realList)return!0;const a=this.getRelatedContextFromMoveEvent(e),s=this.context,d=this.computeFutureIndex(a,e);Object.assign(s,{futureIndex:d});const r=Object.assign({},e,{relatedContext:a,draggedContext:s});return i(r,t)},onDragEnd(){this.computeIndexes(),lo=null},getTrargetedComponent(e){return e.__draggable_component__},getRelatedContextFromMoveEvent({to:e,related:t}){const i=this.getTrargetedComponent(e);if(!i)return{component:i};const a=i.realList,s={list:a,component:i};if(e!==t&&a&&i.getUnderlyingVm){const d=i.getUnderlyingVm(t);if(d)return Object.assign(d,s)}return s},computeFutureIndex(e,t){const i=[...t.to.children].filter(r=>r.style.display!=="none");if(i.length===0)return 0;const a=i.indexOf(t.related),s=e.component.getVmIndex(a);return i.indexOf(lo)!==-1||!t.willInsertAfter?s:s+1}}}),{saveAs:Sc}=xl,kc={name:"Pad",components:{ChargementPage:Wl,Chargement:Gl,Message:zl,Notification:Yl,Capsule:D1,CapsuleAlt:Tf,Emojis:Ff,draggable:wc},data(){return{chargementPage:!0,chargement:!1,message:"",notification:"",modale:"",titreModale:"",action:"",mode:"",affichage:"",colonnes:[],affichageColonnes:[],colonne:0,titreModaleColonne:"",modeColonne:"",titreColonne:"",bloc:"",titre:"",texte:"",media:"",lien:"",iframe:"",vignette:"",vignetteDefaut:"",source:"",type:"",progressionFichier:0,progressionVignette:0,progressionFond:0,progressionEnregistrement:!1,visibilite:!1,visibiliteInitiale:"",chargementLien:!1,chargementMedia:!1,menu:"",commentaires:[],commentaire:"",commentaireId:"",commentaireModifie:"",editeurCommentaire:"",editionCommentaire:!1,focusId:"",emojis:"",evaluations:[],evaluation:0,evaluationId:"",messagesChat:[],messageChat:"",nouveauxMessagesChat:0,utilisateurs:[],utilisateur:"",nomUtilisateur:"",couleur:"",couleurs:["#f76707","#f59f00","#74b816","#37b24d","#0ca678","#1098ad","#1c7ed6","#4263eb","#7048e8","#ae3ec9","#d6336c","#f03e3e","#495057"],listeCouleurs:!1,panneaux:[],fonds:["fond1.png","fond2.png","fond3.png","fond4.png","fond5.png","fond6.png","fond7.png","fond8.png","fond9.png","fond10.png","fond11.png"],modaleConfirmer:!1,messageConfirmation:"",typeConfirmation:"",modaleDiaporama:!1,donneesBloc:{},motDePasse:"",nouveauMotDePasse:"",defilement:!1,depart:0,distance:0,resultats:{},page:1,accesAutorise:!1,codeAcces:"",codeVisible:!1,modificationCode:!1,codeqr:"",recherche:!1,requete:"",chargementVignette:!1,admins:[],blob:"",transcodage:!1,mediaRecorder:"",flux:[],contexte:"",intervalle:"",enregistrement:!1,dureeEnregistrement:"00 : 00",donneesUtilisateur:{},padDestination:"",colonneDestination:"",elementPrecedent:null,hote:this.$pageContext.pageProps.hote,userAgent:this.$pageContext.pageProps.userAgent,langues:this.$pageContext.pageProps.langues,identifiant:this.$pageContext.pageProps.identifiant,nom:this.$pageContext.pageProps.nom,statut:this.$pageContext.pageProps.statut,langue:this.$pageContext.pageProps.langue,pads:this.$pageContext.pageProps.pads,padsDigidrive:this.$pageContext.pageProps.digidrive,pad:this.$pageContext.pageProps.pad,blocs:this.$pageContext.pageProps.blocs,activite:this.$pageContext.pageProps.activite,etherpad:"https://doc.digipad.app",etherpadApi:"f81ac8a1ddc6bb8e693a8eb13c6bc92795c87dda695bbae18d608493598d1e88",pixabayApi:"17995783-8722cfb0d46adc88b39d0bb64",limite:parseFloat("20"),fichiersAutorises:".jpg,.jpeg,.png,.gif,.mp4,.m4v,.mp3,.m4a,.ogg,.wav,.pdf,.ppt,.pptx,.odp,.doc,.docx,.odt,.ods,.odg,.xls,.xlsx,.notebook,.flipchart,.ubz,.ipynb,.dgs,.dgc,.dgb,.kmz,.sb3,.epub,.sprite3,.pages,.numbers,.keynote,.csv,.python,.ltp,.zip,.sh3d,.skp,.pkt,.c,.py,.webm,.webp"}},computed:{admin(){return this.pad.hasOwnProperty("identifiant")&&this.pad.identifiant===this.identifiant||this.pad.hasOwnProperty("admins")&&this.pad.admins.includes(this.identifiant)||this.statut==="auteur"&&this.pad.hasOwnProperty("id")&&this.pads.includes(this.pad.id)},mobile(){return!!((this.userAgent.match(/iPhone/i)||this.userAgent.match(/iPad/i)||this.userAgent.match(/iPod/i))&&this.userAgent.match(/Mobile/i)||this.userAgent.match(/Android/i))},digidrive(){return this.statut==="auteur"&&this.padsDigidrive.includes(this.pad.id)},blocsRecherche(){let e=[],t=[];switch(this.requete){case"!eval+":this.blocs.forEach((function(i){i.evaluation=this.definirEvaluationCapsule(i.evaluations)}).bind(this)),t=this.blocs.sort(function(i,a){return a.evaluation-i.evaluation});break;case"!eval-":this.blocs.forEach((function(i){i.evaluation=this.definirEvaluationCapsule(i.evaluations)}).bind(this)),t=this.blocs.sort(function(i,a){return i.evaluation-a.evaluation});break;case"!mod":t=this.blocs.filter(function(i){return i.visibilite==="masquee"});break;case"!priv":t=this.blocs.filter(function(i){return i.visibilite==="privee"});break;case"!comm+":t=this.blocs.sort(function(i,a){return a.commentaires-i.commentaires});break;case"!comm-":t=this.blocs.sort(function(i,a){return i.commentaires-a.commentaires});break;default:t=this.blocs.filter((function(i){return i.titre.toLowerCase().includes(this.requete.toLowerCase())||i.texte.toLowerCase().includes(this.requete.toLowerCase())||i.media.toLowerCase().includes(this.requete.toLowerCase())||i.iframe.toLowerCase().includes(this.requete.toLowerCase()||i.source.toLowerCase().includes(this.requete.toLowerCase()))}).bind(this))}return this.pad.affichage==="colonnes"?this.pad.colonnes&&this.pad.colonnes.length>0?(this.pad.colonnes.forEach(function(){e.push([])}),t.forEach(function(i,a){i.colonne!==void 0||(t[a].colonne=0),e[i.colonne].push(i)})):(this.pad.colonnes.push(this.$t("colonneSansTitre")),e.push([]),t.forEach(function(i,a){t[a].colonne=0,e[0].push(i)})):e=t,e}},watch:{affichage:function(e){e==="colonnes"?(this.definirColonnes(this.blocs),this.$nextTick((function(){this.activerDefilementHorizontal()}).bind(this))):this.desactiverDefilementHorizontal()},blocs:{handler(){this.$nextTick((function(){Ci("#pad",{background:!0},(function(){this.chargement=!1;let e=!1;this.utilisateur===this.identifiant&&(e=!0);const t=document.querySelector(".bloc.actif");if(t&&this.action!=="modifier"&&this.bloc!==""&&e===!0&&t.classList.remove("actif"),this.action==="ajouter"&&e===!0){this.notification=this.$t("capsuleAjoutee"),document.querySelector("#"+this.bloc).classList.add("actif");const i=this.bloc;this.$nextTick(function(){document.querySelector("#"+i).focus()})}else this.action==="modifier"&&e===!0?this.notification=this.$t("capsuleModifiee"):this.action==="supprimer"&&e===!0&&(this.notification=this.$t("capsuleSupprimee"));this.utilisateur="",this.action!=="organiser"&&e===!0&&this.fermerModaleBloc()}).bind(this))}).bind(this))},deep:!0},messagesChat:function(){this.$nextTick(function(){document.querySelector("#messages").scrollIntoView({behavior:"smooth",block:"end"})})},page:function(e){this.rechercherImage(e)},recherche:function(e){e===!0?this.$nextTick(function(){document.querySelector("#champ-recherche input").focus()}):this.requete=""}},async created(){const e=this.$pageContext.pageProps.params,t=e.id,i=e.mdp;t&&t!==""&&i&&i!==""&&window.history.replaceState({},document.title,window.location.href.split("?")[0]);const a=e.lang;if(a&&this.langues.includes(a)===!0?(this.$i18n.locale=a,this.langue=a,this.$socket.emit("modifierlangue",a)):this.$i18n.locale=this.langue,this.pad.affichage==="colonnes"&&this.definirColonnes(this.blocs),this.ecouterSocket(),this.pad.acces==="public"||this.pad.acces==="prive"&&this.admin)this.accesAutorise=!0,this.$socket.emit("connexion",{pad:this.pad.id,identifiant:this.identifiant,nom:this.nom});else if(this.pad.acces==="code"&&!this.admin){const d=e.code;d&&d!==""?this.$socket.emit("verifieracces",{pad:this.pad.id,identifiant:this.identifiant,code:d}):this.$socket.emit("verifieracces",{pad:this.pad.id,identifiant:this.identifiant,code:""})}else this.pad.acces==="code"&&this.admin?(this.accesAutorise=!0,this.$socket.emit("connexion",{pad:this.pad.id,identifiant:this.identifiant,nom:this.nom})):this.statut==="utilisateur"?window.location.href="/u/"+this.identifiant:window.location.replace("/");(this.fichiersAutorises===null||this.fichiersAutorises===void 0)&&(this.fichiersAutorises=".jpg,.jpeg,.png,.gif,.mp4,.m4v,.mp3,.m4a,.ogg,.wav,.pdf,.ppt,.pptx,.odp,.doc,.docx,.odt,.ods,.odg,.xls,.xlsx"),(this.limite===0||this.limite===null||this.limite===void 0)&&(this.limite=10),new PerformanceObserver(d=>{d.getEntries().forEach((async function(r){if(r.type==="back_forward"){const f=await Ct.post(this.hote+"/api/recuperer-donnees-pad",{id:this.pad.id,token:this.pad.token,identifiant:this.identifiant,statut:this.statut},{headers:{"Content-Type":"application/json"}});f&&f.hasOwnProperty("data")&&f.data!=="erreur"&&(this.pad=f.data.pad,this.blocs=f.data.blocs,this.activite=f.data.activite,this.pad.affichage==="colonnes"&&this.definirColonnes(this.blocs))}}).bind(this))}).observe({type:"navigation",buffered:!0})},mounted(){document.getElementsByTagName("html")[0].setAttribute("lang",this.langue),Ci("#pad",{background:!0},(function(){if(Object.keys(this.pad).length>0){document.documentElement.setAttribute("lang",this.langue),document.addEventListener("mousedown",this.surlignerBloc,!1),window.addEventListener("beforeunload",this.quitterPage,!1),window.addEventListener("resize",this.redimensionner,!1),window.addEventListener("message",this.ecouterMessage,!1),this.pad.affichage==="colonnes"&&this.activerDefilementHorizontal();const e=this.hote+"/p/"+this.pad.id+"/"+this.pad.token;new Fs("#copier-lien .lien",{text:function(){return e}}).on("success",(function(){document.querySelector("#copier-lien .lien").focus(),this.notification=this.$t("lienCopie")}).bind(this));const i='<iframe src="'+this.hote+"/p/"+this.pad.id+"/"+this.pad.token+'" frameborder="0" width="100%" height="500"></iframe>';new Fs("#copier-code span",{text:function(){return i}}).on("success",(function(){document.querySelector("#copier-code span").focus(),this.notification=this.$t("codeCopie")}).bind(this)),setTimeout((function(){this.chargementPage=!1}).bind(this),300),this.mobile?(document.querySelector("#pad").addEventListener("touchstart",(function(s){(s.target.closest(".titre")!==null&&s.target.textContent!==""||s.target.closest(".texte")!==null&&s.target.textContent!=="")&&this.pad.affichage==="colonnes"&&this.desactiverDefilementHorizontal()}).bind(this)),document.querySelector("#pad").addEventListener("touchend",(function(){this.pad.affichage==="colonnes"&&setTimeout((function(){this.activerDefilementHorizontal()}).bind(this),200)}).bind(this))):(document.querySelector("#pad").addEventListener("mousedown",(function(s){(s.target.closest(".titre")!==null&&s.target.textContent!==""||s.target.closest(".texte")!==null&&s.target.textContent!=="")&&this.pad.affichage==="colonnes"&&this.desactiverDefilementHorizontal()}).bind(this)),document.querySelector("#pad").addEventListener("mouseup",(function(){this.pad.affichage==="colonnes"&&setTimeout((function(){this.activerDefilementHorizontal()}).bind(this),200)}).bind(this))),document.querySelector("#pad").addEventListener("dragover",function(s){s.preventDefault(),s.stopPropagation()},!1),document.querySelector("#pad").addEventListener("dragcenter",function(s){s.preventDefault(),s.stopPropagation()},!1),document.querySelector("#pad").addEventListener("drop",(function(s){if(s.preventDefault(),s.stopPropagation(),s.dataTransfer.files&&s.dataTransfer.files[0]&&this.accesAutorise&&!this.recherche&&this.pad.fichiers==="actives"&&(this.admin&&this.action!=="organiser"||!this.admin&&this.pad.contributions!=="fermees")){let d=0;this.pad.affichage==="colonnes"&&this.pad.colonnes.forEach(function(r,f){document.querySelector("#colonne"+f).contains(s.target)===!0&&(d=f)}),this.ouvrirModaleBloc("creation","",d),this.ajouterFichier(s.dataTransfer)}}).bind(this),!1),document.addEventListener("keydown",this.gererClavier,!1),window.addEventListener("paste",(function(s){if(s.clipboardData.files&&s.clipboardData.files[0]&&s.clipboardData.files[0].type.includes("image")&&this.accesAutorise&&!this.recherche&&this.pad.fichiers==="actives"&&(this.admin&&this.action!=="organiser"||!this.admin&&this.pad.contributions!=="fermees")&&this.modale===""&&this.menu===""){let d=0;this.pad.affichage==="colonnes"&&this.pad.colonnes.forEach(function(r,f){document.querySelector("#colonne"+f).contains(s.target)===!0&&(d=f)}),this.ouvrirModaleBloc("creation","",d),this.ajouterFichier(s.clipboardData)}}).bind(this),!1)}}).bind(this))},beforeUnmount(){this.panneaux.forEach(function(e){e.close()}),this.panneaux=[],document.removeEventListener("mousedown",this.surlignerBloc,!1),document.removeEventListener("keydown",this.gererClavier,!1),window.removeEventListener("beforeunload",this.quitterPage,!1),window.removeEventListener("resize",this.redimensionner,!1),window.removeEventListener("message",this.ecouterMessage,!1)},methods:{allerAccueil(){(this.statut==="invite"||this.statut==="auteur")&&(this.quitterPage(),window.location.href="/")},allerCompte(){this.quitterPage(),window.location.href="/u/"+this.identifiant},ecouterMessage(e){this.source==="digiview"&&(this.vignette=e.data,this.vignetteDefaut=e.data)},definirTabIndex(){return this.modale===""&&this.message===""&&!this.modaleConfirmer&&!this.modaleDiaporama&&!this.transcodage&&!this.progressionEnregistrement?0:-1},definirTabIndexModale(){return this.message===""&&!this.modaleConfirmer&&!this.transcodage&&!this.progressionEnregistrement?0:-1},definirTabIndexModaleDiaporama(){return this.modale===""&&this.message===""&&this.menu===""&&!this.transcodage&&!this.progressionEnregistrement?0:-1},activerInput(e){document.querySelector("#"+e).click()},gererRecherche(){this.action!=="organiser"&&(this.recherche=!this.recherche)},definirFond(e){return e.substring(0,1)==="#"?{backgroundColor:e}:{backgroundImage:"url("+e+")"}},definirUtilisateurs(e){let t=[];const i=[];e.forEach((function(a){a.identifiant===this.identifiant&&t.length===0?(t.push(a),this.couleur=a.couleur):a.identifiant!==this.identifiant&&i.push(a)}).bind(this)),t=t.concat(i),this.utilisateurs=t},definirNom(e){return e.nom===""?e.identifiant:e.nom},definirColonnes(e){const t=[],i=[];this.pad.colonnes&&this.pad.colonnes.length>0?(this.pad.colonnes.forEach(function(){t.push([])}),e.forEach(function(a,s){a.colonne!==void 0||(e[s].colonne=0),t[a.colonne].push(a)}),this.pad.affichageColonnes.forEach(function(a){i.push(a)})):(this.pad.colonnes.push(this.$t("colonneSansTitre")),t.push([]),e.forEach(function(a,s){e[s].colonne=0,t[0].push(a)}),this.pad.affichageColonnes.push(!0),i.push(!0)),this.blocs=e,this.colonnes=t,this.affichageColonnes=i},definirVignette(e){let t,i=!1;if(e.hasOwnProperty("vignetteGeneree")&&(i=e.vignetteGeneree),e.vignette&&e.vignette!==""&&typeof e.vignette=="string")t=e.vignette;else if(i===!0)t=this.definirLienVignette(this.pad.id,e.fichier.replace(/\.[^/.]+$/,"")+".jpg");else switch(e.type){case"audio":case"enregistrement":t="/img/audio.png";break;case"video":t="/img/video.png";break;case"pdf":t="/img/pdf.png";break;case"document":t="/img/document.png";break;case"office":t="/img/office.png";break;case"lien":t="/img/lien.png";break;case"embed":e.source==="peertube"?t=e.media.replace("/videos/watch/","/static/thumbnails/")+".jpg":e.source==="h5p"?t="/img/h5p.png":e.source==="digiview"?t="/img/digiview.png":e.source==="youtube"?t="/img/youtube.png":e.source==="vimeo"?t="/img/vimeo.png":e.source==="dailymotion"?t="/img/dailymotion.png":e.source==="slideshare"?t="/img/slideshare.png":e.source==="flickr"?t="/img/flickr.png":e.source==="soundcloud"?t="/img/soundcloud.png":e.source==="twitter"?t="/img/twitter.png":e.source==="etherpad"?t="/img/etherpad.png":e.media.includes("facebook.com")?t="/img/facebook.png":e.media.includes("vocaroo.com")||e.media.includes("voca.ro")?t="/img/vocaroo.png":e.media.includes("drive.google.com")?t="/img/google-drive.png":e.media.includes("docs.google.com/document")?t="/img/google-docs.png":e.media.includes("docs.google.com/presentation")?t="/img/google-slides.png":e.media.includes("docs.google.com/spreadsheets")?t="/img/google-sheets.png":e.media.includes("docs.google.com/forms")?t="/img/google-forms.png":e.media.includes("docs.google.com/drawings")?t="/img/google-drawings.png":e.media.includes("google.com/maps")?t="/img/google-maps.png":e.media.includes("wikipedia.org")?t="/img/wikipedia.png":e.media.includes("quizlet.com")?t="/img/quizlet.png":e.media.includes("genial.ly")?t="/img/genially.png":e.media.includes("ladigitale.dev")?t="/img/ladigitale.png":e.media.includes("framapad.org")?t="/img/framapad.png":t="/img/code.png";break;default:t="/img/telechargement.png";break}return t},definirIconeMedia(e){let t;switch(e.type){case"image":case"lien-image":t="image";break;case"audio":t="volume_up";break;case"video":t="movie";break;case"pdf":case"document":case"office":t="description";break;case"lien":t="link";break;case"embed":e.source==="youtube"||e.source==="vimeo"||e.source==="dailymotion"||e.source==="digiview"?t="movie":e.source==="slideshare"||e.media.includes("wikipedia.org")||e.media.includes("drive.google.com")||e.media.includes("docs.google.com")?t="description":e.source==="flickr"?t="image":e.source==="soundcloud"||e.media.includes("vocaroo.com")||e.media.includes("voca.ro")?t="volume_up":e.media.includes("google.com/maps")?t="place":e.source==="etherpad"||e.media.includes("framapad.org")?t="group_work":t="web";break;default:t="save_alt";break}return t},definirDescription(e){return e.hasOwnProperty("modifie")?this.$t("creeeLe")+" "+this.$formaterDate(e.date,this.langue)+" "+this.$t("par")+" "+this.definirNom(e)+". "+this.$t("modifieeLe")+" "+this.$formaterDate(e.modifie,this.langue)+".":this.$t("creeeLe")+" "+this.$formaterDate(e.date,this.langue)+" "+this.$t("par")+" "+this.definirNom(e)+"."},ouvrirModaleColonne(e,t){e==="edition"?(this.colonne=t,this.titreModaleColonne=this.$t("modifierColonne"),this.titreColonne=this.pad.colonnes[t]):this.titreModaleColonne=this.$t("ajouterColonne"),this.modeColonne=e,this.elementPrecedent=document.activeElement||document.body,this.modale="colonne",this.$nextTick(function(){document.querySelector("#champ-nom-colonne").focus()})},ajouterColonne(){this.titreColonne!==""&&(this.chargement=!0,this.$socket.emit("ajoutercolonne",this.pad.id,this.titreColonne,this.pad.colonnes,this.pad.affichageColonnes,this.couleur,this.identifiant,this.nom),this.fermerModaleColonne())},modifierColonne(){this.titreColonne!==""&&(this.chargement=!0,this.$socket.emit("modifiertitrecolonne",this.pad.id,this.titreColonne,this.colonne,this.identifiant),this.fermerModaleColonne())},afficherColonne(e){this.chargement=!0,this.$socket.emit("modifieraffichagecolonne",this.pad.id,!0,e,this.identifiant)},masquerColonne(e){this.chargement=!0,this.$socket.emit("modifieraffichagecolonne",this.pad.id,!1,e,this.identifiant)},afficherSupprimerColonne(e){this.colonne=e,this.titreColonne=this.pad.colonnes[e],this.messageConfirmation=this.$t("confirmationSupprimerColonne"),this.typeConfirmation="supprimer-colonne",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},supprimerColonne(){this.modaleConfirmer=!1,this.chargement=!0,this.$socket.emit("supprimercolonne",this.pad.id,this.titreColonne,this.colonne,this.couleur,this.identifiant,this.nom),this.fermerModaleColonne()},fermerModaleColonne(){this.modale="",this.titreModaleColonne="",this.titreColonne="",this.modeColonne="",this.colonne=0,this.gererFocus()},deplacerColonne(e,t){this.chargement=!0,this.$socket.emit("deplacercolonne",this.pad.id,this.pad.colonnes[t],this.pad.affichageColonnes[t],e,t,this.couleur,this.identifiant,this.nom)},definirLargeurCapsules(){let e;switch(this.pad.largeur){case"large":e={default:4,1729:4,1449:3,1365:2,899:2,499:1};break;case"normale":e={default:5,1729:5,1449:4,1365:3,899:2,499:1};break}return e},ouvrirModaleBloc(e,t,i){this.mode=e,e==="creation"?this.titreModale=this.$t("ajouterCapsule"):(this.$socket.emit("verifiermodifierbloc",this.pad.id,t.bloc,this.identifiant),this.titreModale=this.$t("modifierCapsule"),this.donneesBloc=t,this.bloc=t.bloc,this.titre=t.titre,this.texte=t.texte,this.media=t.media,this.iframe=t.iframe,this.type=t.type,this.source=t.source,t.vignette&&t.vignette!==""&&typeof t.vignette=="string"?(this.vignette=t.vignette,this.vignetteDefaut=this.vignette):t.type!=="image"&&(!t.vignette||t.vignette===""||typeof t.vignette!="string")&&(this.vignette=this.definirVignette(t),this.vignetteDefaut=this.vignette),t.hasOwnProperty("visibilite")&&t.visibilite==="privee"?this.visibilite=!0:this.visibilite=!1,e==="edition"&&t.hasOwnProperty("visibilite")&&t.visibilite==="privee"&&(this.visibiliteInitiale="privee"),t.iframe!==""&&(this.lien=t.media)),this.pad.affichage==="colonnes"&&(this.colonne=i),this.menu="",this.elementPrecedent=document.activeElement||document.body,this.modale="bloc",this.$nextTick((function(){e==="creation"?document.querySelector("#champ-titre").focus():document.querySelector("#bloc .fermer").focus();const a=this,s=ft.init({element:document.querySelector("#texte"),onChange:(function(d){let r=d.replace(/(<a [^>]*)(target="[^"]*")([^>]*>)/gi,"$1$3");r=r.replace(/(<a [^>]*)(>)/gi,'$1 target="_blank"$2'),r=Is(r,{defaultProtocol:"https",target:"_blank"}),this.texte=r}).bind(this),actions:[{name:"gras",title:a.$t("gras"),icon:'<i class="material-icons">format_bold</i>',result:()=>ft.exec("bold")},{name:"italique",title:a.$t("italique"),icon:'<i class="material-icons">format_italic</i>',result:()=>ft.exec("italic")},{name:"souligne",title:a.$t("souligne"),icon:'<i class="material-icons">format_underlined</i>',result:()=>ft.exec("underline")},{name:"barre",title:a.$t("barre"),icon:'<i class="material-icons">format_strikethrough</i>',result:()=>ft.exec("strikethrough")},{name:"listeordonnee",title:a.$t("listeOrdonnee"),icon:'<i class="material-icons">format_list_numbered</i>',result:()=>ft.exec("insertOrderedList")},{name:"liste",title:a.$t("liste"),icon:'<i class="material-icons">format_list_bulleted</i>',result:()=>ft.exec("insertUnorderedList")},{name:"couleur",title:a.$t("couleurTexte"),icon:'<label for="couleur-texte"><i class="material-icons">format_color_text</i></label><input id="couleur-texte" type="color">',result:()=>{}},{name:"lien",title:a.$t("lien"),icon:'<i class="material-icons">link</i>',result:()=>{const d=window.prompt(a.$t("adresseLien"));d&&ft.exec("createLink",d)}}],classes:{actionbar:"boutons-editeur",button:"bouton-editeur",content:"contenu-editeur",selected:"bouton-actif"}});s.content.innerHTML=this.texte,s.onpaste=function(d){d.preventDefault(),d.stopPropagation();let r=d.clipboardData.getData("text/html");r!==""?(r=$s(r,["b","i","u","a","br","div","font","ul","ol"]),r=r.replace(/style=".*?"/mg,""),r=r.replace(/class=".*?"/mg,""),ft.exec("insertHTML",r)):ft.exec("insertText",d.clipboardData.getData("text/plain"))},document.querySelector("#texte .contenu-editeur").addEventListener("focus",function(){document.querySelector("#texte").classList.add("focus")}),document.querySelector("#texte .contenu-editeur").addEventListener("blur",function(){document.querySelector("#texte").classList.remove("focus")}),document.querySelector("#couleur-texte").addEventListener("change",this.modifierCouleurTexte)}).bind(this))},modifierCouleurTexte(e){ft.exec("foreColor",e.target.value)},modifierCouleurCommentaire(e){ft.exec("foreColor",e.target.value)},modifierCouleurCommentaireModifie(e){ft.exec("foreColor",e.target.value)},ajouterFichier(e){const t=this.fichiersAutorises.split(",").map(a=>a.trim().substring(1)),i=e.files[0].name.substring(e.files[0].name.lastIndexOf(".")+1).toLowerCase();if(e.files&&e.files[0]&&t.includes(i)&&e.files[0].size<this.limite*1024e3){const a=e.files[0],s=new FormData;s.append("pad",this.pad.id),s.append("fichier",a),Ct.post(this.hote+"/api/televerser-fichier",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:(function(d){const r=parseInt(Math.round(d.loaded*100/d.total));this.progressionFichier=r}).bind(this)}).then((function(d){const r=d.data;if(r==="non_connecte")window.location.replace("/");else if(r==="erreur_televersement")e.value="",this.progressionFichier=0,this.message=this.$t("erreurTeleversementFichier");else if(r==="erreur_espace_disque")e.value="",this.progressionFichier=0,this.message=this.$t("erreurEspaceDisque");else{this.chargementMedia=!0,this.media=r.fichier,this.type=r.mimetype.split("/")[0],r.type=this.type;const f=this.definirVignette(r);switch(this.type!=="image"&&(this.vignette=f,this.vignetteDefaut=f),this.type){case"image":this.$nextTick((function(){Ci("#media",(function(){this.chargementMedia=!1}).bind(this))}).bind(this));break;case"video":this.$nextTick((function(){document.querySelector("#video").addEventListener("loadedmetadata",(function(){Ci("#vignette",(function(){this.chargementMedia=!1}).bind(this))}).bind(this))}).bind(this));break;case"audio":this.$nextTick((function(){document.querySelector("#audio").addEventListener("loadedmetadata",(function(){Ci("#vignette",(function(){this.chargementMedia=!1}).bind(this))}).bind(this))}).bind(this));break;case"pdf":case"document":case"office":this.$nextTick((function(){document.querySelector("#document").addEventListener("load",(function(){Ci("#vignette",(function(){this.chargementMedia=!1}).bind(this))}).bind(this))}).bind(this));break;default:this.chargementMedia=!1}}this.progressionFichier=0,e.value=""}).bind(this)).catch((function(){e.value="",this.progressionFichier=0,this.message=this.$t("erreurCommunicationServeur")}).bind(this))}else t.includes(i)===!1?this.message=this.$t("formatFichierPasAccepte"):e.files[0].size>this.limite*1024e3&&(this.message=this.$t("tailleMaximale",{taille:this.limite})),e.value=""},definirExtensionFichier(e){return e.substring(e.lastIndexOf(".")+1)},definirNomFichier(e){return e.substring(0,e.lastIndexOf("."))},supprimerFichier(){if(this.verifierURL(this.media)===!0&&this.media.includes(this.etherpad)){const e=this.media.replace(this.etherpad+"/p/",""),t=this.etherpad+"/api/1/deletePad?apikey="+this.etherpadApi+"&padID="+e;Ct.get(t)}this.media="",this.lien="",this.type="",this.vignette="",this.vignetteDefaut="",this.resultats={}},async ajouterAudio(){this.transcodage=!0;const e=await this.blobEnMp3(),t=new FormData;t.append("pad",this.pad.id),t.append("fichier",e,"enregistrement.mp3"),Ct.post(this.hote+"/api/televerser-audio",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:(function(){this.progressionEnregistrement=!0}).bind(this)}).then((function(i){const a=i.data;a==="non_connecte"?window.location.replace("/"):a==="erreur_televersement"?(this.transcodage=!1,this.progressionEnregistrement=!1,this.message=this.$t("erreurTeleversementFichier")):a==="erreur_espace_disque"?(this.transcodage=!1,this.progressionEnregistrement=!1,this.message=this.$t("erreurEspaceDisque")):(this.modale="",this.mode==="creation"?this.$socket.emit("ajouterbloc",this.bloc,this.pad.id,this.pad.token,this.titre,this.texte,a,this.iframe,"audio",this.source,this.vignette,this.couleur,this.colonne,this.visibilite,this.identifiant,this.nom):this.$socket.emit("modifierbloc",this.bloc,this.pad.id,this.pad.token,this.titre,this.texte,a,this.iframe,"audio",this.source,this.vignette,this.couleur,this.colonne,this.visibilite,this.identifiant,this.nom)),this.progressionEnregistrement=!1}).bind(this)).catch((function(){this.progressionEnregistrement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this))},blobEnMp3(){return new Promise((function(e){const t=new AudioContext,i=new FileReader;i.onloadend=(function(){const a=i.result;t.decodeAudioData(a,(function(s){e(this.transcoder(s))}).bind(this))}).bind(this),i.readAsArrayBuffer(this.blob)}).bind(this))},enregistrerAudio(){var e;!navigator.mediaDevices||!((e=navigator.mediaDevices)!=null&&e.enumerateDevices)?this.notification=this.$t("enregistrementNonSupporte"):navigator.mediaDevices.enumerateDevices().then((function(t){var a;let i=!1;for(const s of t)if(s.kind==="audioinput"){i=!0;break}i===!0?(a=navigator.mediaDevices)!=null&&a.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then((function(s){this.mediaRecorder=new MediaRecorder(s),this.mediaRecorder.start(),this.$nextTick((function(){this.visualiser(s)}).bind(this)),this.enregistrement=!0;const d=Date.now();this.intervalle=setInterval((function(){const r=Date.now()-d;let f=Math.floor(r/1e3%60),E=Math.floor(r/1e3/60<<0);f<10&&(f="0"+f),E<10&&(E="0"+E),this.dureeEnregistrement=E+" : "+f,this.dureeEnregistrement==="01 : 30"&&this.arreterEnregistrementAudio()}).bind(this),100),this.mediaRecorder.onstop=(function(){if(this.flux.length>0){this.blob=new Blob(this.flux,{type:"audio/wav"}),this.enregistrement=!1,this.media=URL.createObjectURL(this.blob),this.type="enregistrement";const r={};r.type=this.type;const f=this.definirVignette(r);this.vignette=f,this.vignetteDefaut=f,this.mediaRecorder="",this.flux=[],this.contexte="",this.dureeEnregistrement="00 : 00",this.intervalle!==""&&(clearInterval(this.intervalle),this.intervalle="")}}).bind(this),this.mediaRecorder.ondataavailable=(function(r){this.flux.push(r.data)}).bind(this)}).bind(this)).catch((function(){this.enregistrement=!1,this.mediaRecorder="",this.flux=[],this.contexte="",this.notification=this.$t("erreurMicro")}).bind(this)):this.notification=this.$t("enregistrementNonSupporte"):this.notification=this.$t("aucuneEntreeAudio")}).bind(this))},arreterEnregistrementAudio(){this.mediaRecorder.stop()},visualiser(e){this.contexte||(this.contexte=new AudioContext);const t=this.contexte.createMediaStreamSource(e),i=this.contexte.createAnalyser();i.fftSize=2048;const a=i.frequencyBinCount,s=new Uint8Array(a);t.connect(i),this.$nextTick(function(){d()});function d(){if(document.querySelector("#visualisation")){const r=document.querySelector("#visualisation"),f=r.getContext("2d"),E=document.querySelector("#enregistrement").offsetWidth,F=r.height;r.width=E,requestAnimationFrame(d),i.getByteTimeDomainData(s),f.fillStyle="#eeeeee",f.fillRect(0,0,E,F),f.lineWidth=2,f.strokeStyle="#000000",f.beginPath();const b=E*1/a;let p=0;for(let B=0;B<a;B++){const H=s[B]/128*F/2;B===0?f.moveTo(p,H):f.lineTo(p,H),p+=b}f.lineTo(r.width,r.height/2),f.stroke()}}},ajouterLien(){if(this.lien!==""){const e=/<iframe(.+)<\/iframe>/g;e.test(this.lien)===!0&&(/\/digiview\/inc\/video(.*?)vignette=/g.test(this.lien)===!0&&(this.vignette=this.lien.match(/https:\/\/i.ytimg(.*)hqdefault.jpg/g)[0],this.vignetteDefaut=this.lien.match(/https:\/\/i.ytimg(.*)hqdefault.jpg/g)[0]),this.lien=this.lien.match(/<iframe [^>]*src="[^"]*"[^>]*>/g).map(i=>i.replace(/.*src="([^"]*)".*/,"$1"))[0]),this.verifierURL(this.lien)===!0&&this.lien.match(/\.(jpeg|jpg|gif|png)$/)===null?(this.chargementLien=!0,Ct.get("https://noembed.com/embed?url="+this.lien).then((function(t){let i=t.data;i.hasOwnProperty("error")?(this.iframe=this.lien,this.$nextTick((function(){if(this.media=this.lien,this.source="web",this.lien.includes("tube.ac-lyon.fr")?this.source="peertube":this.lien.includes("ladigitale.dev/digiquiz/")?this.source="h5p":this.lien.includes("ladigitale.dev/digiview/")&&(this.source="digiview"),this.type="embed",i={},i.media=this.media,i.source=this.source,i.type=this.type,this.source==="web"&&!this.media.includes("facebook.com")&&!this.media.includes("vocaroo.com")&&!this.media.includes("drive.google.com")&&!this.media.includes("docs.google.com")&&!this.media.includes("google.com/maps")&&!this.media.includes("wikipedia.org")&&!this.media.includes("genial.ly")&&!this.media.includes("ladigitale.dev/digitools/")&&!this.media.includes("framapad.org")){this.chargementLien=!1,this.chargementVignette=!0;const a=new URL(this.lien),s=a.hostname,d=a.protocol;Ct.post(this.hote+"/api/recuperer-icone",{domaine:s,protocole:d}).then((async function(r){this.chargementVignette=!1,r.data==="erreur"?(this.vignette=this.definirVignette(i),this.vignetteDefaut=this.definirVignette(i)):r.data===""?await this.verifierIcone(d+"//"+s+"/favicon.ico")===!0?(this.vignette=d+"//"+s+"/favicon.ico",this.vignetteDefaut=d+"//"+s+"/favicon.ico"):(this.vignette=this.definirVignette(i),this.vignetteDefaut=this.definirVignette(i)):r.data!==""&&typeof r.data=="string"&&(await this.verifierIcone(r.data)===!0?(this.vignette=r.data,this.vignetteDefaut=r.data):(this.vignette=this.definirVignette(i),this.vignetteDefaut=this.definirVignette(i)))}).bind(this)).catch((function(){this.vignette=this.definirVignette(i),this.vignetteDefaut=this.definirVignette(i),this.chargementVignette=!1}).bind(this))}else this.vignette===""&&this.vignetteDefaut===""&&(this.vignette=this.definirVignette(i),this.vignetteDefaut=this.definirVignette(i),this.chargementLien=!1)}).bind(this))):(i.provider_name.toLowerCase()==="learningapps.org"&&(i.html=i.html.replace("http://LearningApps.org","https://learningapps.org")),e.test(i.html)===!0?this.iframe=i.html.match(/<iframe [^>]*src="[^"]*"[^>]*>/g).map(a=>a.replace(/.*src="([^"]*)".*/,"$1"))[0]:this.iframe=i.html,this.media=this.lien,this.source=i.provider_name.toLowerCase(),this.type="embed",i.thumbnail_url&&i.thumbnail_url!==""?(this.vignette=i.thumbnail_url,this.vignetteDefaut=i.thumbnail_url):(i.media=this.media,i.source=this.source,i.type=this.type,this.vignette===""&&this.vignetteDefaut===""&&(this.vignette=this.definirVignette(i),this.vignetteDefaut=this.definirVignette(i))),this.chargementLien=!1)}).bind(this)).catch((function(){this.chargementLien=!1,this.lien="",this.message=this.$t("erreurRecuperationContenu")}).bind(this))):this.verifierURL(this.lien)===!0&&this.lien.match(/\.(jpeg|jpg|gif|png)$/)!==null?(this.chargementMedia=!0,this.media=this.lien,this.type="lien-image",this.$nextTick((function(){Ci("#media",(function(){this.chargementMedia=!1}).bind(this))}).bind(this))):this.rechercherImage(1)}},verifierIcone(e){return new Promise(function(t){const i=new Image;i.src=e,i.onload=()=>t(!0),i.onerror=()=>t(!1)})},rechercherImage(e){if(this.lien!==""){this.chargementLien=!0;const t=this.lien.replace(/\s+/g,"+");e===1&&(this.page=e),Ct.get("https://pixabay.com/api/?key="+this.pixabayApi+"&q="+t+"&image_type=photo&lang="+this.langue+"&orientation=horizontal&safesearch=true&per_page=16&page="+e).then((function(i){this.chargementLien=!1;const a=i.data;a&&a.total>0&&(this.resultats=a,this.$nextTick(function(){new flexImages({selector:"#resultats",rowHeight:60})}))}).bind(this)).catch((function(){this.chargementLien=!1,this.lien="",this.message=this.$t("erreurRecuperationContenu")}).bind(this))}},modifierPage(e){e==="suivante"&&this.page<this.resultats.total/16?this.page++:e==="precedente"&&this.page>1&&this.page--},selectionnerImage(e){this.chargementMedia=!0,this.media=e,this.type="lien-image",this.$nextTick((function(){Ci("#media",(function(){this.chargementMedia=!1}).bind(this))}).bind(this))},verifierURL(e){let t;try{t=new URL(e)}catch{return!1}return t.protocol==="http:"||t.protocol==="https:"},convertirEnLien(){this.iframe="",this.media=this.lien,this.source="web",this.type="lien",(this.vignette===""||this.vignette==="/img/code.png")&&(this.vignette="/img/lien.png")},supprimerLien(){if(this.iframe.includes(this.etherpad)){const e=this.iframe.replace(this.etherpad+"/p/",""),t=this.etherpad+"/api/1/deletePad?apikey="+this.etherpadApi+"&padID="+e;Ct.get(t)}this.media="",this.lien="",this.iframe="",this.type="",this.source="",this.vignette="",this.vignetteDefaut="",this.resultats={},this.chargementVignette=!1},ajouterDocument(){this.chargementLien=!0,this.lien=this.etherpad+"/p/pad-"+this.pad.id+"-"+Math.random().toString(16).slice(2),this.iframe=this.lien,this.$nextTick((function(){this.media=this.lien,this.source="etherpad",this.type="embed";const e={};e.media=this.media,e.source=this.source,e.type=this.type,this.vignette=this.definirVignette(e),this.vignetteDefaut=this.definirVignette(e),this.chargementLien=!1}).bind(this))},ajouterVignette(){const e=document.querySelector("#televerser-vignette"),t=["jpg","jpeg","png","gif"],i=e.files[0].name.substring(e.files[0].name.lastIndexOf(".")+1).toLowerCase();if(e.files&&e.files[0]&&t.includes(i)&&e.files[0].size<3072e3){const a=e.files[0],s=new FormData;s.append("pad",this.pad.id),s.append("fichier",a),Ct.post(this.hote+"/api/televerser-vignette",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:(function(d){const r=parseInt(Math.round(d.loaded*100/d.total));this.progressionVignette=r}).bind(this)}).then((function(d){const r=d.data;r==="non_connecte"?window.location.replace("/"):r==="erreur_televersement"?(e.value="",this.progressionVignette=0,this.message=this.$t("erreurTeleversementVignette")):r==="erreur_espace_disque"?(e.value="",this.progressionVignette=0,this.message=this.$t("erreurEspaceDisque")):typeof r=="string"&&r.includes("/temp/")&&(this.vignette=r,this.$nextTick((function(){Ci("#vignette",(function(){this.progressionVignette=0,this.$nextTick(function(){const f=document.querySelector("#bloc");f.scrollTop=f.scrollHeight})}).bind(this))}).bind(this))),e.value=""}).bind(this)).catch((function(){e.value="",this.progressionVignette=0,this.message=this.$t("erreurCommunicationServeur")}).bind(this))}else t.includes(i)===!1?this.message=this.$t("formatFichierPasAccepte"):e.files[0].size>3072e3&&(this.message=this.$t("tailleMaximale",{taille:3})),e.value=""},remettreVignetteDefaut(){this.vignette=this.vignetteDefaut},modifierVisibiliteCapsule(){this.visibilite=!this.visibilite},ajouterBloc(){this.bloc="bloc-id-"+new Date().getTime()+Math.random().toString(16).slice(10),(this.titre!==""||this.texte!==""||this.media!=="")&&!this.enregistrement&&this.type!=="enregistrement"?(this.chargement=!0,this.$socket.emit("ajouterbloc",this.bloc,this.pad.id,this.pad.token,this.titre,this.texte,this.media,this.iframe,this.type,this.source,this.vignette,this.couleur,this.colonne,this.visibilite,this.identifiant,this.nom),this.modale=""):(this.titre!==""||this.texte!==""||this.media!=="")&&!this.enregistrement&&this.type==="enregistrement"&&this.ajouterAudio()},modifierBloc(){(this.titre!==""||this.texte!==""||this.media!=="")&&!this.enregistrement&&this.type!=="enregistrement"?(this.chargement=!0,this.$socket.emit("modifierbloc",this.bloc,this.pad.id,this.pad.token,this.titre,this.texte,this.media,this.iframe,this.type,this.source,this.vignette,this.couleur,this.colonne,this.visibilite,this.identifiant,this.nom),this.modale=""):(this.titre!==""||this.texte!==""||this.media!=="")&&!this.enregistrement&&this.type==="enregistrement"&&this.ajouterAudio()},autoriserBloc(e,t){this.chargement=!0;let i,a;this.blocs.forEach(function(s,d){s.bloc===e.bloc&&(i=d)}),this.pad.affichage==="colonnes"&&this.colonnes.forEach(function(s){s.forEach(function(d,r){d.bloc===e.bloc&&(a=r)})}),this.$socket.emit("autoriserbloc",this.pad.id,this.pad.token,e,i,a,t,this.identifiant)},fermerModaleBloc(){this.modale="",this.mode="",this.action="",this.titreModale="",this.colonne=0,this.bloc="",this.titre="",this.texte="",this.iframe="",this.vignette="",this.vignetteDefaut="",this.type="",this.source="",this.media="",this.lien="",this.progressionFichier=0,this.progressionVignette=0,this.progressionEnregistrement=!1,this.chargementLien=!1,this.chargementMedia=!1,this.chargementVignette=!1,this.resultats={},this.visibilite=!1,this.visibiliteInitiale="",this.donneesBloc={},this.blob="",this.enregistrement=!1,this.mediaRecorder="",this.flux=[],this.contexte="",this.dureeEnregistrement="00 : 00",this.intervalle!==""&&(clearInterval(this.intervalle),this.intervalle=""),this.transcodage=!1,this.gererFocus()},afficherSupprimerBloc(e,t,i){this.bloc=e,this.titre=t,this.colonne=i,this.messageConfirmation=this.$t("confirmationSupprimerCapsule"),this.typeConfirmation="supprimer-bloc",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},supprimerBloc(){this.modaleConfirmer=!1,this.chargement=!0,this.$socket.emit("supprimerbloc",this.bloc,this.pad.id,this.pad.token,this.titre,this.couleur,this.colonne,this.identifiant,this.nom)},fermerModaleConfirmer(){this.modaleConfirmer=!1,this.commentaireId="",this.titre="",this.messageConfirmation="",this.typeConfirmation="",this.gererFocus()},async afficherEnvoyerBloc(e,t){if(this.blocId=e,this.titre=t,Object.keys(this.donneesUtilisateur).length===0){this.chargement=!0;const i=await Ct.post(this.hote+"/api/recuperer-donnees-auteur",{identifiant:this.identifiant,pad:this.pad.id},{headers:{"Content-Type":"application/json"}}).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this));if(this.chargement=!1,i.data==="non_autorise")this.message=this.$t("actionNonAutorisee");else if(i.data==="erreur")this.message=this.$t("erreurCommunicationServeur");else{const a=i.data.padsCrees.filter((function(d){return parseInt(d.id)!==parseInt(this.pad.id)}).bind(this));a.sort(function(d,r){const f=d.titre.toLowerCase(),E=r.titre.toLowerCase();return f<E?-1:f>E?1:0});const s=i.data.padsAdmins.filter((function(d){return parseInt(d.id)!==parseInt(this.pad.id)}).bind(this));s.sort(function(d,r){const f=d.titre.toLowerCase(),E=r.titre.toLowerCase();return f<E?-1:f>E?1:0}),this.donneesUtilisateur.padsCrees=a,this.donneesUtilisateur.padsAdmins=s}}this.elementPrecedent=document.activeElement||document.body,this.modale="copier-bloc",this.$nextTick(function(){document.querySelector(".modale .fermer").focus()})},verifierColonnesDestination(){if(this.padDestination!==""){let e=!1;return this.donneesUtilisateur.padsCrees.forEach((function(t){parseInt(t.id)===parseInt(this.padDestination)&&t.affichage==="colonnes"&&JSON.parse(t.colonnes).length>0&&(e=!0)}).bind(this)),this.donneesUtilisateur.padsAdmins.forEach((function(t){parseInt(t.id)===parseInt(this.padDestination)&&t.affichage==="colonnes"&&JSON.parse(t.colonnes).length>0&&(e=!0)}).bind(this)),e}else return!1},definirNombreColonnesDestination(){let e=[];return this.donneesUtilisateur.padsCrees.forEach((function(t){parseInt(t.id)===parseInt(this.padDestination)&&(e=JSON.parse(t.colonnes))}).bind(this)),this.donneesUtilisateur.padsAdmins.forEach((function(t){parseInt(t.id)===parseInt(this.padDestination)&&(e=JSON.parse(t.colonnes))}).bind(this)),e},envoyerBloc(){if(this.padDestination!==""&&(this.verifierColonnesDestination()===!0&&this.colonneDestination!==""||this.verifierColonnesDestination()===!1&&this.colonneDestination==="")){let e={},t="",i=this.colonneDestination;if(this.blocs.forEach((function(a){a.bloc===this.blocId&&(e=a)}).bind(this)),this.donneesUtilisateur.padsCrees.forEach((function(a){parseInt(a.id)===parseInt(this.padDestination)&&(t=a.token)}).bind(this)),this.donneesUtilisateur.padsAdmins.forEach((function(a){parseInt(a.id)===parseInt(this.padDestination)&&(t=a.token)}).bind(this)),i===""&&(i=0),Object.keys(e).length>0&&t!==""){this.chargement=!0;const a="bloc-id-"+new Date().getTime()+Math.random().toString(16).slice(10);this.$socket.emit("copierbloc",a,this.padDestination,t,e.titre,e.texte,e.media,e.iframe,e.type,e.source,e.vignette,e.couleur,i,e.visibilite,this.identifiant,this.nom,this.pad.id),this.fermerModaleCopieBloc()}}},fermerModaleCopieBloc(){this.modale="",this.blocId="",this.titre="",this.padDestination="",this.colonneDestination="",this.gererFocus()},afficherVisionneuse(e){if(this.panneaux.map(function(t){return t.id}).includes("panneau_"+e.bloc)===!1){const t="image-"+new Date().getTime();let i;switch(e.type){case"image":i='<span id="'+t+'" class="image"><img src="/'+this.definirDossierFichiers(this.pad.id)+"/"+this.pad.id+"/"+e.media+'" alt="'+e.media+'"></span>';break;case"lien-image":i='<span id="'+t+'" class="image"><img src="'+e.media+'" alt="'+e.media+'"></span>';break;case"audio":i='<audio controls preload="metadata" src="/'+this.definirDossierFichiers(this.pad.id)+"/"+this.pad.id+"/"+e.media+'"></audio>';break;case"video":i='<video controls playsinline crossOrigin="anonymous" src="/'+this.definirDossierFichiers(this.pad.id)+"/"+this.pad.id+"/"+e.media+'"></video>';break;case"pdf":i='<iframe src="/pdfjs/web/viewer.html?file='+this.hote+"/"+this.definirDossierFichiers(this.pad.id)+"/"+this.pad.id+"/"+e.media+'" allowfullscreen></iframe>';break;case"document":case"office":i='<iframe src="https://view.officeapps.live.com/op/embed.aspx?src='+this.hote+"/"+this.definirDossierFichiers(this.pad.id)+"/"+this.pad.id+"/"+e.media+'" allowfullscreen></iframe>';break;case"embed":e.source==="etherpad"?i='<iframe src="'+e.media+"?userName="+this.nom+"&userColor="+this.couleur+'" allowfullscreen></iframe>':this.verifierURL(e.iframe)===!0?i='<iframe src="'+e.iframe+'" allow="autoplay; fullscreen"></iframe>':i='<div class="html">'+e.iframe+"</div>";break}this.$nextTick((function(){const a=this;let s="320px",d="312px",r="center";document.querySelector("#page").offsetWidth>1023?(s="948px",d="940px",r={my:"center",at:"center",offsetX:this.convertirRem(2),offsetY:this.convertirRem(2)}):document.querySelector("#page").offsetWidth<1024&&document.querySelector("#page").offsetWidth>359&&(s=document.querySelector("#page").offsetWidth-this.convertirRem(7)+"px",d="500px",parseInt(s)<328&&(s="328px"),r={my:"center",at:"center",offsetX:this.convertirRem(2),offsetY:this.convertirRem(2)}),parseInt(d)>document.querySelector("#page").offsetHeight-this.convertirRem(7)&&(d=document.querySelector("#page").offsetHeight-this.convertirRem(7)+"px");const f=this.definirOptionsSnap(),E=jsPanel.create({id:"panneau_"+e.bloc,animateIn:"jsPanelFadeIn",animateOut:"jsPanelFadeOut",iconfont:"material-icons",closeOnEscape:!0,border:"4px solid "+e.couleur,headerTitle:e.titre,position:r,maximizedMargin:0,syncMargins:!0,resizeit:{minWidth:200,minHeight:150},panelSize:{width:s,height:d},content:i,callback:function(F){if(F.setControlStatus("normalize","hide"),F.setControlStatus("minimize","remove"),document.querySelector("#masque").classList.add("ouvert"),e.type==="image"||e.type==="lien-image"){document.querySelector("#"+t+" img").style.maxHeight=document.querySelector("#"+F.id+" .jsPanel-content").clientHeight+"px";const b=document.querySelector("#"+t),p=fl(b,{maxScale:10,minScale:.5,panOnlyWhenZoomed:!0});b.parentElement.addEventListener("wheel",p.zoomWithWheel),F.addControl({html:'<span class="material-icons">adjust</span>',name:"dezoom",handler:function(){document.querySelector("#"+t+" img").style.maxHeight=document.querySelector("#"+F.id+" .jsPanel-content").clientHeight+"px",p.reset()}})}else e.type==="audio"?(F.resize({width:s,height:"150px"}).reposition(),F.addControl({html:'<a class="material-icons telecharger" download href="/'+a.definirDossierFichiers(a.pad.id)+"/"+a.pad.id+"/"+e.media+'" target="_blank">file_download</a>',name:"telecharger",handler:function(){}})):e.type==="embed"?F.addControl({html:'<span class="material-icons lien">link</span>',name:"copier-lien",handler:function(){let b;e.source==="etherpad"?b=e.media:a.verifierURL(e.iframe)===!0?b=e.iframe:b=e.iframe.match(/<iframe [^>]*src="[^"]*"[^>]*>/g).map(B=>B.replace(/.*src="([^"]*)".*/,"$1"))[0],new Fs("#panneau_"+e.bloc+" .lien",{text:function(){return b}}).on("success",function(){a.notification=a.$t("lienCopie")})}}):(e.type==="pdf"||e.type==="document"||e.type==="office")&&F.addControl({html:'<a class="material-icons telecharger" download href="/'+a.definirDossierFichiers(a.pad.id)+"/"+a.pad.id+"/"+e.media+'" target="_blank">file_download</a>',name:"telecharger",handler:function(){}})},onmaximized:function(F){(e.type==="image"||e.type==="lien-image")&&(document.querySelector("#"+t+" img").style.maxHeight=document.querySelector("#"+F.id+" .jsPanel-content").clientHeight+"px")},onbeforeclose:(function(F){const b=document.querySelectorAll(".jsPanel");return document.querySelector("#masque")&&b.length===1&&document.querySelector("#masque").classList.remove("ouvert"),this.panneaux.forEach((function(p,B){p.id===F.id&&this.panneaux.splice(B,1)}).bind(this)),!0}).bind(this),dragit:{snap:f}});this.panneaux.push(E)}).bind(this))}},definirOptionsSnap(){let e;return window.innerHeight<window.innerWidth?e={sensitivity:40,repositionOnSnap:!0,resizeToPreSnap:!0,snapLeftTop:function(t){t.resize({width:"50%",height:"100%"})},snapRightTop:function(t){t.resize({width:"50%",height:"100%"})},snapLeftBottom:function(t){t.resize({width:"50%",height:"100%"})},snapRightBottom:function(t){t.resize({width:"50%",height:"100%"})},snapCenterTop:!1,snapRightCenter:!1,snapCenterBottom:!1,snapLeftCenter:!1}:e={sensitivity:15,repositionOnSnap:!0,resizeToPreSnap:!0,snapCenterTop:function(t){t.resize({width:"100%",height:"50%"})},snapCenterBottom:function(t){t.resize({width:"100%",height:"50%"})},snapLeftTop:!1,snapRightCenter:!1,snapRightBottom:!1,snapRightTop:!1,snapLeftBottom:!1,snapLeftCenter:!1},e},activerDefilementHorizontal(){const e=document.querySelector("#pad");e.addEventListener("mousedown",this.defilementHorizontalDebut),e.addEventListener("mouseleave",this.defilementHorizontalFin),e.addEventListener("mouseup",this.defilementHorizontalFin),e.addEventListener("mousemove",this.defilementHorizontalEnCours)},desactiverDefilementHorizontal(){const e=document.querySelector("#pad");e.removeEventListener("mousedown",this.defilementHorizontalDebut),e.removeEventListener("mouseleave",this.defilementHorizontalFin),e.removeEventListener("mouseup",this.defilementHorizontalFin),e.removeEventListener("mousemove",this.defilementHorizontalEnCours)},defilementHorizontalDebut(e){const t=document.querySelector("#pad");this.defilement=!0,this.depart=e.pageX-t.offsetLeft,this.distance=t.scrollLeft},defilementHorizontalFin(){this.defilement=!1},defilementHorizontalEnCours(e){if(!this.defilement)return;e.preventDefault();const t=document.querySelector("#pad"),a=(e.pageX-t.offsetLeft-this.depart)*1.5;t.scrollLeft=this.distance-a},definirClasseOrganiser(){return this.blocs.length>1||this.pad.affichage==="colonnes"&&this.pad.colonnes.length>1},activerModeOrganiser(){(this.blocs.length>1||this.pad.affichage==="colonnes"&&this.pad.colonnes.length>1)&&(this.chargement=!0,this.menu="",this.recherche=!1,setTimeout((function(){this.chargement=!1,this.action="organiser",this.notification=this.$t("modeOrganiserActive")}).bind(this),100))},desactiverModeOrganiser(){this.chargement=!0,this.menu="",this.recherche=!1,setTimeout((function(){this.chargement=!1,this.action="",this.notification=this.$t("modeOrganiserDesactive")}).bind(this),100)},afficherModaleDiaporama(){if(this.blocs.length>0){this.panneaux.forEach(function(i){i.close()}),this.panneaux=[],this.chargement=!0;let e={};const t=document.querySelector(".bloc.actif");if(t){const i=t.id;this.blocs.forEach(function(a){a.bloc===i&&(e=a)})}else e=this.blocs[0],this.definirBlocActif(e.bloc);this.donneesBloc=e,this.menu="",this.elementPrecedent=document.activeElement||document.body,this.modaleDiaporama=!0,this.$nextTick((function(){document.querySelector("#diapositive").addEventListener("keydown",this.activerClavierDiaporama),document.querySelector("#diapositive").addEventListener("click",this.gererFocusCommentaires),document.querySelector("#diapositive .fermer").focus()}).bind(this)),this.pad.commentaires==="actives"?this.$socket.emit("commentaires",e.bloc,"diapositive"):this.$nextTick((function(){this.chargerDiapositive()}).bind(this))}},activerClavierDiaporama(e){e.ctrlKey&&e.key==="ArrowLeft"?this.afficherBlocPrecedent():e.ctrlKey&&e.key==="ArrowRight"&&this.afficherBlocSuivant()},afficherBlocPrecedent(){this.chargement=!0,this.commentaire="";const e=this.donneesBloc.bloc;let t=0,i=0;this.pad.affichage==="colonnes"?this.colonnes.forEach(function(a,s){a.forEach(function(d,r){d.bloc===e&&(t=r,i=s)})}):this.blocs.forEach(function(a,s){a.bloc===e&&(t=s)}),t--,t===-1&&this.pad.affichage!=="colonnes"?this.donneesBloc=this.blocs[this.blocs.length-1]:t!==-1&&this.pad.affichage!=="colonnes"?this.donneesBloc=this.blocs[t]:t===-1&&this.pad.affichage==="colonnes"?this.colonnes[i-1]?this.donneesBloc=this.colonnes[i-1][this.colonnes[i-1].length-1]:this.donneesBloc=this.colonnes[this.colonnes.length-1][this.colonnes[this.colonnes.length-1].length-1]:t!==-1&&this.pad.affichage==="colonnes"&&(this.donneesBloc=this.colonnes[i][t]),this.definirBlocActif(this.donneesBloc.bloc),this.pad.commentaires==="actives"?(this.editeurCommentaire.content.innerHTML="",this.editionCommentaire&&this.annulerModifierCommentaire(),this.$socket.emit("commentaires",this.donneesBloc.bloc,"diapositive")):this.chargerDiapositive()},afficherBlocSuivant(){this.chargement=!0,this.commentaire="";const e=this.donneesBloc.bloc;let t=0,i=0;this.pad.affichage==="colonnes"?this.colonnes.forEach(function(a,s){a.forEach(function(d,r){d.bloc===e&&(t=r,i=s)})}):this.blocs.forEach(function(a,s){a.bloc===e&&(t=s)}),t++,t===this.blocs.length&&this.pad.affichage!=="colonnes"?this.donneesBloc=this.blocs[0]:t!==this.blocs.length&&this.pad.affichage!=="colonnes"?this.donneesBloc=this.blocs[t]:t===this.colonnes[i].length&&this.pad.affichage==="colonnes"?this.colonnes[i+1]?this.donneesBloc=this.colonnes[i+1][0]:this.donneesBloc=this.colonnes[0][0]:t!==this.colonnes[i].length&&this.pad.affichage==="colonnes"&&(this.donneesBloc=this.colonnes[i][t]),this.definirBlocActif(this.donneesBloc.bloc),this.pad.commentaires==="actives"?(this.editeurCommentaire.content.innerHTML="",this.editionCommentaire&&this.annulerModifierCommentaire(),this.$socket.emit("commentaires",this.donneesBloc.bloc,"diapositive")):this.chargerDiapositive()},definirBlocActif(e){const t=document.querySelector(".bloc.actif");t&&t.classList.remove("actif"),document.querySelector("#"+e)&&(document.querySelector("#"+e).classList.add("actif"),document.querySelector("#"+e).focus())},definirTypeMedia(){return this.donneesBloc.source==="youtube"||this.donneesBloc.source==="vimeo"||this.donneesBloc.source==="dailymotion"||this.donneesBloc.source==="digiview"?"video":this.donneesBloc.source==="slideshare"||this.donneesBloc.source==="soundcloud"||this.donneesBloc.media.includes("clyp.it")||this.donneesBloc.media.includes("vocaroo.com")||this.donneesBloc.media.includes("voca.ro")?"embed":"document"},chargerDiapositive(){const e=(function(){this.chargement=!1,this.$nextTick((function(){document.querySelector("#diapositive .contenu").style.height=document.querySelector("#diapositive").clientHeight-this.convertirRem(5)+"px",this.pad.commentaires==="actives"&&this.genererEditeur()}).bind(this))}).bind(this);if(document.querySelector("#diapositive"))switch(document.querySelector("#diapositive .contenu").removeAttribute("style"),this.donneesBloc.type){case"audio":this.$nextTick(function(){const t=document.querySelector("#diapositive audio");t.addEventListener("loadedmetadata",function(){e()}),t.readyState>=2&&e()});break;case"video":this.$nextTick(function(){const t=document.querySelector("#diapositive video");t.addEventListener("loadedmetadata",function(){e()}),t.readyState>=2&&e()});break;default:this.$nextTick(function(){Ci("#diapositive",function(){e()})});break}else this.chargement=!1},fermerModaleDiaporama(){document.querySelector("#diapositive").removeEventListener("keydown",this.activerClavierDiaporama),document.querySelector("#diapositive").removeEventListener("click",this.gererFocusCommentaires),this.modaleDiaporama=!1,this.commentaires=[],this.commentaire="",this.commentaireId="",this.commentaireModifie="",this.editeurCommentaire="",this.focusId="",this.emojis="",this.donneesBloc={},this.gererFocus()},ouvrirModaleAdmins(){this.menu="",this.admins=JSON.parse(JSON.stringify(this.pad.admins)),this.modale="admins",this.$nextTick(function(){document.querySelector(".modale .fermer").focus()})},ajouterAdmin(){const e=document.querySelector("#ajouter-admin input").value.trim();e!==""&&this.identifiant!==e&&!this.admins.includes(e)&&(this.chargement=!0,Ct.post(this.hote+"/api/verifier-identifiant",{identifiant:e}).then((function(t){this.chargement=!1;const i=t.data;i==="erreur"?this.message=this.$t("erreurCommunicationServeur"):i==="identifiant_non_valide"?this.message=this.$t("identifiantNonValide"):this.admins.push(e),document.querySelector("#ajouter-admin input").value=""}).bind(this)).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this)))},supprimerAdmin(e){const t=this.admins.indexOf(e);this.admins.splice(t,1)},modifierAdmins(){this.admins.toString()!==this.pad.admins.toString()&&(this.modale="",this.$socket.emit("modifieradmins",this.pad.id,this.admins,this.identifiant),this.chargement=!0)},fermerModaleAdmins(){this.modale="",this.admins=[],this.gererFocus()},ouvrirModaleCommentaires(e,t){this.chargement=!0,this.bloc=e,this.titre=t,this.$socket.emit("commentaires",e,"discussion")},envoyerCommentaire(e){e.preventDefault();let t=this.bloc;Object.keys(this.donneesBloc).length>0&&(t=this.donneesBloc.bloc),this.commentaire!==""&&(this.$socket.emit("commenterbloc",t,this.pad.id,this.titre,this.commentaire,this.couleur,this.identifiant,this.nom),this.commentaire="",this.commentaireId="",this.commentaireModifie="",this.editeurCommentaire.content.innerHTML="",this.emojis="",this.focusId="")},afficherModifierCommentaire(e,t){this.commentaireId=e,this.commentaireModifie=t,this.editionCommentaire=!0,this.emojis="",this.$nextTick((function(){const i=this.definirActionsEditeur("commentaire-modifie"),a=ft.init({element:document.querySelector("#commentaire-modifie"),onChange:(function(s){let d=s.replace(/(<a [^>]*)(target="[^"]*")([^>]*>)/gi,"$1$3");d=d.replace(/(<a [^>]*)(>)/gi,'$1 target="_blank"$2'),d=Is(d,{defaultProtocol:"https",target:"_blank"}),this.commentaireModifie=d}).bind(this),actions:i,classes:{actionbar:"boutons-editeur-commentaire",button:"bouton-editeur",content:"contenu-editeur-commentaire",selected:"bouton-actif"}});a.content.innerHTML=this.commentaireModifie,a.onpaste=function(s){s.preventDefault(),s.stopPropagation();let d=s.clipboardData.getData("text/html");d!==""?(d=$s(d,["b","i","u","a","br","div","font","ul","ol"]),d=d.replace(/style=".*?"/mg,""),d=d.replace(/class=".*?"/mg,""),ft.exec("insertHTML",d)):ft.exec("insertText",s.clipboardData.getData("text/plain"))},document.querySelector("#couleur-texte-commentaire-modifie").addEventListener("change",this.modifierCouleurCommentaireModifie),document.querySelector("#commentaire-"+this.commentaireId+" .action span").focus()}).bind(this))},annulerModifierCommentaire(){const e=this.commentaireId;this.commentaireId="",this.commentaireModifie="",this.editionCommentaire=!1,this.emojis="",this.$nextTick(function(){document.querySelector("#commentaire-"+e+" .action span").focus()})},modifierCommentaire(){let e=this.bloc;Object.keys(this.donneesBloc).length>0&&(e=this.donneesBloc.bloc),this.$socket.emit("modifiercommentaire",e,this.pad.id,this.commentaireId,this.commentaireModifie,this.identifiant),this.commentaireId="",this.commentaireModifie="",this.editionCommentaire=!1,this.emojis=""},afficherSupprimerCommentaire(e){this.editionCommentaire=!1,this.commentaireId=e,this.messageConfirmation=this.$t("confirmationSupprimerCommentaire"),this.typeConfirmation="supprimer-commentaire",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},supprimerCommentaire(){this.modaleConfirmer=!1;let e=this.bloc;Object.keys(this.donneesBloc).length>0&&(e=this.donneesBloc.bloc),this.$socket.emit("supprimercommentaire",e,this.pad.id,this.commentaireId,this.identifiant),this.fermerModaleConfirmer()},genererEditeur(){if(this.editeurCommentaire===""){const e=this.definirActionsEditeur("commentaire");this.editeurCommentaire=ft.init({element:document.querySelector("#commentaire"),onChange:(function(t){let i=t.replace(/(<a [^>]*)(target="[^"]*")([^>]*>)/gi,"$1$3");i=i.replace(/(<a [^>]*)(>)/gi,'$1 target="_blank"$2'),i=Is(i,{defaultProtocol:"https",target:"_blank"}),this.commentaire=i}).bind(this),actions:e,classes:{actionbar:"boutons-editeur-commentaire",button:"bouton-editeur",content:"contenu-editeur-commentaire",selected:"bouton-actif"}}),this.editeurCommentaire.onpaste=function(t){t.preventDefault(),t.stopPropagation();let i=t.clipboardData.getData("text/html");i!==""?(i=$s(i,["b","i","u","a","br","div","font","ul","ol"]),i=i.replace(/style=".*?"/mg,""),i=i.replace(/class=".*?"/mg,""),ft.exec("insertHTML",i)):ft.exec("insertText",t.clipboardData.getData("text/plain"))},document.querySelector("#couleur-texte-commentaire").addEventListener("change",this.modifierCouleurCommentaire)}},definirActionsEditeur(e){return[{name:"gras",title:this.$t("gras"),icon:'<i class="material-icons">format_bold</i>',result:()=>ft.exec("bold")},{name:"italique",title:this.$t("italique"),icon:'<i class="material-icons">format_italic</i>',result:()=>ft.exec("italic")},{name:"souligne",title:this.$t("souligne"),icon:'<i class="material-icons">format_underlined</i>',result:()=>ft.exec("underline")},{name:"barre",title:this.$t("barre"),icon:'<i class="material-icons">format_strikethrough</i>',result:()=>ft.exec("strikethrough")},{name:"couleur",title:this.$t("couleurTexte"),icon:'<label for="couleur-texte-'+e+'"><i class="material-icons">format_color_text</i></label><input id="couleur-texte-'+e+'" type="color">',result:()=>{}},{name:"lien",title:this.$t("lien"),icon:'<i class="material-icons">link</i>',result:()=>{const i=window.prompt(this.$t("adresseLien"));i&&ft.exec("createLink",i)}},{name:"emojis",title:this.$t("emoticones"),icon:'<i class="material-icons">insert_emoticon</i>',result:(function(){this.afficherEmojis(e)}).bind(this)}]},afficherEmojis(e){e==="commentaire"&&this.emojis!=="commentaire"?this.emojis="commentaire":e==="commentaire"&&this.emojis==="commentaire"?this.emojis="":e==="commentaire-modifie"&&this.emojis!=="commentaire-modifie"?this.emojis="commentaire-modifie":e==="commentaire-modifie"&&this.emojis==="commentaire-modifie"&&(this.emojis="")},insererEmoji(e){ft.exec("insertText",e)},fermerModaleCommentaires(){document.querySelector("#discussion").removeEventListener("click",this.gererFocusCommentaires),this.modale="",this.commentaires=[],this.commentaire="",this.commentaireId="",this.commentaireModifie="",this.editeurCommentaire="",this.editionCommentaire=!1,this.focusId="",this.emojis="",this.bloc="",this.titre="",this.gererFocus()},verifierUtilisateurEvaluation(e){if(e&&e.length>0){let t=!1;return e.forEach((function(i){i.identifiant===this.identifiant&&(t=!0)}).bind(this)),t}else return!1},definirEvaluationCapsule(e){if(e&&e.length>0){let t=0;return e.forEach(function(i){t=t+i.etoiles}),t>0?Math.round(t/e.length):0}else return 0},ouvrirModaleEvaluations(e,t,i){this.bloc=e,this.titre=t,i!==""&&(this.evaluations=i,i.forEach((function(a){a.identifiant===this.identifiant&&(this.evaluationId=a.id,this.evaluation=a.etoiles)}).bind(this))),this.elementPrecedent=document.activeElement||document.body,this.modale="evaluations",this.$nextTick(function(){document.querySelector(".modale .fermer").focus()})},envoyerEvaluation(){let e=this.bloc;Object.keys(this.donneesBloc).length>0?e=this.donneesBloc.bloc:this.chargement=!0,this.$socket.emit("evaluerbloc",e,this.pad.id,this.titre,this.evaluation,this.couleur,this.identifiant,this.nom),this.fermerModaleEvaluations()},modifierEvaluation(){let e=this.bloc;Object.keys(this.donneesBloc).length>0?e=this.donneesBloc.bloc:this.chargement=!0,this.evaluation===0?this.$socket.emit("supprimerevaluation",e,this.pad.id,this.evaluationId,this.identifiant):this.$socket.emit("modifierevaluation",e,this.pad.id,this.evaluationId,this.evaluation,this.identifiant),this.fermerModaleEvaluations()},fermerModaleEvaluations(){this.modale="",this.evaluations=[],this.evaluation=0,this.evaluationId="",this.bloc="",this.titre="",this.gererFocus()},demarrerDeplacerBloc(){this.pad.affichage==="colonnes"&&(this.desactiverDefilementHorizontal(),this.defilement=!1,this.depart=0,this.distance=0)},deplacerBloc(e){if(this.chargement=!0,this.pad.affichage==="colonnes"){this.activerDefilementHorizontal();const i=[];this.colonnes.forEach(function(a,s){a.forEach(function(d,r){a[r].colonne=s}),i.push(...a)}),this.blocs=i}let t="croissant";this.pad.hasOwnProperty("ordre")&&(t=this.pad.ordre),this.$socket.emit("deplacerbloc",this.blocs,this.pad.id,this.pad.affichage,t,this.identifiant),this.$nextTick((function(){const i=document.querySelectorAll(".bloc.actif");i.length>0&&i.forEach(function(s){s.classList.remove("actif")});let a;if(this.pad.affichage==="colonnes"){const s=e.to.getAttribute("data-index");a=e.newIndex,this.colonnes[s][a]&&this.colonnes[s][a].bloc&&(document.querySelector("#"+this.colonnes[s][a].bloc).classList.add("actif"),document.querySelector("#"+this.colonnes[s][a].bloc).focus())}else a=e.newIndex,this.blocs[a]&&this.blocs[a].bloc&&(document.querySelector("#"+this.blocs[a].bloc).classList.add("actif"),document.querySelector("#"+this.blocs[a].bloc).focus())}).bind(this))},surlignerBloc(e){const t=document.querySelector(".bloc.actif");t&&document.querySelector("#pad").contains(e.target)&&t.classList.remove("actif");const i=e.target.closest(".bloc")||e.target.closest("li");if(i&&i.hasAttribute("data-bloc")){t&&t.classList.remove("actif");const a=i.getAttribute("data-bloc");document.querySelector("#"+a)&&(document.querySelector("#"+a).classList.add("actif"),document.querySelector("#"+a).focus(),document.querySelector("#entrees")&&document.querySelector("#entrees").contains(e.target)&&document.querySelector("#"+a).scrollIntoView())}},redimensionner(){const e=document.querySelector("#diapositive");if(e){const i=document.querySelector("#diapositive .contenu");i.removeAttribute("style"),this.$nextTick((function(){i.style.height=e.clientHeight-this.convertirRem(5)+"px"}).bind(this))}const t=document.querySelector("#blocs");t&&this.$nextTick(function(){t.classList.add("anime"),t.addEventListener("animationend",function(){t.classList.remove("anime")})}),this.enregistrement===!0&&this.$nextTick(function(){const i=document.querySelector("#enregistrement").offsetWidth,a=document.querySelector("#visualisation");a.width=i})},afficherActivite(){this.menu!=="activite"?(this.elementPrecedent=document.activeElement||document.body,this.menu="activite",this.$nextTick(function(){setTimeout(function(){document.querySelector("#menu-activite").classList.add("ouvert"),document.querySelector("#menu-activite .fermer").focus()},0)})):this.fermerMenu()},afficherChat(){this.nouveauxMessagesChat=0,this.menu!=="chat"?(this.elementPrecedent=document.activeElement||document.body,this.menu="chat",this.$nextTick(function(){setTimeout(function(){document.querySelector("#menu-conversation").classList.add("ouvert"),document.querySelector("#menu-conversation .fermer").focus()},0)})):this.fermerMenu()},afficherOptions(){this.menu!=="options"?(this.elementPrecedent=document.activeElement||document.body,this.menu="options",this.$nextTick(function(){setTimeout(function(){document.querySelector("#menu-options").classList.add("ouvert"),document.querySelector("#menu-options .fermer").focus()},0)})):this.fermerMenuOptions()},afficherUtilisateurs(){this.listeCouleurs=!1,this.menu!=="utilisateurs"?(this.elementPrecedent=document.activeElement||document.body,this.menu="utilisateurs",this.$nextTick(function(){setTimeout(function(){document.querySelector("#menu-utilisateurs").classList.add("ouvert"),document.querySelector("#menu-utilisateurs .fermer").focus()},0)})):this.fermerMenu()},fermerMenu(){this.menu="",this.gererFocus()},envoyerMessage(){this.messageChat!==""&&(this.$socket.emit("message",this.pad.id,this.messageChat,this.identifiant,this.nom),this.messageChat="")},afficherReinitialiserMessages(){this.messageConfirmation=this.$t("confirmationSupprimerMessages"),this.typeConfirmation="reinitialiser-messages",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},reinitialiserMessages(){this.$socket.emit("reinitialisermessages",this.pad.id,this.identifiant),this.chargement=!0,this.menu="",this.fermerModaleConfirmer()},afficherReinitialiserActivite(){this.messageConfirmation=this.$t("confirmationSupprimerActivite"),this.typeConfirmation="reinitialiser-activite",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},reinitialiserActivite(){this.$socket.emit("reinitialiseractivite",this.pad.id,this.identifiant),this.chargement=!0,this.menu="",this.fermerModaleConfirmer()},supprimerActivite(e){this.$socket.emit("supprimeractivite",this.pad.id,e,this.identifiant),this.chargement=!0},modifierTitre(){const e=document.querySelector("#titre-pad").value;this.pad.titre!==e&&e!==""&&(this.$socket.emit("modifiertitre",this.pad.id,e,this.identifiant),this.chargement=!0)},modifierLangue(e){this.langue!==e&&Ct.post(this.hote+"/api/modifier-langue",{identifiant:this.identifiant,langue:e}).then((function(){this.$i18n.locale=e,document.getElementsByTagName("html")[0].setAttribute("lang",e),this.langue=e,this.notification=this.$t("langueModifiee")}).bind(this)).catch((function(){this.message=this.$t("erreurCommunicationServeur")}).bind(this))},copierLien(){document.querySelector("#copier-lien .lien").click()},copierIframe(){document.querySelector("#copier-code span").click()},afficherCodeQR(){this.elementPrecedent=document.activeElement||document.body,this.modale="code-qr",this.$nextTick((function(){const e=this.hote+"/p/"+this.pad.id+"/"+this.pad.token;this.codeqr=new QRCode("qr",{text:e,width:360,height:360,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),document.querySelector(".modale .fermer").focus()}).bind(this))},modifierAcces(e){this.pad.acces!==e&&(this.$socket.emit("modifieracces",this.pad.id,e,this.identifiant),this.chargement=!0)},afficherCodeAcces(){this.codeVisible=!0},masquerCodeAcces(){this.modificationCode=!1,this.codeVisible=!1},afficherModifierCodeAcces(){this.codeVisible=!0,this.modificationCode=!0},annulerModifierCodeAcces(){this.codeVisible=!1,this.modificationCode=!1},modifierCodeAcces(){const e=document.querySelector("#code-acces input").value;this.pad.code!==e&&e!==""&&(this.$socket.emit("modifiercodeacces",this.pad.id,e,this.identifiant),this.chargement=!0)},verifierCodeAcces(){this.codeAcces!==""&&(this.chargement=!0,Ct.post(this.hote+"/api/verifier-code-acces",{pad:this.pad.id,code:this.codeAcces}).then((function(e){const t=e.data;t==="code_incorrect"?(this.chargement=!1,this.message=this.$t("codePasCorrect")):t==="erreur"?(this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")):(this.chargement=!1,this.accesAutorise=!0,this.blocs=t.blocs,this.activite=t.activite,this.pad.affichage=t.pad.affichage,this.pad.colonnes=t.pad.colonnes,this.pad.affichageColonnes=t.pad.affichageColonnes,this.pad.affichage==="colonnes"&&(this.definirColonnes(this.blocs),this.$nextTick((function(){this.activerDefilementHorizontal()}).bind(this))),this.$socket.emit("connexion",{pad:this.pad.id,identifiant:this.identifiant,nom:this.nom}),this.fermerModaleCodeAcces())}).bind(this)).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this)))},fermerModaleCodeAcces(){this.codeAcces="",this.modale="",this.masquerCodeAcces(),this.gererFocus()},modifierContributions(e){this.pad.contributions!==e&&(this.$socket.emit("modifiercontributions",this.pad.id,e,this.pad.contributions,this.identifiant),this.chargement=!0)},modifierAffichage(e){this.pad.affichage!==e&&(this.$socket.emit("modifieraffichage",this.pad.id,e,this.identifiant),this.chargement=!0)},modifierOrdre(e){this.pad.ordre!==e&&(this.$socket.emit("modifierordre",this.pad.id,e,this.identifiant),this.chargement=!0)},modifierLargeur(e){this.pad.largeur!==e&&(this.$socket.emit("modifierlargeur",this.pad.id,e,this.identifiant),this.chargement=!0)},modifierFond(e){this.pad.fond!==e&&(this.$socket.emit("modifierfond",this.pad.id,"/img/"+e,this.pad.fond,this.identifiant),this.chargement=!0)},modifierCouleurFond(e){this.pad.fond!==e.target.value&&(this.$socket.emit("modifiercouleurfond",this.pad.id,e.target.value,this.pad.fond,this.identifiant),this.chargement=!0)},ajouterFond(){const e=document.querySelector("#televerser-fond"),t=["jpg","jpeg","png","gif"],i=e.files[0].name.substring(e.files[0].name.lastIndexOf(".")+1).toLowerCase();if(e.files&&e.files[0]&&t.includes(i)){this.chargement=!0;const a=e.files[0],s=new FormData;s.append("pad",this.pad.id),s.append("fichier",a),Ct.post(this.hote+"/api/televerser-fond",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:(function(d){const r=parseInt(Math.round(d.loaded*100/d.total));this.progressionFond=r}).bind(this)}).then((function(d){const r=d.data;r==="non_connecte"?window.location.replace("/"):r==="erreur_televersement"?(this.chargement=!1,e.value="",this.progressionFond=0,this.message=this.$t("erreurTeleversementFichier")):r==="erreur_espace_disque"?(this.chargement=!1,e.value="",this.progressionFond=0,this.message=this.$t("erreurEspaceDisque")):this.$socket.emit("modifierfond",this.pad.id,r,this.pad.fond,this.identifiant),this.progressionFond=0,e.value=""}).bind(this)).catch((function(){this.chargement=!1,e.value="",this.progressionFond=0,this.message=this.$t("erreurCommunicationServeur")}).bind(this))}else this.message=this.$t("formatFichierPasAccepte"),e.value=""},modifierActivite(e){e.target.checked===!0?this.$socket.emit("modifieractivite",this.pad.id,"active",this.identifiant):this.$socket.emit("modifieractivite",this.pad.id,"desactive",this.identifiant),this.chargement=!0},modifierConversation(e){e.target.checked===!0?this.$socket.emit("modifierconversation",this.pad.id,"activee",this.identifiant):this.$socket.emit("modifierconversation",this.pad.id,"desactivee",this.identifiant),this.chargement=!0},modifierListeUtilisateurs(e){e.target.checked===!0?this.$socket.emit("modifierlisteutilisateurs",this.pad.id,"activee",this.identifiant):this.$socket.emit("modifierlisteutilisateurs",this.pad.id,"desactivee",this.identifiant),this.chargement=!0},modifierEditionNom(e){e.target.checked===!0?this.$socket.emit("modifiereditionnom",this.pad.id,"activee",this.identifiant):this.$socket.emit("modifiereditionnom",this.pad.id,"desactivee",this.identifiant),this.chargement=!0},modifierFichiers(e){e.target.checked===!0?this.$socket.emit("modifierfichiers",this.pad.id,"actives",this.identifiant):this.$socket.emit("modifierfichiers",this.pad.id,"desactives",this.identifiant),this.chargement=!0},modifierEnregistrements(e){e.target.checked===!0?this.$socket.emit("modifierenregistrements",this.pad.id,"actives",this.identifiant):this.$socket.emit("modifierenregistrements",this.pad.id,"desactives",this.identifiant),this.chargement=!0},modifierLiens(e){e.target.checked===!0?this.$socket.emit("modifierliens",this.pad.id,"actives",this.identifiant):this.$socket.emit("modifierliens",this.pad.id,"desactives",this.identifiant),this.chargement=!0},modifierDocuments(e){e.target.checked===!0?this.$socket.emit("modifierdocuments",this.pad.id,"actives",this.identifiant):this.$socket.emit("modifierdocuments",this.pad.id,"desactives",this.identifiant),this.chargement=!0},modifierCommentaires(e){e.target.checked===!0?this.$socket.emit("modifiercommentaires",this.pad.id,"actives",this.identifiant):this.$socket.emit("modifiercommentaires",this.pad.id,"desactives",this.identifiant),this.chargement=!0},modifierEvaluations(e){e.target.checked===!0?this.$socket.emit("modifierevaluations",this.pad.id,"activees",this.identifiant):this.$socket.emit("modifierevaluations",this.pad.id,"desactivees",this.identifiant),this.chargement=!0},modifierCopieBloc(e){e.target.checked===!0?this.$socket.emit("modifiercopiebloc",this.pad.id,"activee",this.identifiant):this.$socket.emit("modifiercopiebloc",this.pad.id,"desactivee",this.identifiant),this.chargement=!0},fermerMenuOptions(){this.menu="",document.querySelector("#titre-pad")&&(document.querySelector("#titre-pad").value=this.pad.titre),this.codeVisible=!1,this.gererFocus()},modifierCouleur(e){this.listeCouleurs=!1,this.couleur=e,this.$socket.emit("modifiercouleur",this.pad.id,e,this.identifiant)},afficherModifierNom(){this.nomUtilisateur=this.nom,this.elementPrecedent=document.activeElement||document.body,this.modale="modifier-nom",this.$nextTick(function(){document.querySelector("#champ-nom").focus()})},modifierNom(){const e=this.nomUtilisateur;e!==""&&(this.$socket.emit("modifiernom",this.pad.id,e,this.statut,this.identifiant),this.chargement=!0,this.fermerModaleModifierNom())},fermerModaleModifierNom(){this.modale="",this.nomUtilisateur="",this.gererFocus()},modifierCaracteristique(e,t,i){this.blocs.forEach(function(a){a.identifiant===e&&a.hasOwnProperty(t)&&(a[t]=i)}),this.commentaires.forEach(function(a){a.identifiant===e&&a.hasOwnProperty(t)&&(a[t]=i)}),this.activite.forEach(function(a){a.identifiant===e&&a.hasOwnProperty(t)&&(a[t]=i)}),this.messagesChat.forEach(function(a){a.identifiant===e&&a.hasOwnProperty(t)&&(a[t]=i)}),this.utilisateurs.forEach(function(a){a.identifiant===e&&a.hasOwnProperty(t)&&(a[t]=i)})},eclaircirCouleur(e){if(e&&e.substring(0,1)==="#"){const t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return"rgba("+t+", "+i+", "+a+", "+.15+")"}else return"transparent"},convertirRem(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},deconnexion(){const e=this.identifiant;Ct.post(this.hote+"/api/deconnexion").then((function(){this.$socket.emit("deconnexion",e),window.location.replace("/")}).bind(this)).catch((function(){this.message=this.$t("erreurCommunicationServeur")}).bind(this))},afficherModaleModifierMotDePasse(){this.menu="",this.modale="modifier-mot-de-passe",this.$nextTick(function(){document.querySelector("#champ-motdepasse-actuel").focus()})},modifierMotDePasse(){const e=this.motDePasse,t=this.nouveauMotDePasse;e!==""&&t!==""?(this.modale="",this.chargement=!0,Ct.post(this.hote+"/api/modifier-mot-de-passe-pad",{pad:this.pad.id,identifiant:this.identifiant,motdepasse:e,nouveaumotdepasse:t}).then((function(i){const a=i.data;a==="non_connecte"?window.location.replace("/"):a==="motdepasse_incorrect"?(this.chargement=!1,this.message=this.$t("motDePasseActuelPasCorrect")):a==="erreur"?(this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")):(this.notification=this.$t("motDePasseModifie"),this.fermerModaleModifierMotDePasse(),this.chargement=!1)}).bind(this)).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this))):this.message=this.$t("remplirChamps")},fermerModaleModifierMotDePasse(){this.modale="",this.motDePasse="",this.nouveauMotDePasse="",this.gererFocus()},afficherModaleMotDePasse(){this.elementPrecedent=document.activeElement||document.body,this.modale="mot-de-passe",this.$nextTick(function(){document.querySelector("#champ-motdepasse").focus()})},verifierMotDePasse(){this.chargement=!0,Ct.post(this.hote+"/api/verifier-mot-de-passe",{pad:this.pad.id,motdepasse:this.motDePasse}).then((function(e){const t=e.data;t==="motdepasse_incorrect"?(this.chargement=!1,this.message=this.$t("motDePassePasCorrect")):t==="erreur"?(this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")):(this.$socket.emit("debloquerpad",this.pad.id,this.pad.identifiant,this.accesAutorise),this.fermerModaleMotDePasse())}).bind(this)).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this))},fermerModaleMotDePasse(){this.motDePasse="",this.modale="",this.masquerCodeAcces(),this.gererFocus()},afficherSeDeconnecterPad(){this.messageConfirmation=this.$t("confirmationSeDeconnecterPad"),this.typeConfirmation="deconnecter-pad",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},seDeconnecterPad(){this.modaleConfirmer=!1,this.chargement=!0,Ct.post(this.hote+"/api/deconnecter-pad",{identifiant:this.identifiant}).then((function(e){e.data==="deconnecte"&&window.location.reload(),this.chargement=!1}).bind(this)).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this))},afficherExporterPad(){this.messageConfirmation=this.$t("confirmationExporterPad"),this.typeConfirmation="exporter-pad",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},exporterPad(){this.modaleConfirmer=!1,this.chargement=!0,Ct.post(this.hote+"/api/exporter-pad",{padId:this.pad.id,identifiant:this.identifiant,admin:""}).then((function(e){this.chargement=!1;const t=e.data;t==="erreur_export"?this.message=this.$t("erreurExportPad"):t==="non_autorise"?this.message=this.$t("actionNonAutorisee"):Sc("/temp/"+t,"pad-"+this.pad.id+".zip")}).bind(this)).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this))},afficherSupprimerPad(){this.messageConfirmation=this.$t("confirmationSupprimerPad"),this.typeConfirmation="supprimer-pad",this.elementPrecedent=document.activeElement||document.body,this.modaleConfirmer=!0,this.$nextTick(function(){document.querySelector(".modale .bouton").focus()})},supprimerPad(){this.modaleConfirmer=!1,this.chargement=!0,Ct.post(this.hote+"/api/supprimer-pad",{padId:this.pad.id,type:"pad",identifiant:this.identifiant,admin:""}).then((function(e){const t=e.data;t==="non_connecte"?window.location.replace("/"):t==="erreur_suppression"?(this.chargement=!1,this.message=this.$t("erreurSuppressionPad")):t==="non_autorise"?(this.chargement=!1,this.message=this.$t("actionNonAutorisee")):window.location.replace("/")}).bind(this)).catch((function(){this.chargement=!1,this.message=this.$t("erreurCommunicationServeur")}).bind(this))},envoyerNotificationAdmins(){if(this.identifiant!==this.pad.identifiant){const e=[];let t=[];this.pad.hasOwnProperty("notification")&&(t=this.pad.notification),!this.utilisateurs.map(function(i){return i.identifiant}).includes(this.pad.identifiant)&&!t.includes(this.pad.identifiant)&&e.push(this.pad.identifiant),this.pad.admins.forEach((function(i){!this.utilisateurs.map(function(a){return a.identifiant}).includes(i)&&!t.includes(i)&&e.push(i)}).bind(this)),e.length>0&&this.$socket.emit("modifiernotification",this.pad.id,e)}},definirLienFichier(e,t){if(this.mode==="creation"||this.mode==="edition"&&this.donneesBloc.media!==t)return"/temp/"+t;if(this.mode==="edition"&&this.donneesBloc.media===t)return"/"+this.definirDossierFichiers(e)+"/"+e+"/"+t},definirLienVignette(e,t){if(this.mode==="creation"||this.mode==="edition"&&this.donneesBloc.vignette!=="/"+this.definirDossierFichiers(e)+"/"+e+"/"+t)return"/temp/"+t;if(this.mode==="edition"&&this.donneesBloc.vignette==="/"+this.definirDossierFichiers(e)+"/"+e+"/"+t)return"/"+this.definirDossierFichiers(e)+"/"+e+"/"+t},definirDossierFichiers(e){return parseInt(e)>parseInt("840000")?"nfs6":parseInt(e)>parseInt("710000")?"nfs5":parseInt(e)>parseInt("570000")?"nfs4":parseInt(e)>parseInt("455000")?"nfs3":parseInt(e)>parseInt("320000")?"nfs2":parseInt(e)>parseInt("170000")?"nfs":"fichiers"},quitterPage(){this.$socket.emit("sortie",this.pad.id,this.identifiant)},transcoder(e){const t=e.numberOfChannels,i=e.length*t*2+44,a=new ArrayBuffer(i),s=new DataView(a),d=[];let r,f,E=0,F=0;for(C(1179011410),C(i-8),C(1163280727),C(544501094),C(16),_(1),_(t),C(e.sampleRate),C(e.sampleRate*2*t),_(t*2),_(16),C(1635017060),C(i-F-4),r=0;r<e.numberOfChannels;r++)d.push(e.getChannelData(r));for(;F<i;){for(r=0;r<t;r++)f=Math.max(-1,Math.min(1,d[r][E])),f=(.5+f<0?f*32768:f*32767)|0,s.setInt16(F,f,!0),F+=2;E++}const b=ns.WavHeader.readHeader(new DataView(a)),p=new Int16Array(a,b.dataOffset,b.dataLen/2),B=[],te=[];for(let R=0;R<p.length;R+=2)B.push(p[R]),te.push(p[R+1]);const H=new Int16Array(B),n=new Int16Array(te);let $;return b.channels===2?$=k(b.channels,b.sampleRate,H,n):b.channels===1&&($=k(b.channels,b.sampleRate,p)),$;function _(R){s.setUint16(F,R,!0),F+=2}function C(R){s.setUint32(F,R,!0),F+=4}function k(R,o,y,O=null){const x=[],z=new ns.Mp3Encoder(R,o,96);let q=y.length;const ee=1152;for(let I=0;q>=ee;I+=ee){let m;if(O){const N=y.subarray(I,I+ee),K=O.subarray(I,I+ee);m=z.encodeBuffer(N,K)}else{const N=y.subarray(I,I+ee);m=z.encodeBuffer(N)}m.length>0&&x.push(new Int8Array(m)),q-=ee}const ae=z.flush();return ae.length>0&&x.push(new Int8Array(ae)),new Blob(x,{type:"audio/mpeg"})}},fermerModale(){this.modale="",this.gererFocus()},fermerMessage(){this.message="",this.gererFocus()},definirElementPrecedent(e){this.elementPrecedent=e},gererFocus(){this.elementPrecedent&&(this.elementPrecedent.focus(),this.elementPrecedent=null)},gererFocusCommentaires(e){e.target.closest("li")===null&&(this.focusId="")},gererClavier(e){if(this.modaleDiaporama&&this.modale!=="evaluations"&&this.blocs.length>1){let t=!1;(document.querySelector("#commentaire")&&document.querySelector("#commentaire").contains(e.target)||document.querySelector("#commentaire-modifie")&&document.querySelector("#commentaire-modifie").contains(e.target))&&(t=!0),t===!1&&e.key==="ArrowLeft"?(e.preventDefault(),this.afficherBlocPrecedent()):t===!1&&e.key==="ArrowRight"?(e.preventDefault(),this.afficherBlocSuivant()):e.key==="Escape"&&this.fermerModaleDiaporama()}else e.key==="Escape"&&this.message!==""?this.fermerMessage():e.key==="Escape"&&this.modaleConfirmer?this.fermerModaleConfirmer():e.key==="Escape"&&this.modale==="colonne"?this.fermerModaleColonne():e.key==="Escape"&&this.modale==="bloc"?this.fermerModaleBloc():e.key==="Escape"&&this.modale==="admins"?this.fermerModaleAdmins():e.key==="Escape"&&this.modale==="commentaires"?this.fermerModaleCommentaires():e.key==="Escape"&&this.modale==="evaluations"?this.fermerModaleEvaluations():e.key==="Escape"&&this.modale==="modifier-nom"?this.fermerModaleModifierNom():e.key==="Escape"&&this.modale==="mot-de-passe"?this.fermerModaleMotDePasse():e.key==="Escape"&&this.modale==="modifier-mot-de-passe"?this.fermerModaleModifierMotDePasse():e.key==="Escape"&&this.modale==="copier-bloc"?this.fermerModaleCopieBloc():e.key==="Escape"&&this.modale!==""&&!this.transcodage&&!this.progressionEnregistrement?this.fermerModale():e.key==="Escape"&&this.menu==="options"?this.fermerMenuOptions():e.key==="Escape"&&this.menu!==""&&this.fermerMenu()},ecouterSocket(){this.$socket.on("connexion",(function(e){this.definirUtilisateurs(e)}).bind(this)),this.$socket.on("deconnexion",(function(e){const t=this.utilisateurs;t.forEach(function(i,a){i.identifiant===e&&t.splice(a,1)}),this.utilisateurs=t}).bind(this)),this.$socket.on("erreur",(function(){this.chargement=!1,this.message=this.$t("erreurActionServeur")}).bind(this)),this.$socket.on("verifieracces",(function(e){e.acces===!0?(this.accesAutorise=!0,this.blocs=e.blocs,this.activite=e.activite,this.pad.colonnes=e.pad.colonnes,this.pad.affichageColonnes=e.pad.affichageColonnes,this.pad.affichage==="colonnes"&&(this.definirColonnes(this.blocs),this.$nextTick((function(){this.activerDefilementHorizontal()}).bind(this))),this.$socket.emit("connexion",{pad:this.pad.id,identifiant:this.identifiant,nom:this.nom})):(this.modale="code-acces",this.$nextTick(function(){document.querySelector("#champ-code").focus()}))}).bind(this)),this.$socket.on("ajouterbloc",(function(e){this.action="ajouter",this.utilisateur=e.identifiant,(e.visibilite==="visible"||this.admin||this.pad.contributions==="moderees"&&this.utilisateur===this.identifiant)&&(this.pad.affichage==="colonnes"&&(this.pad.ordre==="croissant"?this.colonnes[e.colonne].push(e):this.colonnes[e.colonne].unshift(e)),this.pad.ordre==="croissant"?this.blocs.push(e):this.blocs.unshift(e),(e.visibilite==="visible"||this.admin||this.pad.contributions==="moderees"&&this.utilisateur===this.identifiant)&&this.activite.unshift({id:e.activiteId,bloc:e.bloc,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"bloc-ajoute"}),(this.admin||this.pad.affichage!=="colonnes"||this.pad.affichage==="colonnes"&&this.affichageColonnes[e.colonne])&&this.$nextTick(function(){const t=document.querySelector("#"+e.bloc);t.classList.add("anime"),t.addEventListener("animationend",function(){t.classList.remove("anime")})}),this.utilisateur===this.identifiant&&this.$nextTick(function(){document.querySelector("#"+e.bloc).scrollIntoView()}),this.envoyerNotificationAdmins())}).bind(this)),this.$socket.on("copierbloc",(function(){this.chargement=!1,this.notification=this.$t("capsuleCopiee")}).bind(this)),this.$socket.on("modifierbloc",(function(e){this.action="modifier",this.pad.affichage==="colonnes"&&this.colonnes[e.colonne].forEach((function(t,i){t.bloc===e.bloc&&(e.visibilite==="privee"&&!this.admin?this.colonnes[e.colonne].splice(i,1):this.colonnes[e.colonne][i]={bloc:e.bloc,identifiant:t.identifiant,nom:t.nom,titre:e.titre,texte:e.texte,media:e.media,iframe:e.iframe,type:e.type,source:e.source,vignette:e.vignette,date:t.date,modifie:e.modifie,couleur:t.couleur,commentaires:t.commentaires,evaluations:t.evaluations,colonne:t.colonne,visibilite:e.visibilite})}).bind(this)),this.blocs.forEach((function(t,i){t.bloc===e.bloc&&(this.utilisateur=e.identifiant,e.visibilite==="privee"&&!this.admin?this.blocs.splice(i,1):this.blocs.splice(i,1,{bloc:e.bloc,identifiant:t.identifiant,nom:t.nom,titre:e.titre,texte:e.texte,media:e.media,iframe:e.iframe,type:e.type,source:e.source,vignette:e.vignette,date:t.date,modifie:e.modifie,couleur:t.couleur,commentaires:t.commentaires,evaluations:t.evaluations,colonne:t.colonne,visibilite:e.visibilite}))}).bind(this)),e.visibilite==="visible"&&this.activite.unshift({id:e.activiteId,bloc:e.bloc,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.modifie,couleur:e.couleur,type:"bloc-modifie"}),this.envoyerNotificationAdmins()}).bind(this)),this.$socket.on("autoriserbloc",(function(e){this.pad.contributions==="moderees"&&e.identifiant===this.identifiant||this.admin?(this.pad.affichage==="colonnes"&&this.colonnes.forEach((function(t,i){t.forEach((function(a,s){a.bloc===e.bloc&&(this.colonnes[i][s].visibilite="visible",this.colonnes[i][s].date=e.date,this.colonnes[i][s].hasOwnProperty("modifie")&&delete this.colonnes[i][s].modifie)}).bind(this))}).bind(this)),this.blocs.forEach((function(t,i){t.bloc===e.bloc&&(this.blocs[i].visibilite="visible",this.blocs[i].date=e.date,this.blocs[i].hasOwnProperty("modifie")&&delete this.blocs[i].modifie)}).bind(this)),this.chargement=!1):(this.blocs.splice(e.indexBloc,0,e),this.pad.affichage==="colonnes"&&this.colonnes[e.colonne].splice(e.indexBlocColonne,0,e)),this.activite.unshift({id:e.activiteId,bloc:e.bloc,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"bloc-ajoute"}),this.$nextTick(function(){const t=document.querySelector("#"+e.bloc);t!==null&&(t.classList.add("anime"),t.addEventListener("animationend",function(){t.classList.remove("anime")}))}),this.admin&&this.identifiant===e.admin&&e.moderation==="moderee"?this.notification=this.$t("capsuleValidee"):this.admin&&this.identifiant===e.admin&&e.moderation==="privee"?this.notification=this.$t("capsuleVisible"):!this.admin&&e.identifiant===this.identifiant&&(this.notification=this.$t("capsulePubliee",{titre:e.titre})),this.modaleDiaporama&&this.$nextTick((function(){this.chargerDiapositive()}).bind(this))}).bind(this)),this.$socket.on("deplacerbloc",(function(e){this.utilisateur=e.identifiant;const t=document.querySelector(".bloc.actif");let i="";if(t&&this.utilisateur!==this.identifiant&&(i=t.id),this.admin&&this.pad.affichage==="colonnes")this.definirColonnes(e.blocs);else if(this.admin&&this.pad.affichage!=="colonnes")this.blocs=e.blocs;else if(!this.admin){let a;this.pad.contributions==="moderees"?a=e.blocs.filter((function(s){return s.visibilite==="visible"||s.visibilite==="masquee"&&s.identifiant===this.identifiant}).bind(this)):a=e.blocs.filter(function(s){return s.visibilite!=="privee"}),this.pad.affichage==="colonnes"?this.definirColonnes(a):this.blocs=a}this.$nextTick((function(){t&&this.utilisateur!==this.identifiant&&document.querySelector("#"+i)&&(t.classList.remove("actif"),document.querySelector("#"+i).classList.add("actif"),document.querySelector("#"+i).focus())}).bind(this)),this.chargement=!1}).bind(this)),this.$socket.on("supprimerbloc",(function(e){this.action="supprimer",this.pad.affichage==="colonnes"&&this.colonnes[e.colonne].forEach((function(t,i){t.bloc===e.bloc&&this.colonnes[e.colonne].splice(i,1)}).bind(this)),this.blocs.forEach((function(t,i){t.bloc===e.bloc&&(this.utilisateur=e.identifiant,this.blocs.splice(i,1))}).bind(this)),this.activite.unshift({id:e.activiteId,bloc:e.bloc,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"bloc-supprime"}),this.envoyerNotificationAdmins()}).bind(this)),this.$socket.on("commenterbloc",(function(e){const t=this.blocs;t.forEach(function(i){i.bloc===e.bloc&&(i.commentaires=e.commentaires)}),this.blocs=t,(this.modale==="commentaires"&&this.bloc===e.bloc||this.modaleDiaporama&&this.donneesBloc.bloc===e.bloc)&&this.commentaires.push({id:e.id,identifiant:e.identifiant,nom:e.nom,texte:e.texte,date:e.date}),this.activite.unshift({id:e.activiteId,bloc:e.bloc,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"bloc-commente"}),this.envoyerNotificationAdmins()}).bind(this)),this.$socket.on("modifiercommentaire",(function(e){const t=this.commentaires;t.forEach(function(i){i.id===e.id&&(i.texte=e.texte)}),this.commentaires=t}).bind(this)),this.$socket.on("supprimercommentaire",(function(e){const t=this.blocs;t.forEach(function(a){a.bloc===e.bloc&&(a.commentaires=e.commentaires)}),this.blocs=t;const i=this.commentaires;i.forEach(function(a,s){a.id===e.id&&i.splice(s,1)}),this.commentaires=i}).bind(this)),this.$socket.on("commentaires",(function(e){this.commentaires=e.commentaires,e.type==="discussion"?(this.chargement=!1,this.elementPrecedent=document.activeElement||document.body,this.modale="commentaires",this.$nextTick((function(){this.genererEditeur(),setTimeout((function(){document.querySelector("#discussion .contenu-editeur-commentaire").focus(),document.querySelector("#discussion").addEventListener("click",this.gererFocusCommentaires)}).bind(this),0)}).bind(this))):this.chargerDiapositive()}).bind(this)),this.$socket.on("evaluerbloc",(function(e){this.chargement=!1;const t=this.blocs;t.forEach(function(i){i.bloc===e.bloc&&i.evaluations.push(e.evaluation)}),this.blocs=t,this.activite.unshift({id:e.activiteId,bloc:e.bloc,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"bloc-evalue"}),this.envoyerNotificationAdmins()}).bind(this)),this.$socket.on("modifierevaluation",(function(e){this.chargement=!1;const t=this.blocs;t.forEach(function(i,a){i.bloc===e.bloc&&i.evaluations.forEach(function(d){d.id===e.id&&(d.date=e.date,d.etoiles=e.etoiles)})}),this.blocs=t}).bind(this)),this.$socket.on("supprimerevaluation",(function(e){this.chargement=!1;const t=this.blocs;t.forEach(function(i){if(i.bloc===e.bloc){const a=i.evaluations;a.forEach(function(s,d){s.id===e.id&&a.splice(d,1)})}}),this.blocs=t}).bind(this)),this.$socket.on("modifiernom",(function(e){this.modifierCaracteristique(e.identifiant,"nom",e.nom),this.chargement=!1,e.identifiant===this.identifiant&&(this.nom=e.nom,this.notification=this.$t("nomModifie"))}).bind(this)),this.$socket.on("modifiercouleur",(function(e){this.modifierCaracteristique(e.identifiant,"couleur",e.couleur),e.identifiant===this.identifiant&&(this.notification=this.$t("couleurModifiee"),document.querySelector("#utilisateurs .moi .couleur").focus())}).bind(this)),this.$socket.on("modifiertitre",(function(e){this.pad.titre=e,document.title=e+" - Digipad by La Digitale",this.chargement=!1,this.admin&&(this.notification=this.$t("titrePadModifie"))}).bind(this)),this.$socket.on("modifiercodeacces",(function(e){this.pad.code=e,this.chargement=!1,this.modificationCode=!1,this.admin&&(this.notification=this.$t("codeAccesModifie"))}).bind(this)),this.$socket.on("modifieradmins",(function(e){this.pad.admins=e,this.chargement=!1,this.admin&&(this.notification=this.$t("listeAdminsModifiee"))}).bind(this)),this.$socket.on("modifieracces",(function(e){this.pad.acces=e.acces,this.chargement=!1,this.admin?(e.acces==="code"&&(this.pad.code=e.code,this.codeVisible=!0),this.notification=this.$t("accesPadModifie")):e.acces==="prive"&&(this.$socket.emit("sortie",this.pad.id,this.identifiant),window.location.replace("/"))}).bind(this)),this.$socket.on("modifiercontributions",(function(e){this.pad.contributions=e.contributions,this.chargement=!1,this.admin&&(this.notification=this.$t("statutPadModifie")),!this.admin&&e.contributionsPrecedentes==="moderees"&&(this.notification=this.$t("rechargerPage"))}).bind(this)),this.$socket.on("modifieraffichage",(function(e){this.pad.affichage=e,this.affichage=e,this.chargement=!1,this.admin&&(this.action="",this.notification=this.$t("affichagePadModifie"))}).bind(this)),this.$socket.on("modifierordre",(function(e){const t=document.querySelector(".bloc.actif");let i="";t&&(i=t.id),this.pad.ordre=e,this.blocs.reverse(),this.pad.affichage==="colonnes"&&this.definirColonnes(this.blocs),this.$nextTick(function(){t&&(t.classList.remove("actif"),document.querySelector("#"+i).classList.add("actif"),document.querySelector("#"+i).focus())}),this.chargement=!1,this.admin&&(this.notification=this.$t("parametreOrdreModifie"))}).bind(this)),this.$socket.on("modifierlargeur",(function(e){this.pad.largeur=e,this.pad.affichage==="mur"&&(this.pad.affichage="",setTimeout((function(){this.pad.affichage="mur"}).bind(this),10)),this.chargement=!1,this.admin&&(this.notification=this.$t("parametreLargeurModifie"))}).bind(this)),this.$socket.on("modifierfond",(function(e){this.pad.fond=e,Ci("#pad",{background:!0},(function(){this.chargement=!1,this.admin&&(this.notification=this.$t("arrierePlanModifie"))}).bind(this))}).bind(this)),this.$socket.on("modifiercouleurfond",(function(e){this.pad.fond=e,this.chargement=!1,this.admin&&(this.notification=this.$t("arrierePlanModifie"))}).bind(this)),this.$socket.on("modifieractivite",(function(e){this.pad.registreActivite=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreActiviteModifie"))}).bind(this)),this.$socket.on("modifierconversation",(function(e){this.pad.conversation=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreConversationModifie"))}).bind(this)),this.$socket.on("modifierlisteutilisateurs",(function(e){e==="desactivee"&&this.menu==="utilisateurs"&&(this.menu=""),this.pad.listeUtilisateurs=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreListeUtilisateursModifie"))}).bind(this)),this.$socket.on("modifiereditionnom",(function(e){this.pad.editionNom=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreEditionNomModifie"))}).bind(this)),this.$socket.on("modifierfichiers",(function(e){this.pad.fichiers=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreFichiersModifie"))}).bind(this)),this.$socket.on("modifierenregistrements",(function(e){this.pad.enregistrements=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreEnregistrementsModifie"))}).bind(this)),this.$socket.on("modifierliens",(function(e){this.pad.liens=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreLiensModifie"))}).bind(this)),this.$socket.on("modifierdocuments",(function(e){this.pad.documents=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreDocumentsModifie"))}).bind(this)),this.$socket.on("modifiercommentaires",(function(e){this.pad.commentaires=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreCommentairesModifie"))}).bind(this)),this.$socket.on("modifierevaluations",(function(e){this.pad.evaluations=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreEvaluationModifie"))}).bind(this)),this.$socket.on("modifiercopiebloc",(function(e){this.pad.copieBloc=e,this.chargement=!1,this.admin&&(this.notification=this.$t("parametreCopieBlocModifie"))}).bind(this)),this.$socket.on("message",(function(e){this.messagesChat.push(e),e.identifiant!==this.identifiant&&this.menu!=="chat"&&this.nouveauxMessagesChat++}).bind(this)),this.$socket.on("reinitialisermessages",(function(){this.messagesChat=[],this.nouveauxMessagesChat=0,this.chargement=!1,this.admin&&(this.notification=this.$t("historiqueConversationSupprime"))}).bind(this)),this.$socket.on("reinitialiseractivite",(function(){this.activite=[],this.chargement=!1,this.admin&&(this.notification=this.$t("activiteSupprimee"))}).bind(this)),this.$socket.on("supprimeractivite",(function(e){this.activite.forEach((function(t,i){t.id===e&&this.activite.splice(i,1)}).bind(this)),this.chargement=!1,this.admin&&(this.notification=this.$t("entreeActiviteSupprimee"))}).bind(this)),this.$socket.on("ajoutercolonne",(function(e){this.colonnes.push([]),this.affichageColonnes.push(!0),this.pad.colonnes=e.colonnes,this.pad.affichageColonnes=e.affichageColonnes,this.activite.unshift({id:e.activiteId,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"colonne-ajoutee"}),this.admin&&(this.notification=this.$t("colonneAjoutee")),this.chargement=!1}).bind(this)),this.$socket.on("modifiertitrecolonne",(function(e){this.pad.colonnes=e,this.admin&&(this.notification=this.$t("nomColonneModifie")),this.chargement=!1}).bind(this)),this.$socket.on("modifieraffichagecolonne",(function(e,t,i){if(this.pad.affichageColonnes=e,this.admin)this.notification=this.$t("affichageColonneModifie"),this.chargement=!1;else if(t===!0)this.$socket.emit("verifierblocscolonnes",{pad:this.pad.id,identifiant:this.identifiant});else if(t===!1){const a=JSON.parse(JSON.stringify(this.blocs));a.forEach(function(s,d){parseInt(s.colonne)===parseInt(i)&&a.splice(d,1)}),this.blocs=a,this.chargement=!1}}).bind(this)),this.$socket.on("verifierblocscolonnes",(function(e){this.blocs=e,this.definirColonnes(this.blocs),this.chargement=!1}).bind(this)),this.$socket.on("supprimercolonne",(function(e){this.colonnes.splice(parseInt(e.colonne),1);const t=[];this.colonnes.forEach(function(i,a){i.forEach(function(s){s.colonne=a}),t.push(...i)}),this.pad.colonnes=e.colonnes,this.pad.affichageColonnes=e.affichageColonnes,this.blocs=t,this.activite.unshift({id:e.activiteId,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"colonne-supprimee"}),this.admin?this.notification=this.$t("colonneSupprimee"):!this.admin&&this.modale==="bloc"&&parseInt(this.colonne)===parseInt(e.colonne)&&(this.fermerModaleBloc(),this.notification=this.$t("colonneActuelleSupprimee")),this.chargement=!1}).bind(this)),this.$socket.on("deplacercolonne",(function(e){const t=[],i=this.colonnes[parseInt(e.colonne)],a=this.affichageColonnes[parseInt(e.colonne)];if(e.direction==="gauche")this.colonnes.splice(parseInt(e.colonne)-1,0,i),this.colonnes.splice(parseInt(e.colonne)+1,1),this.affichageColonnes.splice(parseInt(e.colonne)-1,0,a),this.affichageColonnes.splice(parseInt(e.colonne)+1,1);else if(e.direction==="droite"){const s=this.colonnes[parseInt(e.colonne)+1];this.colonnes.splice(parseInt(e.colonne)+1,0,i),this.colonnes.splice(parseInt(e.colonne),1,s),this.colonnes.splice(parseInt(e.colonne)+2,1);const d=this.affichageColonnes[parseInt(e.colonne)+1];this.affichageColonnes.splice(parseInt(e.colonne)+1,0,a),this.affichageColonnes.splice(parseInt(e.colonne),1,d),this.affichageColonnes.splice(parseInt(e.colonne)+2,1)}this.colonnes.forEach(function(s,d){s.forEach(function(r){r.colonne=d}),t.push(...s)}),this.pad.colonnes=e.colonnes,this.pad.affichageColonnes=e.affichageColonnes,this.blocs=t,this.activite.unshift({id:e.activiteId,identifiant:e.identifiant,nom:e.nom,titre:e.titre,date:e.date,couleur:e.couleur,type:"colonne-deplacee"}),this.admin?this.notification=this.$t("colonneDeplacee"):this.modale==="bloc"&&parseInt(this.colonne)===parseInt(e.colonne)&&e.direction==="gauche"?this.colonne=parseInt(e.colonne)-1:this.modale==="bloc"&&parseInt(this.colonne)===parseInt(e.colonne)&&e.direction==="droite"?this.colonne=parseInt(e.colonne)+1:this.modale==="bloc"&&parseInt(this.colonne)===parseInt(e.colonne)-1&&e.direction==="gauche"?this.colonne=parseInt(e.colonne):this.modale==="bloc"&&parseInt(this.colonne)===parseInt(e.colonne)+1&&e.direction==="droite"&&(this.colonne=parseInt(e.colonne)),this.chargement=!1}).bind(this)),this.$socket.on("debloquerpad",(function(e){this.chargement=!1,this.accesAutorise=!0,this.modifierCaracteristique(this.identifiant,"identifiant",e.identifiant),this.modifierCaracteristique(e.identifiant,"nom",e.nom),this.modifierCaracteristique(e.identifiant,"couleur",e.couleur);const t=JSON.parse(JSON.stringify(this.pads));t.includes(this.pad.id)||t.push(this.pad.id),this.identifiant=e.identifiant,this.nom=e.nom,this.langue=e.langue,this.statut="auteur",this.pads=t,e.hasOwnProperty("blocs")&&e.hasOwnProperty("activite")&&e.hasOwnProperty("pad")&&(this.blocs=e.blocs,this.activite=e.activite,this.pad.code=e.pad.code,this.pad.colonnes=e.pad.colonnes,this.pad.affichageColonnes=e.pad.affichageColonnes,this.pad.affichage==="colonnes"&&(this.definirColonnes(this.blocs),this.$nextTick((function(){this.activerDefilementHorizontal()}).bind(this)))),this.notification=this.$t("padDebloque")}).bind(this)),this.$socket.on("modifiernotification",(function(e){this.pad.notification=e}).bind(this)),this.$socket.on("verifiermodifierbloc",(function(e){this.modale==="bloc"&&this.bloc===e.bloc?this.$socket.emit("reponsemodifierbloc",this.pad.id,e.identifiant,!0):this.$socket.emit("reponsemodifierbloc",this.pad.id,e.identifiant,!1)}).bind(this)),this.$socket.on("reponsemodifierbloc",(function(e){this.identifiant===e.identifiant&&e.reponse===!0&&(this.notification=this.$t("capsuleEnCoursModification"))}).bind(this)),this.$socket.on("deconnecte",(function(){this.chargement=!1,this.notification=this.$t("problemeConnexion")}).bind(this)),this.$socket.on("nonautorise",(function(){this.chargement=!1,this.message=this.$t("actionNonAutorisee")}).bind(this)),this.$socket.on("maintenance",function(){window.location.href="/maintenance"})}}},Ac="/img/lien.png",Mc="/img/telechargement.png",Ic={key:0,id:"titre"},Rc=["tabindex","title"],Bc={class:"badge"},$c={key:0,id:"champ-recherche"},Dc=["placeholder"],Lc=["tabindex"],Oc={id:"nav"},Nc=["tabindex","title"],Pc=["tabindex","title"],Fc=["tabindex","title"],Vc=["tabindex","title"],Hc=["tabindex","title"],qc={key:0,class:"badge"},Kc=["tabindex","title"],jc=["tabindex","title"],Xc=["tabindex","title"],Uc=["tabindex","title"],zc=["tabindex","title"],Yc=["tabindex","title"],Gc=["tabindex","title"],xc=["tabindex","title"],Wc={key:1,id:"menu-activite",class:"menu gauche",role:"menu"},Qc={class:"en-tete"},Zc={class:"titre"},Jc={class:"action"},eh=["tabindex","title"],th=["tabindex"],ih={class:"contenu ascenseur",tabindex:"-1"},nh={id:"entrees"},ah=["data-bloc"],sh={class:"conteneur-entree"},oh=["innerHTML"],rh=["innerHTML"],lh={key:0,class:"menu-entree"},dh=["tabindex","title","onClick","onKeydown"],uh=["data-bloc"],fh={class:"conteneur-entree"},ch=["innerHTML"],hh=["innerHTML"],mh={key:0,class:"menu-entree"},vh=["tabindex","title","onClick","onKeydown"],ph=["data-bloc"],bh={class:"conteneur-entree"},gh=["innerHTML"],yh=["innerHTML"],_h={key:0,class:"menu-entree"},Eh=["tabindex","title","onClick","onKeydown"],Ch=["data-bloc"],Th={class:"conteneur-entree"},wh=["innerHTML"],Sh=["innerHTML"],kh={key:0,class:"menu-entree"},Ah=["tabindex","title","onClick","onKeydown"],Mh=["data-bloc"],Ih={class:"conteneur-entree"},Rh=["innerHTML"],Bh=["innerHTML"],$h={key:0,class:"menu-entree"},Dh=["tabindex","title","onClick","onKeydown"],Lh={class:"conteneur-entree"},Oh=["innerHTML"],Nh={key:0,class:"menu-entree"},Ph=["tabindex","title","onClick","onKeydown"],Fh={class:"conteneur-entree"},Vh=["innerHTML"],Hh={key:0,class:"menu-entree"},qh=["tabindex","title","onClick","onKeydown"],Kh={class:"conteneur-entree"},jh=["innerHTML"],Xh={key:0,class:"menu-entree"},Uh=["tabindex","title","onClick","onKeydown"],zh={key:2,id:"menu-conversation",class:"menu gauche",role:"menu"},Yh={class:"en-tete"},Gh={class:"titre"},xh={class:"action"},Wh=["tabindex"],Qh=["tabindex"],Zh={class:"contenu ascenseur",tabindex:"-1"},Jh={id:"messages"},em={id:"ecrire-message"},tm=["value"],im=["tabindex"],nm={key:3,id:"menu-options",class:"menu gauche",role:"menu"},am={class:"en-tete"},sm={class:"titre"},om=["tabindex"],rm={class:"contenu ascenseur",tabindex:"-1"},lm={class:"conteneur"},dm={for:"titre-pad"},um=["disabled","value"],fm={key:0,class:"conteneur conteneur-bouton"},cm=["tabindex"],hm={key:1,class:"conteneur conteneur-bouton"},mm=["tabindex"],vm={class:"conteneur"},pm={id:"copier-lien"},bm=["value"],gm=["tabindex","title"],ym=["tabindex","title"],_m={class:"conteneur"},Em={id:"copier-code"},Cm=["value"],Tm=["tabindex","title"],wm={class:"conteneur"},Sm={id:"langues"},km=["tabindex"],Am=["tabindex"],Mm=["tabindex"],Im=["tabindex"],Rm=["tabindex"],Bm=["tabindex"],$m={key:2,class:"conteneur conteneur-bouton"},Dm=["tabindex"],Lm={class:"conteneur"},Om=["tabindex"],Nm=["checked"],Pm=["tabindex"],Fm=["checked"],Vm=["tabindex"],Hm=["checked"],qm={key:3,class:"conteneur"},Km={for:"champ-code-acces"},jm={id:"code-acces"},Xm=["disabled","value"],Um=["disabled","value"],zm=["tabindex","title"],Ym=["tabindex","title"],Gm=["tabindex","title"],xm=["tabindex","title"],Wm={key:4,class:"conteneur conteneur-bouton"},Qm=["tabindex"],Zm={key:5,class:"conteneur"},Jm=["tabindex"],e2=["checked"],t2=["tabindex"],i2=["checked"],n2=["tabindex"],a2=["checked"],s2=["tabindex"],o2=["checked"],r2={class:"conteneur"},l2=["tabindex"],d2=["checked"],u2=["tabindex"],f2=["checked"],c2=["tabindex"],h2=["checked"],m2={class:"conteneur"},v2=["tabindex"],p2=["checked"],b2=["tabindex"],g2=["checked"],y2={class:"conteneur"},_2=["tabindex"],E2=["checked"],C2=["tabindex"],T2=["checked"],w2={class:"conteneur fond"},S2={class:"fonds"},k2=["tabindex","onClick","onKeydown"],A2=["src","alt"],M2={class:"couleur-personnalisee"},I2=["value","title"],R2=["title"],B2={class:"conteneur"},$2=["tabindex"],D2={key:1,class:"conteneur-chargement progression"},L2=["value"],O2={class:"conteneur"},N2={class:"conteneur-interrupteur"},P2=["tabindex"],F2=["checked"],V2={class:"conteneur-interrupteur"},H2=["tabindex"],q2=["checked"],K2={class:"conteneur"},j2={class:"conteneur-interrupteur"},X2=["tabindex"],U2=["checked"],z2={key:0,class:"conteneur-interrupteur"},Y2=["tabindex"],G2=["checked"],x2={class:"conteneur"},W2={class:"conteneur-interrupteur"},Q2=["tabindex"],Z2=["checked"],J2={class:"conteneur-interrupteur"},ev=["tabindex"],tv=["checked"],iv={class:"conteneur-interrupteur"},nv=["tabindex"],av=["checked"],sv={key:0,class:"conteneur-interrupteur"},ov=["tabindex"],rv=["checked"],lv={class:"conteneur-interrupteur"},dv=["tabindex"],uv=["checked"],fv={class:"conteneur-interrupteur"},cv=["tabindex"],hv=["checked"],mv={key:1,class:"conteneur-interrupteur"},vv=["tabindex"],pv=["checked"],bv={key:6,class:"conteneur conteneur-bouton"},gv=["tabindex"],yv={key:7,class:"conteneur conteneur-bouton"},_v=["tabindex"],Ev={key:4,id:"menu-options",class:"menu gauche",role:"menu"},Cv={class:"en-tete"},Tv={class:"titre"},wv=["tabindex"],Sv={class:"contenu ascenseur",tabindex:"-1"},kv={class:"conteneur"},Av={id:"langues"},Mv=["tabindex"],Iv=["tabindex"],Rv=["tabindex"],Bv=["tabindex"],$v=["tabindex"],Dv=["tabindex"],Lv={key:5,id:"menu-utilisateurs",class:"menu droite",role:"menu"},Ov={class:"en-tete"},Nv={class:"titre"},Pv=["tabindex"],Fv={class:"contenu ascenseur",tabindex:"-1"},Vv={id:"utilisateurs"},Hv={key:0,class:"utilisateur"},qv=["tabindex"],Kv={key:2,class:"utilisateur invite"},jv=["tabindex"],Xv={key:3,class:"couleurs"},Uv=["tabindex","onClick","onKeydown"],zv=["title"],Yv=["value"],Gv=["title"],xv={class:"utilisateur"},Wv=["id","tabindex","data-bloc","onFocus"],Qv=["id","tabindex","data-bloc","onFocus"],Zv=["id","tabindex","data-bloc","onFocus"],Jv=["id","tabindex","data-bloc","onFocus"],ep={key:4,id:"blocs",class:"colonnes"},tp=["id"],ip={class:"bloc haut"},np={class:"titre-colonne"},ap={key:0,class:"menu-colonne"},sp=["tabindex","title","onClick","onKeydown"],op=["tabindex","title","onClick","onKeydown"],rp=["tabindex","title","onClick","onKeydown"],lp=["tabindex","title","onClick","onKeydown"],dp={key:0,class:"conteneur-colonne ascenseur"},up=["id","tabindex","data-bloc","onFocus"],fp={key:1,class:"ajouter"},cp=["tabindex","title","onClick","onKeydown"],hp={key:0,class:"colonne"},mp=["tabindex"],vp={class:"titre-colonne"},pp={key:5,id:"blocs",class:"colonnes"},bp=["id"],gp={class:"bloc haut"},yp={class:"titre-colonne"},_p={class:"conteneur-colonne ascenseur"},Ep=["id","tabindex","data-bloc","onFocus"],Cp=["id","tabindex","data-bloc","onFocus"],Tp={key:7,id:"blocs",class:"colonnes"},wp=["id"],Sp={class:"bloc haut"},kp={class:"titre-colonne"},Ap={key:0,class:"menu-colonne"},Mp=["tabindex","title","onClick","onKeydown"],Ip=["tabindex","title","onClick","onKeydown"],Rp=["id","tabindex","data-bloc","onFocus"],Bp={key:7,id:"pad",style:{background:"#00ced1"}},$p=["tabindex","title"],Dp={key:8,class:"conteneur-modale"},Lp={class:"modale",role:"dialog"},Op={class:"en-tete"},Np={class:"titre"},Pp=["tabindex"],Fp={class:"conteneur"},Vp={class:"contenu"},Hp={for:"champ-nom-colonne"},qp=["value"],Kp=["value"],jp={class:"actions"},Xp=["tabindex"],Up=["tabindex"],zp={key:9,class:"conteneur-modale"},Yp={id:"bloc",class:"modale",role:"dialog"},Gp={class:"en-tete"},xp={class:"titre"},Wp=["tabindex"],Qp={class:"conteneur ascenseur",tabindex:"-1"},Zp={class:"contenu"},Jp={key:0,class:"conteneur-interrupteur"},e3=["tabindex"],t3=["checked"],i3=["tabindex"],n3=["checked"],a3={for:"champ-titre"},s3=["placeholder","value"],o3={key:1,class:"televerser fichier"},r3=["tabindex"],l3=["accept"],d3={key:1,class:"conteneur-chargement progression"},u3=["value"],f3={key:2,class:"separateur"},c3={key:3,class:"enregistrer audio"},h3=["tabindex"],m3={key:1,id:"enregistrement"},v3={class:"enregistrement"},p3=["tabindex"],b3={class:"duree"},g3={key:4,class:"separateur"},y3={key:5,id:"ajouter-lien"},_3=["value","placeholder"],E3=["tabindex","title"],C3={key:2,class:"conteneur-chargement"},T3={key:6,class:"separateur"},w3={key:7,id:"ajouter-document"},S3=["tabindex"],k3={key:8},A3={key:9},M3={key:10,id:"media"},I3=["src"],R3=["innerHTML"],B3={class:"action"},$3=["tabindex"],D3=["tabindex"],L3={key:1,class:"information"},O3=["innerHTML"],N3={key:11,id:"media"},P3={key:0,class:"conteneur-chargement"},F3=["src","alt"],V3=["src","alt"],H3=["src"],q3=["src"],K3=["src"],j3=["src"],X3=["src"],U3=["href"],z3={class:"type"},Y3={class:"nom"},G3=["href"],x3={class:"type"},W3={class:"nom"},Q3={class:"action"},Z3=["tabindex"],J3={key:12,id:"recherche"},eb={id:"resultats"},tb=["tabindex","data-w","data-h","onClick","onKeydown"],ib=["src","alt"],nb={key:0,id:"navigation"},ab=["tabindex"],sb=["tabindex"],ob={key:13},rb={key:14,id:"vignette"},lb=["src","alt"],db={key:1,class:"conteneur-chargement"},ub={key:15,class:"televerser vignette"},fb=["tabindex"],cb=["tabindex"],hb={key:2,class:"conteneur-chargement progression"},mb=["value"],vb=["tabindex"],pb=["tabindex"],bb={key:10,class:"conteneur-modale"},gb={id:"admins",class:"modale",role:"dialog"},yb={class:"en-tete"},_b={class:"titre"},Eb=["tabindex"],Cb={class:"conteneur"},Tb={class:"contenu"},wb={key:0,id:"liste-admins"},Sb={class:"admin"},kb={class:"identifiant"},Ab=["tabindex","title"],Mb={key:1,class:"vide"},Ib={id:"ajouter-admin"},Rb=["placeholder"],Bb=["tabindex","title"],$b={class:"actions"},Db=["tabindex"],Lb={key:11,class:"conteneur-modale"},Ob={id:"discussion",class:"modale",role:"dialog"},Nb={class:"en-tete"},Pb={class:"titre"},Fb=["tabindex"],Vb={class:"commentaires ascenseur",tabindex:"-1"},Hb=["id","tabindex","onFocus"],qb={key:0,class:"action"},Kb=["tabindex","title","onClick","onKeydown"],jb=["tabindex","title"],Xb=["tabindex","title","onClick","onKeydown"],Ub=["innerHTML"],zb={key:2,class:"texte"},Yb=["tabindex","title"],Gb={key:0,class:"vide"},xb={class:"ecrire-commentaire"},Wb=["tabindex","title"],Qb={key:12,class:"conteneur-modale"},Zb={class:"modale",role:"dialog"},Jb={class:"en-tete"},e4={class:"titre"},t4=["tabindex"],i4={class:"conteneur"},n4={class:"contenu"},a4={class:"section-etoiles"},s4={key:0,class:"etoiles"},o4=["tabindex"],r4=["tabindex"],l4=["tabindex"],d4=["tabindex"],u4=["tabindex"],f4={key:1,class:"etoiles"},c4=["tabindex","onClick","onKeydown"],h4=["tabindex","onClick","onKeydown"],m4=["tabindex"],v4={class:"actions"},p4=["tabindex"],b4=["tabindex"],g4={key:13,class:"conteneur-modale"},y4={class:"modale",role:"dialog"},_4={class:"en-tete"},E4={class:"titre"},C4=["tabindex"],T4={class:"conteneur"},w4={class:"contenu"},S4={for:"champ-nom"},k4=["value"],A4={class:"actions"},M4=["tabindex"],I4={key:14,class:"conteneur-modale"},R4={key:0,class:"modale",role:"dialog"},B4={class:"en-tete"},$4={class:"titre"},D4=["tabindex"],L4={class:"conteneur"},O4={class:"contenu"},N4={for:"champ-motdepasse"},P4={class:"conteneur-motdepasse"},F4=["value"],V4=["value"],H4=["tabindex","title"],q4=["tabindex","title"],K4={class:"actions"},j4=["tabindex"],X4={key:1,class:"modale",role:"dialog"},U4={class:"en-tete"},z4={class:"titre"},Y4={class:"conteneur"},G4={class:"contenu"},x4={for:"champ-code"},W4={class:"conteneur-code-acces"},Q4=["value"],Z4=["value"],J4=["tabindex","title"],e5=["tabindex","title"],t5={class:"actions"},i5=["tabindex"],n5=["tabindex","innerHTML"],a5={key:15,class:"conteneur-modale"},s5={id:"motdepasse",class:"modale",role:"dialog"},o5={class:"en-tete"},r5={class:"titre"},l5=["tabindex"],d5={class:"conteneur"},u5={class:"contenu"},f5={for:"champ-motdepasse-actuel"},c5=["value"],h5={for:"champ-nouveau-motdepasse"},m5=["value"],v5={class:"actions"},p5=["tabindex"],b5={key:16,class:"conteneur-modale"},g5={class:"modale",role:"dialog"},y5={class:"en-tete"},_5={class:"titre"},E5=["tabindex"],C5={class:"conteneur"},T5={class:"contenu"},w5={for:"pad-destination"},S5=["value"],k5=["value"],A5={key:1,class:"vide"},M5={key:2,for:"colonne-destination"},I5=["value"],R5={class:"actions"},B5=["tabindex"],$5={key:17,class:"conteneur-modale"},D5={id:"codeqr",class:"modale",role:"dialog"},L5={class:"en-tete"},O5={class:"titre"},N5=["tabindex"],P5={key:18,class:"conteneur-modale"},F5={class:"en-tete"},V5={class:"titre"},H5=["tabindex"],q5={key:0,class:"conteneur conteneur-texte"},K5=["innerHTML"],j5={key:1,class:"conteneur conteneur-media"},X5={key:0,class:"media"},U5=["src","alt"],z5=["src","alt"],Y5=["src"],G5=["src"],x5=["src"],W5=["src"],Q5={key:6},Z5=["href"],J5=["src","alt"],e8={key:1,src:Ac,alt:"lien.png"},t8={key:7},i8=["href"],n8=["src","alt"],a8={key:1,src:Mc,alt:"telechargement.png"},s8={class:"conteneur-iframe"},o8=["src"],r8=["innerHTML"],l8={key:2,class:"conteneur conteneur-moderation"},d8=["tabindex"],u8={key:3,class:"conteneur conteneur-moderation"},f8=["tabindex"],c8={key:1,class:"bouton"},h8={key:4,class:"conteneur conteneur-evaluations"},m8={class:"evaluation"},v8={class:"etoiles"},p8=["tabindex","title"],b8=["tabindex","title"],g8={key:5,class:"conteneur conteneur-commentaires"},y8={key:0,class:"commentaires"},_8=["id","tabindex","onFocus"],E8={key:0,class:"action"},C8=["tabindex","title","onClick","onKeydown"],T8=["tabindex","title"],w8=["tabindex","title","onClick","onKeydown"],S8=["innerHTML"],k8={key:2,class:"texte"},A8=["tabindex","title"],M8={key:1,class:"vide"},I8={class:"ecrire-commentaire"},R8=["tabindex","title"],B8=["tabindex"],$8=["tabindex"],D8={key:19,class:"conteneur-modale"},L8={id:"transcodage",class:"modale",role:"dialog"},O8={class:"conteneur"},N8={class:"contenu"},P8={class:"patienter"},F8={key:20,id:"conteneur-message",class:"conteneur-modale"},V8={class:"modale",role:"dialog"},H8={class:"conteneur"},q8={class:"contenu"},K8=["innerHTML"],j8={class:"actions"},X8=["tabindex"],U8=["tabindex"],z8=["tabindex"],Y8=["tabindex"],G8=["tabindex"],x8=["tabindex"],W8=["tabindex"],Q8=["tabindex"],Z8=["tabindex"];function J8(e,t,i,a,s,d){const r=$i("Capsule"),f=$i("masonry"),E=$i("CapsuleAlt"),F=$i("draggable"),b=$i("Emojis"),p=$i("Notification"),B=$i("Message"),te=$i("Chargement"),H=$i("ChargementPage");return T(),w("div",{id:"page",class:Ne(e.pad.affichage)},[l("header",{class:Ne({"pleine-largeur":e.pad.listeUtilisateurs&&e.pad.listeUtilisateurs==="desactivee"})},[t[322]||(t[322]=l("span",{id:"conteneur-logo"},[l("span",{id:"logo"})],-1)),e.recherche?fe("",!0):(T(),w("span",Ic,Z(e.pad.titre),1)),!e.pad.listeUtilisateurs||e.pad.listeUtilisateurs&&e.pad.listeUtilisateurs==="activee"?(T(),w("div",{key:1,id:"conteneur-header-droit",role:"button",tabindex:e.definirTabIndex(),title:e.$t("utilisateursConnectes"),onClick:t[0]||(t[0]=(...n)=>e.afficherUtilisateurs&&e.afficherUtilisateurs(...n)),onKeydown:t[1]||(t[1]=Q((...n)=>e.afficherUtilisateurs&&e.afficherUtilisateurs(...n),["enter"]))},[t[321]||(t[321]=l("i",{class:"material-icons"},"people_alt",-1)),l("span",Bc,Z(e.utilisateurs.length),1)],40,Rc)):fe("",!0)],2),e.recherche?(T(),w("div",$c,[l("input",{type:"text",maxlength:"48",placeholder:e.$t("rechercherCapsules"),onInput:t[2]||(t[2]=n=>e.requete=n.target.value)},null,40,Dc),l("span",{role:"button",tabindex:e.definirTabIndex(),onClick:t[3]||(t[3]=n=>e.recherche=!1),onKeydown:t[4]||(t[4]=Q(n=>e.recherche=!1,["enter"]))},t[323]||(t[323]=[l("i",{class:"material-icons"},"close",-1)]),40,Lc)])):fe("",!0),l("nav",Oc,[e.statut==="utilisateur"?(T(),w("span",{key:0,id:"compte",role:"button",tabindex:e.definirTabIndex(),title:e.$t("compteUtilisateur"),onClick:t[5]||(t[5]=(...n)=>e.allerCompte&&e.allerCompte(...n)),onKeydown:t[6]||(t[6]=Q((...n)=>e.allerCompte&&e.allerCompte(...n),["enter"]))},t[324]||(t[324]=[l("i",{class:"material-icons"},"arrow_back",-1)]),40,Nc)):(T(),w("span",{key:1,id:"accueil",role:"button",tabindex:e.definirTabIndex(),title:e.$t("accueil"),onClick:t[7]||(t[7]=(...n)=>e.allerAccueil&&e.allerAccueil(...n)),onKeydown:t[8]||(t[8]=Q((...n)=>e.allerAccueil&&e.allerAccueil(...n),["enter"]))},t[325]||(t[325]=[l("i",{class:"material-icons"},"home",-1)]),40,Pc)),l("span",{id:"recherche",role:"button",tabindex:e.definirTabIndex(),class:Ne({active:e.recherche,desactive:e.action==="organiser"}),title:e.$t("recherche"),onClick:t[9]||(t[9]=(...n)=>e.gererRecherche&&e.gererRecherche(...n)),onKeydown:t[10]||(t[10]=Q((...n)=>e.gererRecherche&&e.gererRecherche(...n),["enter"]))},t[326]||(t[326]=[l("i",{class:"material-icons"},"search",-1)]),42,Fc),e.accesAutorise&&(!e.pad.registreActivite||e.pad.registreActivite&&e.pad.registreActivite==="active")?(T(),w("span",{key:2,id:"activite",role:"button",tabindex:e.definirTabIndex(),title:e.$t("activitePad"),onClick:t[11]||(t[11]=(...n)=>e.afficherActivite&&e.afficherActivite(...n)),onKeydown:t[12]||(t[12]=Q((...n)=>e.afficherActivite&&e.afficherActivite(...n),["enter"]))},t[327]||(t[327]=[l("i",{class:"material-icons"},"schedule",-1)]),40,Vc)):fe("",!0),e.accesAutorise&&(!e.pad.conversation||e.pad.conversation&&e.pad.conversation==="activee")?(T(),w("span",{key:3,id:"chat",role:"button",tabindex:e.definirTabIndex(),title:e.$t("conversation"),onClick:t[13]||(t[13]=(...n)=>e.afficherChat&&e.afficherChat(...n)),onKeydown:t[14]||(t[14]=Q((...n)=>e.afficherChat&&e.afficherChat(...n),["enter"]))},[t[328]||(t[328]=l("i",{class:"material-icons"},"chat",-1)),e.nouveauxMessagesChat>0?(T(),w("span",qc,Z(e.nouveauxMessagesChat),1)):fe("",!0)],40,Hc)):fe("",!0),e.pad.hasOwnProperty("motdepasse")&&!e.admin&&e.statut!=="utilisateur"?(T(),w("span",{key:4,id:"motdepasse",role:"button",tabindex:e.definirTabIndex(),title:e.$t("motDePassePad"),onClick:t[15]||(t[15]=(...n)=>e.afficherModaleMotDePasse&&e.afficherModaleMotDePasse(...n)),onKeydown:t[16]||(t[16]=Q((...n)=>e.afficherModaleMotDePasse&&e.afficherModaleMotDePasse(...n),["enter"]))},t[329]||(t[329]=[l("i",{class:"material-icons"},"vpn_key",-1)]),40,Kc)):fe("",!0),e.admin?(T(),w("span",{key:5,id:"options",role:"button",tabindex:e.definirTabIndex(),title:e.$t("parametresPad"),onClick:t[17]||(t[17]=(...n)=>e.afficherOptions&&e.afficherOptions(...n)),onKeydown:t[18]||(t[18]=Q((...n)=>e.afficherOptions&&e.afficherOptions(...n),["enter"]))},t[330]||(t[330]=[l("i",{class:"material-icons"},"settings",-1)]),40,jc)):!e.admin&&e.statut!=="utilisateur"?(T(),w("span",{key:6,id:"options",role:"button",tabindex:e.definirTabIndex(),title:e.$t("parametresPad"),onClick:t[19]||(t[19]=(...n)=>e.afficherOptions&&e.afficherOptions(...n)),onKeydown:t[20]||(t[20]=Q((...n)=>e.afficherOptions&&e.afficherOptions(...n),["enter"]))},t[331]||(t[331]=[l("i",{class:"material-icons"},"language",-1)]),40,Xc)):fe("",!0),e.admin&&e.action!=="organiser"?(T(),w("span",{key:7,id:"organisation",role:"button",tabindex:e.definirTabIndex(),class:Ne({desactive:e.definirClasseOrganiser()===!1}),title:e.$t("modeOrganiser"),onClick:t[21]||(t[21]=(...n)=>e.activerModeOrganiser&&e.activerModeOrganiser(...n)),onKeydown:t[22]||(t[22]=Q((...n)=>e.activerModeOrganiser&&e.activerModeOrganiser(...n),["enter"]))},t[332]||(t[332]=[l("i",{class:"material-icons"},"sort",-1)]),42,Uc)):e.admin&&e.action==="organiser"?(T(),w("span",{key:8,id:"organisation",class:"actif",role:"button",tabindex:e.definirTabIndex(),title:e.$t("finModeOrganiser"),onClick:t[23]||(t[23]=(...n)=>e.desactiverModeOrganiser&&e.desactiverModeOrganiser(...n)),onKeydown:t[24]||(t[24]=Q((...n)=>e.desactiverModeOrganiser&&e.desactiverModeOrganiser(...n),["enter"]))},t[333]||(t[333]=[l("i",{class:"material-icons"},"sort",-1)]),40,zc)):fe("",!0),l("span",{id:"diaporama",role:"button",tabindex:e.definirTabIndex(),class:Ne({desactive:e.blocs.length===0}),title:e.$t("modeDiaporama"),onClick:t[25]||(t[25]=(...n)=>e.afficherModaleDiaporama&&e.afficherModaleDiaporama(...n)),onKeydown:t[26]||(t[26]=Q((...n)=>e.afficherModaleDiaporama&&e.afficherModaleDiaporama(...n),["enter"]))},t[334]||(t[334]=[l("i",{class:"material-icons"},"slideshow",-1)]),42,Yc),e.statut==="utilisateur"?(T(),w("span",{key:9,id:"deconnexion",role:"button",tabindex:e.definirTabIndex(),title:e.$t("deconnexion"),onClick:t[27]||(t[27]=(...n)=>e.deconnexion&&e.deconnexion(...n)),onKeydown:t[28]||(t[28]=Q((...n)=>e.deconnexion&&e.deconnexion(...n),["enter"]))},t[335]||(t[335]=[l("i",{class:"material-icons"},"power_settings_new",-1)]),40,Gc)):e.admin?(T(),w("span",{key:10,id:"deconnexion",role:"button",tabindex:e.definirTabIndex(),title:e.$t("seDeconnecterPad"),onClick:t[29]||(t[29]=(...n)=>e.afficherSeDeconnecterPad&&e.afficherSeDeconnecterPad(...n)),onKeydown:t[30]||(t[30]=Q((...n)=>e.afficherSeDeconnecterPad&&e.afficherSeDeconnecterPad(...n),["enter"]))},t[336]||(t[336]=[l("i",{class:"material-icons"},"power_settings_new",-1)]),40,xc)):fe("",!0)]),e.menu==="activite"&&e.pad.registreActivite==="active"?(T(),w("div",Wc,[l("div",Qc,[l("span",Zc,Z(e.$t("activitePad")),1),l("span",Jc,[e.admin&&e.activite.length>0?(T(),w("span",{key:0,class:"reinitialiser",role:"button",tabindex:e.definirTabIndex(),title:e.$t("reinitialiserActivite"),onClick:t[31]||(t[31]=(...n)=>e.afficherReinitialiserActivite&&e.afficherReinitialiserActivite(...n)),onKeydown:t[32]||(t[32]=Q((...n)=>e.afficherReinitialiserActivite&&e.afficherReinitialiserActivite(...n),["enter"]))},t[337]||(t[337]=[l("i",{class:"material-icons"},"autorenew",-1)]),40,eh)):fe("",!0),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndex(),onClick:t[33]||(t[33]=(...n)=>e.fermerMenu&&e.fermerMenu(...n)),onKeydown:t[34]||(t[34]=Q((...n)=>e.fermerMenu&&e.fermerMenu(...n),["enter"]))},t[338]||(t[338]=[l("i",{class:"material-icons"},"close",-1)]),40,th)])]),l("div",ih,[l("ul",nh,[(T(!0),w(Qe,null,Je(e.activite,(n,$)=>(T(),w(Qe,null,[n.type==="bloc-ajoute"?(T(),w("li",{"data-bloc":n.bloc,key:"bloc-ajoute_"+$},[l("div",sh,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[339]||(t[339]=ot()),n.titre!==""?(T(),w("span",{key:0,innerHTML:e.$t("aCreeCapsule",{titre:n.titre})},null,8,oh)):(T(),w("span",{key:1,innerHTML:e.$t("aCreeUneCapsule")},null,8,rh)),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",lh,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[340]||(t[340]=[l("i",{class:"material-icons"},"delete",-1)]),40,dh)])):fe("",!0)],8,ah)):n.type==="bloc-supprime"?(T(),w("li",{"data-bloc":n.bloc,key:"bloc-supprime_"+$},[l("div",fh,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[341]||(t[341]=ot()),n.titre!==""?(T(),w("span",{key:0,innerHTML:e.$t("aSupprimeCapsule",{titre:n.titre})},null,8,ch)):(T(),w("span",{key:1,innerHTML:e.$t("aSupprimeUneCapsule")},null,8,hh)),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",mh,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[342]||(t[342]=[l("i",{class:"material-icons"},"delete",-1)]),40,vh)])):fe("",!0)],8,uh)):n.type==="bloc-modifie"?(T(),w("li",{"data-bloc":n.bloc,key:"bloc-modifie_"+$},[l("div",bh,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[343]||(t[343]=ot()),n.titre!==""?(T(),w("span",{key:0,innerHTML:e.$t("aModifieCapsule",{titre:n.titre})},null,8,gh)):(T(),w("span",{key:1,innerHTML:e.$t("aModifieUneCapsule")},null,8,yh)),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",_h,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[344]||(t[344]=[l("i",{class:"material-icons"},"delete",-1)]),40,Eh)])):fe("",!0)],8,ph)):n.type==="bloc-commente"?(T(),w("li",{"data-bloc":n.bloc,key:"bloc-commente_"+$},[l("div",Th,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[345]||(t[345]=ot()),n.titre!==""?(T(),w("span",{key:0,innerHTML:e.$t("aCommenteCapsule",{titre:n.titre})},null,8,wh)):(T(),w("span",{key:1,innerHTML:e.$t("aCommenteUneCapsule")},null,8,Sh)),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",kh,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[346]||(t[346]=[l("i",{class:"material-icons"},"delete",-1)]),40,Ah)])):fe("",!0)],8,Ch)):n.type==="bloc-evalue"?(T(),w("li",{"data-bloc":n.bloc,key:"bloc-evalue_"+$},[l("div",Ih,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[347]||(t[347]=ot()),n.titre!==""?(T(),w("span",{key:0,innerHTML:e.$t("aEvalueCapsule",{titre:n.titre})},null,8,Rh)):(T(),w("span",{key:1,innerHTML:e.$t("aEvalueUneCapsule")},null,8,Bh)),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",$h,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[348]||(t[348]=[l("i",{class:"material-icons"},"delete",-1)]),40,Dh)])):fe("",!0)],8,Mh)):n.type==="colonne-ajoutee"&&e.pad.affichage==="colonnes"?(T(),w("li",{key:"colonne-ajoutee_"+$},[l("div",Lh,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[349]||(t[349]=ot()),l("span",{innerHTML:e.$t("aAjouteColonne",{titre:n.titre})},null,8,Oh),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",Nh,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[350]||(t[350]=[l("i",{class:"material-icons"},"delete",-1)]),40,Ph)])):fe("",!0)])):n.type==="colonne-supprimee"&&e.pad.affichage==="colonnes"?(T(),w("li",{key:"colonne-supprimee_"+$},[l("div",Fh,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[351]||(t[351]=ot()),l("span",{innerHTML:e.$t("aSupprimeColonne",{titre:n.titre})},null,8,Vh),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",Hh,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[352]||(t[352]=[l("i",{class:"material-icons"},"delete",-1)]),40,qh)])):fe("",!0)])):n.type==="colonne-deplacee"&&e.pad.affichage==="colonnes"?(T(),w("li",{key:"colonne-deplacee_"+$},[l("div",Kh,[l("span",{style:rt({color:n.couleur})},Z(e.definirNom(n)),5),t[353]||(t[353]=ot()),l("span",{innerHTML:e.$t("aDeplaceColonne",{titre:n.titre})},null,8,jh),ot(" "+Z(e.$formaterDateRelative(n.date,e.langue))+".",1)]),e.admin?(T(),w("div",Xh,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerEntree"),onClick:_=>e.supprimerActivite(n.id),onKeydown:Q(_=>e.supprimerActivite(n.id),["enter"])},t[354]||(t[354]=[l("i",{class:"material-icons"},"delete",-1)]),40,Uh)])):fe("",!0)])):fe("",!0)],64))),256))])])])):e.menu==="chat"&&e.pad.conversation==="activee"?(T(),w("div",zh,[l("div",Yh,[l("span",Gh,Z(e.$t("conversation")),1),l("span",xh,[e.admin&&e.messagesChat.length>0?(T(),w("span",{key:0,class:"reinitialiser",role:"button",tabindex:e.definirTabIndex(),onClick:t[35]||(t[35]=(...n)=>e.afficherReinitialiserMessages&&e.afficherReinitialiserMessages(...n)),onKeydown:t[36]||(t[36]=Q((...n)=>e.afficherReinitialiserMessages&&e.afficherReinitialiserMessages(...n),["enter"]))},t[355]||(t[355]=[l("i",{class:"material-icons"},"autorenew",-1)]),40,Wh)):fe("",!0),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndex(),onClick:t[37]||(t[37]=(...n)=>e.fermerMenu&&e.fermerMenu(...n)),onKeydown:t[38]||(t[38]=Q((...n)=>e.fermerMenu&&e.fermerMenu(...n),["enter"]))},t[356]||(t[356]=[l("i",{class:"material-icons"},"close",-1)]),40,Qh)])]),l("div",Zh,[l("ul",Jh,[(T(!0),w(Qe,null,Je(e.messagesChat,(n,$)=>(T(),w("li",{key:"conversation_"+$},[l("span",null,Z(e.definirNom(n)),1),ot(Z(n.texte),1)]))),128))]),l("div",em,[l("input",{type:"text",value:e.messageChat,onInput:t[39]||(t[39]=n=>e.messageChat=n.target.value),autocomplete:"off",onKeydown:t[40]||(t[40]=Q((...n)=>e.envoyerMessage&&e.envoyerMessage(...n),["enter"]))},null,40,tm),l("button",{tabindex:e.definirTabIndex(),onClick:t[41]||(t[41]=(...n)=>e.envoyerMessage&&e.envoyerMessage(...n))},t[357]||(t[357]=[l("i",{class:"material-icons"},"send",-1)]),8,im)])])])):e.menu==="options"&&e.admin?(T(),w("div",nm,[l("div",am,[l("span",sm,Z(e.$t("parametresPad")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndex(),onClick:t[42]||(t[42]=(...n)=>e.fermerMenuOptions&&e.fermerMenuOptions(...n)),onKeydown:t[43]||(t[43]=Q((...n)=>e.fermerMenuOptions&&e.fermerMenuOptions(...n),["enter"]))},t[358]||(t[358]=[l("i",{class:"material-icons"},"close",-1)]),40,om)]),l("div",rm,[l("div",lm,[l("label",dm,Z(e.$t("titre")),1),l("input",{id:"titre-pad",type:"text",disabled:e.digidrive,value:e.pad.titre,onKeydown:t[44]||(t[44]=Q((...n)=>e.modifierTitre&&e.modifierTitre(...n),["enter"]))},null,40,um)]),e.digidrive?fe("",!0):(T(),w("div",fm,[l("span",{class:"bouton-vert",role:"button",tabindex:e.definirTabIndex(),onClick:t[45]||(t[45]=(...n)=>e.modifierTitre&&e.modifierTitre(...n)),onKeydown:t[46]||(t[46]=Q((...n)=>e.modifierTitre&&e.modifierTitre(...n),["enter"]))},Z(e.$t("enregistrer")),41,cm)])),e.pad.identifiant===e.identifiant&&e.statut==="auteur"&&!e.digidrive?(T(),w("div",hm,[l("span",{class:"bouton-bleu",role:"button",tabindex:e.definirTabIndex(),onClick:t[47]||(t[47]=(...n)=>e.afficherModaleModifierMotDePasse&&e.afficherModaleModifierMotDePasse(...n)),onKeydown:t[48]||(t[48]=Q((...n)=>e.afficherModaleModifierMotDePasse&&e.afficherModaleModifierMotDePasse(...n),["enter"]))},Z(e.$t("modifierMotDePasse")),41,mm)])):fe("",!0),l("div",vm,[l("label",null,Z(e.$t("lienEtCodeQR")),1),l("div",pm,[l("input",{type:"text",disabled:"",value:e.hote+"/p/"+e.pad.id+"/"+e.pad.token},null,8,bm),l("span",{class:"icone lien",role:"button",tabindex:e.definirTabIndex(),title:e.$t("copierLien"),onKeydown:t[49]||(t[49]=Q((...n)=>e.copierLien&&e.copierLien(...n),["enter"]))},t[359]||(t[359]=[l("i",{class:"material-icons"},"content_copy",-1)]),40,gm),l("span",{class:"icone codeqr",role:"button",tabindex:e.definirTabIndex(),title:e.$t("afficherCodeQR"),onClick:t[50]||(t[50]=(...n)=>e.afficherCodeQR&&e.afficherCodeQR(...n)),onKeydown:t[51]||(t[51]=Q((...n)=>e.afficherCodeQR&&e.afficherCodeQR(...n),["enter"]))},t[360]||(t[360]=[l("i",{class:"material-icons"},"qr_code",-1)]),40,ym)])]),l("div",_m,[l("label",null,Z(e.$t("codeIntegration")),1),l("div",Em,[l("input",{type:"text",disabled:"",value:'<iframe src="'+e.hote+"/p/"+e.pad.id+"/"+e.pad.token+'" frameborder="0" width="100%" height="500" allow="autoplay; fullscreen"></iframe>'},null,8,Cm),l("span",{class:"icone lien",role:"button",tabindex:e.definirTabIndex(),title:e.$t("copierCode"),onKeydown:t[52]||(t[52]=Q((...n)=>e.copierIframe&&e.copierIframe(...n),["enter"]))},t[361]||(t[361]=[l("i",{class:"material-icons"},"content_copy",-1)]),40,Tm)])]),l("div",wm,[l("label",null,Z(e.$t("langue")),1),l("div",Sm,[l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="fr"}),onClick:t[53]||(t[53]=n=>e.modifierLangue("fr")),onKeydown:t[54]||(t[54]=Q(n=>e.modifierLangue("fr"),["enter"]))},"FR",42,km),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="es"}),onClick:t[55]||(t[55]=n=>e.modifierLangue("es")),onKeydown:t[56]||(t[56]=Q(n=>e.modifierLangue("es"),["enter"]))},"ES",42,Am),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="it"}),onClick:t[57]||(t[57]=n=>e.modifierLangue("it")),onKeydown:t[58]||(t[58]=Q(n=>e.modifierLangue("it"),["enter"]))},"IT",42,Mm),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="de"}),onClick:t[59]||(t[59]=n=>e.modifierLangue("de")),onKeydown:t[60]||(t[60]=Q(n=>e.modifierLangue("de"),["enter"]))},"DE",42,Im),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="en"}),onClick:t[61]||(t[61]=n=>e.modifierLangue("en")),onKeydown:t[62]||(t[62]=Q(n=>e.modifierLangue("en"),["enter"]))},"EN",42,Rm),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="hr"}),onClick:t[63]||(t[63]=n=>e.modifierLangue("hr")),onKeydown:t[64]||(t[64]=Q(n=>e.modifierLangue("hr"),["enter"]))},"HR",42,Bm)])]),e.pad.identifiant===e.identifiant&&e.statut!=="auteur"?(T(),w("div",$m,[l("label",null,Z(e.$t("adminsPad")),1),l("span",{class:"bouton-bleu",role:"button",tabindex:e.definirTabIndex(),onClick:t[65]||(t[65]=(...n)=>e.ouvrirModaleAdmins&&e.ouvrirModaleAdmins(...n)),onKeydown:t[66]||(t[66]=Q((...n)=>e.ouvrirModaleAdmins&&e.ouvrirModaleAdmins(...n),["enter"]))},Z(e.$t("gererAdmins")),41,Dm)])):fe("",!0),l("div",Lm,[l("label",null,Z(e.$t("acces")),1),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[68]||(t[68]=Q(n=>e.activerInput("acces-public"),["enter"]))},[ot(Z(e.$t("public"))+" ",1),l("input",{id:"acces-public",type:"radio",name:"acces",checked:e.pad.acces==="public",onChange:t[67]||(t[67]=n=>e.modifierAcces("public"))},null,40,Nm),t[362]||(t[362]=l("span",{class:"coche"},null,-1))],40,Om),e.statut==="utilisateur"?(T(),w("label",{key:0,class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[70]||(t[70]=Q(n=>e.activerInput("acces-prive"),["enter"]))},[ot(Z(e.$t("prive"))+" ",1),l("input",{id:"acces-prive",type:"radio",name:"acces",checked:e.pad.acces==="prive",onChange:t[69]||(t[69]=n=>e.modifierAcces("prive"))},null,40,Fm),t[363]||(t[363]=l("span",{class:"coche"},null,-1))],40,Pm)):fe("",!0),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[72]||(t[72]=Q(n=>e.activerInput("acces-code"),["enter"]))},[ot(Z(e.$t("protege"))+" ",1),l("input",{id:"acces-code",type:"radio",name:"acces",checked:e.pad.acces==="code",onChange:t[71]||(t[71]=n=>e.modifierAcces("code"))},null,40,Hm),t[364]||(t[364]=l("span",{class:"coche"},null,-1))],40,Vm)]),e.pad.acces==="code"?(T(),w("div",qm,[l("label",Km,Z(e.$t("codeAcces")),1),l("div",jm,[e.codeVisible?(T(),w("input",{key:0,id:"champ-code-acces",type:"text",maxlength:"18",disabled:e.modificationCode===!1,value:e.pad.code},null,8,Xm)):(T(),w("input",{key:1,id:"champ-code-acces",type:"password",disabled:e.modificationCode===!1,value:e.pad.code},null,8,Um)),e.modificationCode?(T(),w("span",{key:3,class:"icone",role:"button",tabindex:e.definirTabIndex(),title:e.$t("annulerModifierCode"),onClick:t[75]||(t[75]=(...n)=>e.annulerModifierCodeAcces&&e.annulerModifierCodeAcces(...n)),onKeydown:t[76]||(t[76]=Q((...n)=>e.annulerModifierCodeAcces&&e.annulerModifierCodeAcces(...n),["enter"]))},t[366]||(t[366]=[l("i",{class:"material-icons"},"edit_off",-1)]),40,Ym)):(T(),w("span",{key:2,class:"icone",role:"button",tabindex:e.definirTabIndex(),title:e.$t("modifierCode"),onClick:t[73]||(t[73]=(...n)=>e.afficherModifierCodeAcces&&e.afficherModifierCodeAcces(...n)),onKeydown:t[74]||(t[74]=Q((...n)=>e.afficherModifierCodeAcces&&e.afficherModifierCodeAcces(...n),["enter"]))},t[365]||(t[365]=[l("i",{class:"material-icons"},"edit",-1)]),40,zm)),e.codeVisible?(T(),w("span",{key:4,class:"icone",role:"button",tabindex:e.definirTabIndex(),title:e.$t("masquerCode"),onClick:t[77]||(t[77]=(...n)=>e.masquerCodeAcces&&e.masquerCodeAcces(...n)),onKeydown:t[78]||(t[78]=Q((...n)=>e.masquerCodeAcces&&e.masquerCodeAcces(...n),["enter"]))},t[367]||(t[367]=[l("i",{class:"material-icons"},"visibility_off",-1)]),40,Gm)):(T(),w("span",{key:5,class:"icone",role:"button",tabindex:e.definirTabIndex(),title:e.$t("afficherCode"),onClick:t[79]||(t[79]=(...n)=>e.afficherCodeAcces&&e.afficherCodeAcces(...n)),onKeydown:t[80]||(t[80]=Q((...n)=>e.afficherCodeAcces&&e.afficherCodeAcces(...n),["enter"]))},t[368]||(t[368]=[l("i",{class:"material-icons"},"visibility",-1)]),40,xm))])])):fe("",!0),e.modificationCode?(T(),w("div",Wm,[l("span",{class:"bouton-vert",role:"button",tabindex:e.definirTabIndex(),onClick:t[81]||(t[81]=(...n)=>e.modifierCodeAcces&&e.modifierCodeAcces(...n)),onKeydown:t[82]||(t[82]=Q((...n)=>e.modifierCodeAcces&&e.modifierCodeAcces(...n),["enter"]))},Z(e.$t("enregistrer")),41,Qm)])):fe("",!0),e.pad.acces!=="prive"?(T(),w("div",Zm,[l("label",null,Z(e.$t("contributions")),1),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[84]||(t[84]=Q(n=>e.activerInput("contributions-modifiables"),["enter"]))},[ot(Z(e.$t("modifiables"))+" ",1),l("input",{id:"contributions-modifiables",type:"radio",name:"contributions",checked:e.pad.contributions==="modifiables",onChange:t[83]||(t[83]=n=>e.modifierContributions("modifiables"))},null,40,e2),t[369]||(t[369]=l("span",{class:"coche"},null,-1))],40,Jm),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[86]||(t[86]=Q(n=>e.activerInput("contributions-ouvertes"),["enter"]))},[ot(Z(e.$t("ouvertes"))+" ",1),l("input",{id:"contributions-ouvertes",type:"radio",name:"contributions",checked:e.pad.contributions==="ouvertes",onChange:t[85]||(t[85]=n=>e.modifierContributions("ouvertes"))},null,40,i2),t[370]||(t[370]=l("span",{class:"coche"},null,-1))],40,t2),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[88]||(t[88]=Q(n=>e.activerInput("contributions-moderees"),["enter"]))},[ot(Z(e.$t("moderees"))+" ",1),l("input",{id:"contributions-moderees",type:"radio",name:"contributions",checked:e.pad.contributions==="moderees",onChange:t[87]||(t[87]=n=>e.modifierContributions("moderees"))},null,40,a2),t[371]||(t[371]=l("span",{class:"coche"},null,-1))],40,n2),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[90]||(t[90]=Q(n=>e.activerInput("contributions-fermees"),["enter"]))},[ot(Z(e.$t("fermees"))+" ",1),l("input",{id:"contributions-fermees",type:"radio",name:"contributions",checked:e.pad.contributions==="fermees",onChange:t[89]||(t[89]=n=>e.modifierContributions("fermees"))},null,40,o2),t[372]||(t[372]=l("span",{class:"coche"},null,-1))],40,s2)])):fe("",!0),l("div",r2,[l("label",null,Z(e.$t("affichage")),1),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[92]||(t[92]=Q(n=>e.activerInput("affichage-mur"),["enter"]))},[ot(Z(e.$t("mur"))+" ",1),l("input",{id:"affichage-mur",type:"radio",name:"affichage",checked:e.pad.affichage==="mur",onChange:t[91]||(t[91]=n=>e.modifierAffichage("mur"))},null,40,d2),t[373]||(t[373]=l("span",{class:"coche"},null,-1))],40,l2),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[94]||(t[94]=Q(n=>e.activerInput("affichage-flux"),["enter"]))},[ot(Z(e.$t("fluxVertical"))+" ",1),l("input",{id:"affichage-flux",type:"radio",name:"affichage",checked:e.pad.affichage==="flux-vertical",onChange:t[93]||(t[93]=n=>e.modifierAffichage("flux-vertical"))},null,40,f2),t[374]||(t[374]=l("span",{class:"coche"},null,-1))],40,u2),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[96]||(t[96]=Q(n=>e.activerInput("affichage-colonnes"),["enter"]))},[ot(Z(e.$t("colonnes"))+" ",1),l("input",{id:"affichage-colonnes",type:"radio",name:"affichage",checked:e.pad.affichage==="colonnes",onChange:t[95]||(t[95]=n=>e.modifierAffichage("colonnes"))},null,40,h2),t[375]||(t[375]=l("span",{class:"coche"},null,-1))],40,c2)]),l("div",m2,[l("label",null,Z(e.$t("ordreCapsules")),1),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[98]||(t[98]=Q(n=>e.activerInput("ordre-croissant"),["enter"]))},[ot(Z(e.$t("croissant"))+" ",1),l("input",{id:"ordre-croissant",type:"radio",name:"ordre",checked:e.pad.ordre==="croissant",onChange:t[97]||(t[97]=n=>e.modifierOrdre("croissant"))},null,40,p2),t[376]||(t[376]=l("span",{class:"coche"},null,-1))],40,v2),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[100]||(t[100]=Q(n=>e.activerInput("ordre-decroissant"),["enter"]))},[ot(Z(e.$t("decroissant"))+" ",1),l("input",{id:"ordre-decroissant",type:"radio",name:"ordre",checked:e.pad.ordre==="decroissant",onChange:t[99]||(t[99]=n=>e.modifierOrdre("decroissant"))},null,40,g2),t[377]||(t[377]=l("span",{class:"coche"},null,-1))],40,b2)]),l("div",y2,[l("label",null,Z(e.$t("largeurCapsules")),1),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[102]||(t[102]=Q(n=>e.activerInput("largeur-normale"),["enter"]))},[ot(Z(e.$t("normale"))+" ",1),l("input",{id:"largeur-normale",type:"radio",name:"largeur",checked:e.pad.largeur==="normale",onChange:t[101]||(t[101]=n=>e.modifierLargeur("normale"))},null,40,E2),t[378]||(t[378]=l("span",{class:"coche"},null,-1))],40,_2),l("label",{class:"bouton-radio",tabindex:e.definirTabIndex(),onKeydown:t[104]||(t[104]=Q(n=>e.activerInput("largeur-large"),["enter"]))},[ot(Z(e.$t("large"))+" ",1),l("input",{id:"largeur-large",type:"radio",name:"largeur",checked:e.pad.largeur==="large",onChange:t[103]||(t[103]=n=>e.modifierLargeur("large"))},null,40,T2),t[379]||(t[379]=l("span",{class:"coche"},null,-1))],40,C2)]),l("div",w2,[l("label",null,Z(e.$t("arrierePlan")),1),l("div",S2,[(T(!0),w(Qe,null,Je(e.fonds,(n,$)=>(T(),w("span",{role:"button",tabindex:e.definirTabIndex(),onClick:_=>e.modifierFond(n),onKeydown:Q(_=>e.modifierFond(n),["enter"]),key:"fond_"+$},[l("img",{src:"/img/vignettes/"+n,alt:"Fond"+($+1)},null,8,A2)],40,k2))),128)),l("span",M2,[e.pad.hasOwnProperty("fond")&&e.pad.fond.substring(0,1)==="#"?(T(),w("input",{key:0,type:"color",value:e.pad.fond,onChange:t[105]||(t[105]=(...n)=>e.modifierCouleurFond&&e.modifierCouleurFond(...n)),title:e.$t("selectionnerCouleur")},null,40,I2)):(T(),w("input",{key:1,type:"color",value:"#ffffff",onChange:t[106]||(t[106]=(...n)=>e.modifierCouleurFond&&e.modifierCouleurFond(...n)),title:e.$t("selectionnerCouleur")},null,40,R2))])])]),l("div",B2,[e.menu==="options"&&e.progressionFond===0?(T(),w("label",{key:0,for:"televerser-fond",class:"bouton-bleu",role:"button",tabindex:e.definirTabIndex(),onKeydown:t[107]||(t[107]=Q(n=>e.activerInput("televerser-fond"),["enter"]))},Z(e.$t("televerserImageFond")),41,$2)):fe("",!0),l("input",{id:"televerser-fond",type:"file",style:{display:"none"},accept:".jpg, .jpeg, .png, .gif",onChange:t[108]||(t[108]=(...n)=>e.ajouterFond&&e.ajouterFond(...n))},null,32),e.menu==="options"&&e.progressionFond>0?(T(),w("div",D2,[l("progress",{class:"barre-progression",max:"100",value:e.progressionFond},null,8,L2),t[380]||(t[380]=l("div",{class:"chargement"},null,-1))])):fe("",!0)]),l("div",O2,[l("label",null,Z(e.$t("onglets")),1),l("div",N2,[l("span",null,Z(e.$t("activitePad")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[110]||(t[110]=Q(n=>e.activerInput("parametre-registre-activite"),["enter"]))},[l("input",{id:"parametre-registre-activite",type:"checkbox",checked:!e.pad.registreActivite||e.pad.registreActivite==="active",onChange:t[109]||(t[109]=(...n)=>e.modifierActivite&&e.modifierActivite(...n))},null,40,F2),t[381]||(t[381]=l("span",{class:"barre"},null,-1))],40,P2)]),l("div",V2,[l("span",null,Z(e.$t("conversation")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[112]||(t[112]=Q(n=>e.activerInput("parametre-conversation"),["enter"]))},[l("input",{id:"parametre-conversation",type:"checkbox",checked:!e.pad.conversation||e.pad.conversation==="activee",onChange:t[111]||(t[111]=(...n)=>e.modifierConversation&&e.modifierConversation(...n))},null,40,q2),t[382]||(t[382]=l("span",{class:"barre"},null,-1))],40,H2)])]),l("div",K2,[l("label",null,Z(e.$t("utilisateurs")),1),l("div",j2,[l("span",null,Z(e.$t("utilisateursConnectes")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[114]||(t[114]=Q(n=>e.activerInput("parametre-liste-utilisateurs"),["enter"]))},[l("input",{id:"parametre-liste-utilisateurs",type:"checkbox",checked:!e.pad.listeUtilisateurs||e.pad.listeUtilisateurs==="activee",onChange:t[113]||(t[113]=(...n)=>e.modifierListeUtilisateurs&&e.modifierListeUtilisateurs(...n))},null,40,U2),t[383]||(t[383]=l("span",{class:"barre"},null,-1))],40,X2)]),!e.pad.listeUtilisateurs||e.pad.listeUtilisateurs==="activee"?(T(),w("div",z2,[l("span",null,Z(e.$t("editionNom")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[116]||(t[116]=Q(n=>e.activerInput("parametre-edition-nom"),["enter"]))},[l("input",{id:"parametre-edition-nom",type:"checkbox",checked:e.pad.editionNom==="activee",onChange:t[115]||(t[115]=(...n)=>e.modifierEditionNom&&e.modifierEditionNom(...n))},null,40,G2),t[384]||(t[384]=l("span",{class:"barre"},null,-1))],40,Y2)])):fe("",!0)]),l("div",x2,[l("label",null,Z(e.$t("capsules")),1),l("div",W2,[l("span",null,Z(e.$t("fichiers")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[118]||(t[118]=Q(n=>e.activerInput("parametre-fichiers"),["enter"]))},[l("input",{id:"parametre-fichiers",type:"checkbox",checked:e.pad.fichiers==="actives",onChange:t[117]||(t[117]=(...n)=>e.modifierFichiers&&e.modifierFichiers(...n))},null,40,Z2),t[385]||(t[385]=l("span",{class:"barre"},null,-1))],40,Q2)]),l("div",J2,[l("span",null,Z(e.$t("enregistrementsAudio")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[120]||(t[120]=Q(n=>e.activerInput("parametre-enregistrements"),["enter"]))},[l("input",{id:"parametre-enregistrements",type:"checkbox",checked:e.pad.enregistrements==="actives",onChange:t[119]||(t[119]=(...n)=>e.modifierEnregistrements&&e.modifierEnregistrements(...n))},null,40,tv),t[386]||(t[386]=l("span",{class:"barre"},null,-1))],40,ev)]),l("div",iv,[l("span",null,Z(e.$t("liens")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[122]||(t[122]=Q(n=>e.activerInput("parametre-liens"),["enter"]))},[l("input",{id:"parametre-liens",type:"checkbox",checked:e.pad.liens==="actives",onChange:t[121]||(t[121]=(...n)=>e.modifierLiens&&e.modifierLiens(...n))},null,40,av),t[387]||(t[387]=l("span",{class:"barre"},null,-1))],40,nv)]),e.etherpad!==""&&e.etherpadApi!==""?(T(),w("div",sv,[l("span",null,Z(e.$t("documentsCollaboratifs")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[124]||(t[124]=Q(n=>e.activerInput("parametre-documents"),["enter"]))},[l("input",{id:"parametre-documents",type:"checkbox",checked:e.pad.documents==="actives",onChange:t[123]||(t[123]=(...n)=>e.modifierDocuments&&e.modifierDocuments(...n))},null,40,rv),t[388]||(t[388]=l("span",{class:"barre"},null,-1))],40,ov)])):fe("",!0),l("div",lv,[l("span",null,Z(e.$t("commentaires")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[126]||(t[126]=Q(n=>e.activerInput("parametre-commentaires"),["enter"]))},[l("input",{id:"parametre-commentaires",type:"checkbox",checked:e.pad.commentaires==="actives",onChange:t[125]||(t[125]=(...n)=>e.modifierCommentaires&&e.modifierCommentaires(...n))},null,40,uv),t[389]||(t[389]=l("span",{class:"barre"},null,-1))],40,dv)]),l("div",fv,[l("span",null,Z(e.$t("evaluations")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[128]||(t[128]=Q(n=>e.activerInput("parametre-evaluations"),["enter"]))},[l("input",{id:"parametre-evaluations",type:"checkbox",checked:e.pad.evaluations==="activees",onChange:t[127]||(t[127]=(...n)=>e.modifierEvaluations&&e.modifierEvaluations(...n))},null,40,hv),t[390]||(t[390]=l("span",{class:"barre"},null,-1))],40,cv)]),e.statut==="utilisateur"||e.digidrive?(T(),w("div",mv,[l("span",null,Z(e.$t("copieCapsule")),1),l("label",{class:"bouton-interrupteur",tabindex:e.definirTabIndex(),onKeydown:t[130]||(t[130]=Q(n=>e.activerInput("parametre-copie-bloc"),["enter"]))},[l("input",{id:"parametre-copie-bloc",type:"checkbox",checked:e.pad.copieBloc==="activee",onChange:t[129]||(t[129]=(...n)=>e.modifierCopieBloc&&e.modifierCopieBloc(...n))},null,40,pv),t[391]||(t[391]=l("span",{class:"barre"},null,-1))],40,vv)])):fe("",!0)]),e.pad.identifiant===e.identifiant&&e.statut==="auteur"?(T(),w("div",bv,[l("span",{class:"bouton-bleu",role:"button",tabindex:e.definirTabIndex(),onClick:t[131]||(t[131]=(...n)=>e.afficherExporterPad&&e.afficherExporterPad(...n)),onKeydown:t[132]||(t[132]=Q((...n)=>e.afficherExporterPad&&e.afficherExporterPad(...n),["enter"]))},Z(e.$t("exporterPad")),41,gv)])):fe("",!0),e.pad.identifiant===e.identifiant&&e.statut==="auteur"&&!e.digidrive?(T(),w("div",yv,[l("span",{class:"bouton-rouge",role:"button",tabindex:e.definirTabIndex(),onClick:t[133]||(t[133]=(...n)=>e.afficherSupprimerPad&&e.afficherSupprimerPad(...n)),onKeydown:t[134]||(t[134]=Q((...n)=>e.afficherSupprimerPad&&e.afficherSupprimerPad(...n),["enter"]))},Z(e.$t("supprimerPad")),41,_v)])):fe("",!0)])])):e.menu==="options"&&!e.admin&&e.statut!=="utilisateur"?(T(),w("div",Ev,[l("div",Cv,[l("span",Tv,Z(e.$t("languePad")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndex(),onClick:t[135]||(t[135]=(...n)=>e.fermerMenuOptions&&e.fermerMenuOptions(...n)),onKeydown:t[136]||(t[136]=Q((...n)=>e.fermerMenuOptions&&e.fermerMenuOptions(...n),["enter"]))},t[392]||(t[392]=[l("i",{class:"material-icons"},"close",-1)]),40,wv)]),l("div",Sv,[l("div",kv,[l("div",Av,[l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="fr"}),onClick:t[137]||(t[137]=n=>e.modifierLangue("fr")),onKeydown:t[138]||(t[138]=Q(n=>e.modifierLangue("fr"),["enter"]))},"FR",42,Mv),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="es"}),onClick:t[139]||(t[139]=n=>e.modifierLangue("es")),onKeydown:t[140]||(t[140]=Q(n=>e.modifierLangue("es"),["enter"]))},"ES",42,Iv),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="it"}),onClick:t[141]||(t[141]=n=>e.modifierLangue("it")),onKeydown:t[142]||(t[142]=Q(n=>e.modifierLangue("it"),["enter"]))},"IT",42,Rv),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="de"}),onClick:t[143]||(t[143]=n=>e.modifierLangue("de")),onKeydown:t[144]||(t[144]=Q(n=>e.modifierLangue("de"),["enter"]))},"DE",42,Bv),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="en"}),onClick:t[145]||(t[145]=n=>e.modifierLangue("en")),onKeydown:t[146]||(t[146]=Q(n=>e.modifierLangue("en"),["enter"]))},"EN",42,$v),l("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({selectionne:e.langue==="hr"}),onClick:t[147]||(t[147]=n=>e.modifierLangue("hr")),onKeydown:t[148]||(t[148]=Q(n=>e.modifierLangue("hr"),["enter"]))},"HR",42,Dv)])])])])):e.menu==="utilisateurs"&&e.pad.listeUtilisateurs==="activee"?(T(),w("div",Lv,[l("div",Ov,[l("span",Nv,Z(e.$t("utilisateursConnectes")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndex(),onClick:t[149]||(t[149]=(...n)=>e.fermerMenu&&e.fermerMenu(...n)),onKeydown:t[150]||(t[150]=Q((...n)=>e.fermerMenu&&e.fermerMenu(...n),["enter"]))},t[393]||(t[393]=[l("i",{class:"material-icons"},"close",-1)]),40,Pv)]),l("div",Fv,[l("ul",Vv,[(T(!0),w(Qe,null,Je(e.utilisateurs,(n,$)=>(T(),w(Qe,null,[n.identifiant===e.identifiant?(T(),w("li",{class:"moi",key:"utilisateur_moi_"+$},[e.statut==="utilisateur"?(T(),w("span",Hv,Z(e.definirNom(n))+" ("+Z(e.$t("moi"))+")",1)):e.statut!=="utilisateur"&&e.pad.editionNom&&e.pad.editionNom==="activee"?(T(),w("span",{key:1,class:"utilisateur invite edition",role:"button",tabindex:e.definirTabIndex(),onClick:t[151]||(t[151]=(..._)=>e.afficherModifierNom&&e.afficherModifierNom(..._)),onKeydown:t[152]||(t[152]=Q((..._)=>e.afficherModifierNom&&e.afficherModifierNom(..._),["enter"]))},[l("span",null,Z(e.definirNom(n))+" ("+Z(e.$t("moi"))+")",1),t[394]||(t[394]=l("span",{class:"icone"},[l("i",{class:"material-icons"},"edit")],-1))],40,qv)):e.statut!=="utilisateur"&&(!e.pad.editionNom||e.pad.editionNom&&e.pad.editionNom==="desactivee")?(T(),w("span",Kv,Z(e.definirNom(n))+" ("+Z(e.$t("moi"))+")",1)):fe("",!0),l("span",{class:"couleur",role:"button",tabindex:e.definirTabIndex(),style:rt({background:n.couleur}),onClick:t[153]||(t[153]=_=>e.listeCouleurs=!e.listeCouleurs),onKeydown:t[154]||(t[154]=Q(_=>e.listeCouleurs=!e.listeCouleurs,["enter"]))},null,44,jv),e.listeCouleurs?(T(),w("div",Xv,[(T(!0),w(Qe,null,Je(e.couleurs,(_,C)=>(T(),w("span",{role:"button",tabindex:e.definirTabIndex(),class:Ne({actif:e.couleur===_}),style:rt({background:_}),onClick:k=>e.modifierCouleur(_),onKeydown:Q(k=>e.modifierCouleur(_),["enter"]),key:"couleur_"+C},null,46,Uv))),128)),e.couleurs.includes(e.couleur)?(T(),w("span",{key:1,class:"couleur-personnalisee",title:e.$t("selectionnerCouleur")},[l("input",{type:"color",value:"#ffffff",onChange:t[156]||(t[156]=_=>e.modifierCouleur(_.target.value))},null,32)],8,Gv)):(T(),w("span",{key:0,class:"couleur-personnalisee actif",title:e.$t("selectionnerCouleur")},[l("input",{type:"color",value:e.couleur,onChange:t[155]||(t[155]=_=>e.modifierCouleur(_.target.value))},null,40,Yv)],8,zv))])):fe("",!0)])):(T(),w("li",{key:"utilisateur_"+$},[l("span",xv,Z(e.definirNom(n)),1),l("span",{class:"couleur",style:rt({background:n.couleur})},null,4)]))],64))),256))])])])):fe("",!0),Object.keys(e.pad).length>0&&(e.pad.acces!=="code"||e.pad.acces==="code"&&e.accesAutorise)?(T(),w("div",{key:6,id:"pad",class:Ne({"fond-personnalise":e.pad.hasOwnProperty("fond")&&e.pad.fond.substring(1,e.definirDossierFichiers(e.pad.id).length+1)===e.definirDossierFichiers(e.pad.id),organiser:e.action==="organiser"}),style:rt(e.definirFond(e.pad.fond))},[e.pad.affichage==="mur"&&e.action!=="organiser"&&!e.recherche?(T(),Ei(f,{key:0,id:"blocs",class:"mur",cols:e.definirLargeurCapsules(),gutter:0},{default:$n(()=>[(T(!0),w(Qe,null,Je(e.blocs,(n,$)=>(T(),w("div",{id:n.bloc,class:Ne(["bloc",{privee:n.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":n.couleur}),"data-bloc":n.bloc,onFocus:_=>e.definirBlocActif(n.bloc),key:"bloc_"+$},[Mi(r,{admin:e.admin,identifiant:e.identifiant,item:n,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:0,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","tabindex","action"])],46,Wv))),128))]),_:1},8,["cols"])):e.pad.affichage==="mur"&&e.action!=="organiser"&&e.recherche?(T(),Ei(f,{key:1,id:"blocs",class:"mur",cols:e.definirLargeurCapsules(),gutter:0},{default:$n(()=>[(T(!0),w(Qe,null,Je(e.blocsRecherche,(n,$)=>(T(),w("div",{id:n.bloc,class:Ne(["bloc",{privee:n.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":n.couleur}),"data-bloc":n.bloc,onFocus:_=>e.definirBlocActif(n.bloc),key:"bloc_"+$},[Mi(r,{admin:e.admin,identifiant:e.identifiant,item:n,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:0,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","tabindex","action"])],46,Qv))),128))]),_:1},8,["cols"])):e.pad.affichage==="flux-vertical"&&e.action!=="organiser"&&!e.recherche?(T(),w("div",{key:2,id:"blocs",class:Ne(["flux-vertical",{large:e.pad.hasOwnProperty("largeur")&&e.pad.largeur==="large"}])},[(T(!0),w(Qe,null,Je(e.blocs,(n,$)=>(T(),w("div",{id:n.bloc,class:Ne(["bloc",{privee:n.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":n.couleur}),"data-bloc":n.bloc,onFocus:_=>e.definirBlocActif(n.bloc),key:"bloc_"+$},[Mi(E,{admin:e.admin,identifiant:e.identifiant,item:n,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:0,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","tabindex","action"])],46,Zv))),128))],2)):e.pad.affichage==="flux-vertical"&&e.action!=="organiser"&&e.recherche?(T(),w("div",{key:3,id:"blocs",class:Ne(["flux-vertical",{large:e.pad.hasOwnProperty("largeur")&&e.pad.largeur==="large"}])},[(T(!0),w(Qe,null,Je(e.blocsRecherche,(n,$)=>(T(),w("div",{id:n.bloc,class:Ne(["bloc",{privee:n.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":n.couleur}),"data-bloc":n.bloc,onFocus:_=>e.definirBlocActif(n.bloc),key:"bloc_"+$},[Mi(E,{admin:e.admin,identifiant:e.identifiant,item:n,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:0,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","tabindex","action"])],46,Jv))),128))],2)):e.pad.affichage==="colonnes"&&e.action!=="organiser"&&!e.recherche?(T(),w("div",ep,[(T(!0),w(Qe,null,Je(e.pad.colonnes,(n,$)=>(T(),w(Qe,null,[!e.pad.hasOwnProperty("affichageColonnes")||e.admin||e.pad.hasOwnProperty("affichageColonnes")&&e.pad.affichageColonnes[$]?(T(),w("section",{id:"colonne"+$,class:Ne(["colonne",{masquee:e.admin&&e.pad.hasOwnProperty("affichageColonnes")&&!e.pad.affichageColonnes[$],large:e.pad.hasOwnProperty("largeur")&&e.pad.largeur==="large"}]),key:"colonne_"+$},[l("div",ip,[l("div",np,[l("span",null,Z(n),1)]),e.admin?(T(),w("div",ap,[!e.pad.hasOwnProperty("affichageColonnes")||e.pad.affichageColonnes[$]?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:e.definirTabIndex(),title:e.$t("masquerColonne"),onClick:_=>e.masquerColonne($),onKeydown:Q(_=>e.masquerColonne($),["enter"])},t[395]||(t[395]=[l("i",{class:"material-icons"},"visibility_off",-1)]),40,sp)):e.pad.hasOwnProperty("affichageColonnes")&&!e.pad.affichageColonnes[$]?(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:e.definirTabIndex(),title:e.$t("afficherColonne"),onClick:_=>e.afficherColonne($),onKeydown:Q(_=>e.afficherColonne($),["enter"])},t[396]||(t[396]=[l("i",{class:"material-icons"},"visibility",-1)]),40,op)):fe("",!0),l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndex(),title:e.$t("modifierColonne"),onClick:_=>e.ouvrirModaleColonne("edition",$),onKeydown:Q(_=>e.ouvrirModaleColonne("edition",$),["enter"])},t[397]||(t[397]=[l("i",{class:"material-icons"},"edit",-1)]),40,rp),e.pad.colonnes.length>1?(T(),w("span",{key:2,class:"bouton supprimer",role:"button",tabindex:e.definirTabIndex(),title:e.$t("supprimerColonne"),onClick:_=>e.afficherSupprimerColonne($),onKeydown:Q(_=>e.afficherSupprimerColonne($),["enter"])},t[398]||(t[398]=[l("i",{class:"material-icons"},"delete",-1)]),40,lp)):fe("",!0)])):fe("",!0)]),e.colonnes[$].length>0?(T(),w("div",dp,[(T(!0),w(Qe,null,Je(e.colonnes[$],(_,C)=>(T(),w("div",{id:_.bloc,class:Ne(["bloc",{privee:_.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":_.couleur}),"data-bloc":_.bloc,onFocus:k=>e.definirBlocActif(_.bloc),key:"bloc_"+C},[Mi(E,{admin:e.admin,identifiant:e.identifiant,item:_,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:$,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","indexCol","tabindex","action"])],46,up))),128))])):fe("",!0),e.accesAutorise&&(e.admin||e.pad.contributions!=="fermees")?(T(),w("div",fp,[l("span",{role:"button",tabindex:e.definirTabIndex(),title:e.$t("ajouterCapsule"),onClick:_=>e.ouvrirModaleBloc("creation","",$),onKeydown:Q(_=>e.ouvrirModaleBloc("creation","",$),["enter"])},t[399]||(t[399]=[l("i",{class:"material-icons"},"add",-1)]),40,cp)])):fe("",!0)],10,tp)):fe("",!0)],64))),256)),e.admin?(T(),w("section",hp,[l("div",{class:"bloc haut ajouter-colonne",role:"button",tabindex:e.definirTabIndex(),onClick:t[157]||(t[157]=n=>e.ouvrirModaleColonne("creation","")),onKeydown:t[158]||(t[158]=Q(n=>e.ouvrirModaleColonne("creation",""),["enter"]))},[l("div",vp,[l("span",null,Z(e.$t("ajouterColonne")),1)])],40,mp)])):fe("",!0)])):e.pad.affichage==="colonnes"&&e.action!=="organiser"&&e.recherche?(T(),w("div",pp,[(T(!0),w(Qe,null,Je(e.pad.colonnes,(n,$)=>(T(),w(Qe,null,[e.blocsRecherche[$].length>0&&(!e.pad.hasOwnProperty("affichageColonnes")||e.admin||e.pad.hasOwnProperty("affichageColonnes")&&e.pad.affichageColonnes[$])?(T(),w("section",{id:"colonne"+$,class:Ne(["colonne",{masquee:e.admin&&e.pad.hasOwnProperty("affichageColonnes")&&!e.pad.affichageColonnes[$],large:e.pad.hasOwnProperty("largeur")&&e.pad.largeur==="large"}]),key:"colonne_"+$},[l("div",gp,[l("div",yp,[l("span",null,Z(n),1)])]),l("div",_p,[(T(!0),w(Qe,null,Je(e.blocsRecherche[$],(_,C)=>(T(),w("div",{id:_.bloc,class:Ne(["bloc",{privee:_.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":_.couleur}),"data-bloc":_.bloc,onFocus:k=>e.definirBlocActif(_.bloc),key:"bloc_"+C},[Mi(E,{admin:e.admin,identifiant:e.identifiant,item:_,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:$,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","indexCol","tabindex","action"])],46,Ep))),128))])],10,bp)):fe("",!0)],64))),256))])):(e.pad.affichage==="mur"||e.pad.affichage==="flux-vertical")&&e.action==="organiser"?(T(),Ei(F,{key:6,id:"blocs",class:Ne({mur:e.pad.affichage==="mur","flux-vertical":e.pad.affichage==="flux-vertical",large:e.pad.hasOwnProperty("largeur")&&e.pad.largeur==="large"}),modelValue:e.blocs,"onUpdate:modelValue":t[159]||(t[159]=n=>e.blocs=n),draggable:".bloc",sort:!0,animation:250,"swap-threshold":.5,"force-fallback":!0,"fallback-tolerance":10,"scroll-sensitivity":e.convertirRem(4),"scroll-speed":e.convertirRem(4),onStart:e.demarrerDeplacerBloc,onEnd:e.deplacerBloc},{default:$n(()=>[(T(!0),w(Qe,null,Je(e.blocs,(n,$)=>(T(),w("div",{id:n.bloc,class:Ne(["bloc",{privee:n.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":n.couleur}),"data-bloc":n.bloc,onFocus:_=>e.definirBlocActif(n.bloc),key:"bloc_"+$},[Mi(r,{admin:e.admin,identifiant:e.identifiant,item:n,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:0,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","tabindex","action"])],46,Cp))),128))]),_:1},8,["class","modelValue","scroll-sensitivity","scroll-speed","onStart","onEnd"])):e.pad.affichage==="colonnes"&&e.action==="organiser"?(T(),w("div",Tp,[(T(!0),w(Qe,null,Je(e.pad.colonnes,(n,$)=>(T(),w("section",{id:"colonne"+$,class:Ne(["colonne",{masquee:e.admin&&e.pad.hasOwnProperty("affichageColonnes")&&!e.pad.affichageColonnes[$],large:e.pad.hasOwnProperty("largeur")&&e.pad.largeur==="large"}]),key:"colonne_"+$},[l("div",Sp,[l("div",kp,[l("span",null,Z(n),1)]),e.admin&&e.pad.colonnes.length>1?(T(),w("div",Ap,[$>0?(T(),w("span",{key:0,class:"bouton gauche",role:"button",tabindex:e.definirTabIndex(),title:e.$t("deplacerGauche"),onClick:_=>e.deplacerColonne("gauche",$),onKeydown:Q(_=>e.deplacerColonne("gauche",$),["enter"])},t[400]||(t[400]=[l("i",{class:"material-icons"},"arrow_back",-1)]),40,Mp)):fe("",!0),$<e.pad.colonnes.length-1?(T(),w("span",{key:1,class:"bouton droite",role:"button",tabindex:e.definirTabIndex(),title:e.$t("deplacerDroite"),onClick:_=>e.deplacerColonne("droite",$),onKeydown:Q(_=>e.deplacerColonne("droite",$),["enter"])},t[401]||(t[401]=[l("i",{class:"material-icons"},"arrow_forward",-1)]),40,Ip)):fe("",!0)])):fe("",!0)]),Mi(F,{class:"conteneur-colonne ascenseur",modelValue:e.colonnes[$],"onUpdate:modelValue":_=>e.colonnes[$]=_,group:"colonne",draggable:".bloc",sort:!0,animation:250,"swap-threshold":.5,"force-fallback":!0,"fallback-tolerance":10,"scroll-sensitivity":e.convertirRem(4),"scroll-speed":e.convertirRem(4),"data-index":$,onStart:e.demarrerDeplacerBloc,onEnd:e.deplacerBloc},{default:$n(()=>[(T(!0),w(Qe,null,Je(e.colonnes[$],(_,C)=>(T(),w("div",{id:_.bloc,class:Ne(["bloc",{privee:_.visibilite==="privee"}]),tabindex:e.definirTabIndex(),style:rt({"border-color":_.couleur}),"data-bloc":_.bloc,onFocus:k=>e.definirBlocActif(_.bloc),key:"bloc_"+C},[Mi(r,{admin:e.admin,identifiant:e.identifiant,item:_,pad:e.pad,couleur:e.couleur,statut:e.statut,digidrive:e.digidrive,indexCol:$,tabindex:e.definirTabIndex(),action:e.action},null,8,["admin","identifiant","item","pad","couleur","statut","digidrive","indexCol","tabindex","action"])],46,Rp))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","scroll-sensitivity","scroll-speed","data-index","onStart","onEnd"])],10,wp))),128))])):fe("",!0)],6)):(T(),w("div",Bp)),Mi(Xl,{name:"fondu"},{default:$n(()=>[e.accesAutorise&&!e.recherche&&(e.pad.affichage==="mur"||e.pad.affichage==="flux-vertical")&&(e.admin&&e.action!=="organiser"||!e.admin&&e.pad.contributions!=="fermees")?(T(),w("span",{key:0,id:"ajouter",role:"button",tabindex:e.definirTabIndex(),title:e.$t("ajouterCapsule"),onClick:t[160]||(t[160]=n=>e.ouvrirModaleBloc("creation","",0)),onKeydown:t[161]||(t[161]=Q(n=>e.ouvrirModaleBloc("creation","",0),["enter"]))},t[402]||(t[402]=[l("i",{class:"material-icons"},"add",-1)]),40,$p)):fe("",!0)]),_:1}),e.modale==="colonne"?(T(),w("div",Dp,[l("div",Lp,[l("div",Op,[l("span",Np,Z(e.titreModaleColonne),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[162]||(t[162]=(...n)=>e.fermerModaleColonne&&e.fermerModaleColonne(...n)),onKeydown:t[163]||(t[163]=Q((...n)=>e.fermerModaleColonne&&e.fermerModaleColonne(...n),["enter"]))},t[403]||(t[403]=[l("i",{class:"material-icons"},"close",-1)]),40,Pp)]),l("div",Fp,[l("div",Vp,[l("label",Hp,Z(e.$t("nomColonne")),1),e.modeColonne==="creation"?(T(),w("input",{key:0,id:"champ-nom-colonne",type:"text",maxlength:"96",value:e.titreColonne,onInput:t[164]||(t[164]=n=>e.titreColonne=n.target.value),onKeydown:t[165]||(t[165]=Q((...n)=>e.ajouterColonne&&e.ajouterColonne(...n),["enter"]))},null,40,qp)):(T(),w("input",{key:1,id:"champ-nom-colonne",type:"text",maxlength:"96",value:e.titreColonne,onInput:t[166]||(t[166]=n=>e.titreColonne=n.target.value),onKeydown:t[167]||(t[167]=Q((...n)=>e.modifierColonne&&e.modifierColonne(...n),["enter"]))},null,40,Kp)),l("div",jp,[e.modeColonne==="creation"?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[168]||(t[168]=(...n)=>e.ajouterColonne&&e.ajouterColonne(...n)),onKeydown:t[169]||(t[169]=Q((...n)=>e.ajouterColonne&&e.ajouterColonne(...n),["enter"]))},Z(e.$t("valider")),41,Xp)):(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[170]||(t[170]=(...n)=>e.modifierColonne&&e.modifierColonne(...n)),onKeydown:t[171]||(t[171]=Q((...n)=>e.modifierColonne&&e.modifierColonne(...n),["enter"]))},Z(e.$t("valider")),41,Up))])])])])])):e.modale==="bloc"?(T(),w("div",zp,[l("div",Yp,[l("div",Gp,[l("span",xp,Z(e.titreModale),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[172]||(t[172]=(...n)=>e.fermerModaleBloc&&e.fermerModaleBloc(...n)),onKeydown:t[173]||(t[173]=Q((...n)=>e.fermerModaleBloc&&e.fermerModaleBloc(...n),["enter"]))},t[404]||(t[404]=[l("i",{class:"material-icons"},"close",-1)]),40,Wp)]),l("div",Qp,[l("div",Zp,[e.admin?(T(),w("div",Jp,[l("span",null,Z(e.$t("capsulePrivee")),1),e.mode==="edition"&&e.visibiliteInitiale==="privee"?(T(),w("label",{key:0,class:"bouton-interrupteur",tabindex:e.definirTabIndexModale()},[l("input",{id:"visibilite-capsule",type:"checkbox",checked:e.visibilite,disabled:""},null,8,t3),t[405]||(t[405]=l("span",{class:"barre desactive"},null,-1))],8,e3)):(T(),w("label",{key:1,class:"bouton-interrupteur",tabindex:e.definirTabIndexModale(),onKeydown:t[175]||(t[175]=Q(n=>e.activerInput("visibilite-capsule"),["enter"]))},[l("input",{id:"visibilite-capsule",type:"checkbox",checked:e.visibilite,onChange:t[174]||(t[174]=(...n)=>e.modifierVisibiliteCapsule&&e.modifierVisibiliteCapsule(...n))},null,40,n3),t[406]||(t[406]=l("span",{class:"barre"},null,-1))],40,i3))])):fe("",!0),l("label",a3,Z(e.$t("titre")),1),l("input",{id:"champ-titre",type:"text",maxlength:"96",placeholder:e.$t("ajouterTitre"),value:e.titre,onInput:t[176]||(t[176]=n=>e.titre=n.target.value)},null,40,s3),l("label",null,Z(e.$t("texte")),1),l("div",{id:"texte",class:Ne({mobile:e.mobile===!0})},null,2),e.media===""&&!e.chargementLien&&!e.enregistrement&&e.pad.fichiers==="actives"?(T(),w("div",o3,[e.progressionFichier===0?(T(),w("label",{key:0,for:"televerser-fichier",class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onKeydown:t[177]||(t[177]=Q(n=>e.activerInput("televerser-fichier"),["enter"]))},Z(e.$t("ajouterFichier")),41,r3)):fe("",!0),l("input",{id:"televerser-fichier",type:"file",style:{display:"none"},accept:e.fichiersAutorises,onChange:t[178]||(t[178]=n=>e.ajouterFichier(n.target))},null,40,l3),e.progressionFichier>0?(T(),w("div",d3,[l("progress",{class:"barre-progression",max:"100",value:e.progressionFichier},null,8,u3),t[407]||(t[407]=l("div",{class:"chargement"},null,-1))])):fe("",!0)])):fe("",!0),e.media===""&&e.progressionFichier===0&&!e.chargementLien&&!e.enregistrement&&e.pad.fichiers==="actives"&&e.pad.enregistrements==="actives"?(T(),w("div",f3,[l("span",null,Z(e.$t("ou")),1)])):fe("",!0),e.media===""&&e.progressionFichier===0&&!e.chargementLien&&e.pad.enregistrements==="actives"?(T(),w("div",c3,[e.enregistrement?(T(),w("div",m3,[t[410]||(t[410]=l("canvas",{id:"visualisation",width:"360",height:"60"},null,-1)),l("div",v3,[l("span",{class:"bouton stopper",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[181]||(t[181]=(...n)=>e.arreterEnregistrementAudio&&e.arreterEnregistrementAudio(...n)),onKeydown:t[182]||(t[182]=Q((...n)=>e.arreterEnregistrementAudio&&e.arreterEnregistrementAudio(...n),["enter"]))},t[409]||(t[409]=[l("i",{class:"material-icons"},"stop",-1)]),40,p3),l("span",b3,Z(e.dureeEnregistrement),1)])])):(T(),w("span",{key:0,id:"enregistrer",class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[179]||(t[179]=(...n)=>e.enregistrerAudio&&e.enregistrerAudio(...n)),onKeydown:t[180]||(t[180]=Q((...n)=>e.enregistrerAudio&&e.enregistrerAudio(...n),["enter"]))},[t[408]||(t[408]=l("i",{class:"material-icons"},"fiber_manual_record",-1)),l("span",null,Z(e.$t("enregistrerAudio")),1)],40,h3))])):fe("",!0),e.media===""&&e.progressionFichier===0&&!e.chargementLien&&!e.enregistrement&&(e.pad.fichiers==="actives"||e.pad.enregistrements==="actives")&&e.pad.liens==="actives"?(T(),w("div",g3,[l("span",null,Z(e.$t("ou")),1)])):fe("",!0),e.media===""&&e.progressionFichier===0&&!e.enregistrement&&e.pad.liens==="actives"?(T(),w("div",y3,[e.chargementLien?fe("",!0):(T(),w("input",{key:0,type:"text",value:e.lien,onInput:t[183]||(t[183]=n=>e.lien=n.target.value),placeholder:e.$t("ajouterLien"),onKeydown:t[184]||(t[184]=Q((...n)=>e.ajouterLien&&e.ajouterLien(...n),["enter"]))},null,40,_3)),e.chargementLien?(T(),w("div",C3,t[412]||(t[412]=[l("div",{class:"chargement"},null,-1)]))):(T(),w("span",{key:1,class:"bouton rechercher",role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("valider"),onClick:t[185]||(t[185]=(...n)=>e.ajouterLien&&e.ajouterLien(...n)),onKeydown:t[186]||(t[186]=Q((...n)=>e.ajouterLien&&e.ajouterLien(...n),["enter"]))},t[411]||(t[411]=[l("i",{class:"material-icons"},"search",-1)]),40,E3))])):fe("",!0),e.media===""&&e.progressionFichier===0&&!e.chargementLien&&!e.enregistrement&&(e.pad.fichiers==="actives"||e.pad.liens==="actives"||e.pad.enregistrements==="actives")&&e.pad.documents==="actives"?(T(),w("div",T3,[l("span",null,Z(e.$t("ou")),1)])):fe("",!0),e.media===""&&e.progressionFichier===0&&!e.chargementLien&&!e.enregistrement&&e.pad.documents==="actives"?(T(),w("div",w3,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[187]||(t[187]=(...n)=>e.ajouterDocument&&e.ajouterDocument(...n)),onKeydown:t[188]||(t[188]=Q((...n)=>e.ajouterDocument&&e.ajouterDocument(...n),["enter"]))},Z(e.$t("creerDocCollaboratif")),41,S3)])):fe("",!0),e.media!==""&&e.source!=="etherpad"?(T(),w("label",k3,Z(e.$t("media")),1)):e.media!==""?(T(),w("label",A3,Z(e.$t("documentCollaboratif")),1)):fe("",!0),e.media!==""&&e.iframe!==""?(T(),w("div",M3,[l("div",{id:"iframe",class:Ne({youtube:e.source==="YouTube"||e.source==="Vimeo"||e.source==="Dailymotion"})},[e.verifierURL(e.iframe)===!0?(T(),w("iframe",{key:0,src:e.iframe,allow:"autoplay; fullscreen"},null,8,I3)):(T(),w("div",{key:1,class:"html",innerHTML:e.iframe},null,8,R3))],2),l("div",B3,[l("span",{class:"bouton supprimer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[189]||(t[189]=(...n)=>e.supprimerLien&&e.supprimerLien(...n)),onKeydown:t[190]||(t[190]=Q((...n)=>e.supprimerLien&&e.supprimerLien(...n),["enter"]))},Z(e.$t("supprimer")),41,$3),e.lien!==""?(T(),w("span",{key:0,class:"bouton convertir",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[191]||(t[191]=(...n)=>e.convertirEnLien&&e.convertirEnLien(...n)),onKeydown:t[192]||(t[192]=Q((...n)=>e.convertirEnLien&&e.convertirEnLien(...n),["enter"]))},Z(e.$t("convertirEnLien")),41,D3)):fe("",!0),e.lien!==""?(T(),w("span",L3,[t[413]||(t[413]=l("i",{class:"material-icons"},"info",-1)),l("span",{innerHTML:e.$t("infoErreurLien")},null,8,O3)])):fe("",!0)])])):e.media!==""?(T(),w("div",N3,[e.chargementMedia?(T(),w("div",P3,t[414]||(t[414]=[l("div",{class:"chargement"},null,-1)]))):fe("",!0),e.type==="image"?Ii((T(),w("img",{key:1,id:"image",src:e.definirLienFichier(e.pad.id,e.media),alt:e.definirLienFichier(e.pad.id,e.media)},null,8,F3)),[[Ri,!e.chargementMedia]]):e.type==="lien-image"?Ii((T(),w("img",{key:2,id:"image",src:e.media,alt:e.media},null,8,V3)),[[Ri,!e.chargementMedia]]):e.type==="enregistrement"?Ii((T(),w("audio",{key:3,id:"audio",controls:"",src:e.media},null,8,H3)),[[Ri,!e.chargementMedia]]):e.type==="audio"?Ii((T(),w("audio",{key:4,id:"audio",controls:"",src:e.definirLienFichier(e.pad.id,e.media)},null,8,q3)),[[Ri,!e.chargementMedia]]):e.type==="video"?Ii((T(),w("video",{key:5,id:"video",controls:"",playsinline:"",crossOrigin:"anonymous",src:e.definirLienFichier(e.pad.id,e.media)},null,8,K3)),[[Ri,!e.chargementMedia]]):e.type==="pdf"?Ii((T(),w("iframe",{key:6,id:"document",src:"/pdfjs/web/viewer.html?file="+e.hote+e.definirLienFichier(e.pad.id,e.media),allowfullscreen:""},null,8,j3)),[[Ri,!e.chargementMedia]]):e.type==="office"||e.type==="document"?Ii((T(),w("iframe",{key:7,id:"document",src:"https://view.officeapps.live.com/op/embed.aspx?src="+e.hote+e.definirLienFichier(e.pad.id,e.media),allowfullscreen:""},null,8,X3)),[[Ri,!e.chargementMedia]]):e.type==="lien"?Ii((T(),w("a",{key:8,id:"lien",href:e.media,target:"_blank"},[l("span",z3,Z(e.$t("lienExterne")),1),l("span",Y3,Z(e.definirNomFichier(e.media)),1),t[415]||(t[415]=l("span",{class:"icone"},[l("i",{class:"material-icons"},"link")],-1))],8,U3)),[[Ri,!e.chargementMedia]]):Ii((T(),w("a",{key:9,id:"fichier",href:e.definirLienFichier(e.pad.id,e.media),download:""},[l("span",x3,Z(e.definirExtensionFichier(e.media)),1),l("span",W3,Z(e.definirNomFichier(e.media)),1),t[416]||(t[416]=l("span",{class:"icone"},[l("i",{class:"material-icons"},"attachment")],-1))],8,G3)),[[Ri,!e.chargementMedia]]),l("div",Q3,[e.chargementMedia?fe("",!0):(T(),w("span",{key:0,class:"bouton supprimer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[193]||(t[193]=(...n)=>e.supprimerFichier&&e.supprimerFichier(...n)),onKeydown:t[194]||(t[194]=Q((...n)=>e.supprimerFichier&&e.supprimerFichier(...n),["enter"]))},Z(e.$t("supprimer")),41,Z3))])])):fe("",!0),e.pad.liens==="actives"&&!e.chargementLien&&Object.keys(e.resultats).length>0&&e.media===""?(T(),w("div",J3,[l("div",eb,[(T(!0),w(Qe,null,Je(e.resultats.hits,(n,$)=>(T(),w("div",{class:"item",role:"button",tabindex:e.definirTabIndexModale(),"data-w":n.previewWidth,"data-h":n.previewHeight,onClick:_=>e.selectionnerImage(n.previewURL.replace("_150","_1280")),onKeydown:Q(_=>e.selectionnerImage(n.previewURL.replace("_150","_1280")),["enter"]),key:"image_"+$},[l("img",{src:n.previewURL,alt:n.previewURL},null,8,ib)],40,tb))),128))]),e.page>1||e.page<e.resultats.total/16?(T(),w("div",nb,[l("span",{role:"button",tabindex:e.definirTabIndexModale(),class:Ne({invisible:e.page<2}),onClick:t[195]||(t[195]=n=>e.modifierPage("precedente")),onKeydown:t[196]||(t[196]=Q(n=>e.modifierPage("precedente"),["enter"]))},Z(e.$t("pagePrecedente")),43,ab),l("span",{role:"button",tabindex:e.definirTabIndexModale(),class:Ne({invisible:e.page>=e.resultats.total/16}),onClick:t[197]||(t[197]=n=>e.modifierPage("suivante")),onKeydown:t[198]||(t[198]=Q(n=>e.modifierPage("suivante"),["enter"]))},Z(e.$t("pageSuivante")),43,sb)])):fe("",!0)])):fe("",!0),e.type!=="image"&&e.type!=="lien-image"&&e.media!==""?(T(),w("label",ob,Z(e.$t("vignette")),1)):fe("",!0),e.progressionVignette===0&&e.type!=="image"&&e.type!=="lien-image"&&e.media!==""?(T(),w("div",rb,[e.chargementVignette?(T(),w("div",db,t[417]||(t[417]=[l("div",{class:"chargement"},null,-1)]))):(T(),w("img",{key:0,src:e.vignette,alt:e.vignette},null,8,lb))])):fe("",!0),e.type!=="image"&&e.type!=="lien-image"&&e.media!==""?(T(),w("div",ub,[e.progressionVignette===0?(T(),w("label",{key:0,for:"televerser-vignette",class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onKeydown:t[199]||(t[199]=Q(n=>e.activerInput("televerser-vignette"),["enter"]))},Z(e.$t("modifierVignette")),41,fb)):fe("",!0),e.progressionVignette===0&&e.vignetteDefaut!==""&&e.vignette!==e.vignetteDefaut?(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[200]||(t[200]=(...n)=>e.remettreVignetteDefaut&&e.remettreVignetteDefaut(...n))},Z(e.$t("remettreVignette")),9,cb)):fe("",!0),l("input",{id:"televerser-vignette",type:"file",style:{display:"none"},accept:".jpg, .jpeg, .png, .gif",onChange:t[201]||(t[201]=(...n)=>e.ajouterVignette&&e.ajouterVignette(...n))},null,32),e.progressionVignette>0?(T(),w("div",hb,[l("progress",{class:"barre-progression",max:"100",value:e.progressionVignette},null,8,mb),t[418]||(t[418]=l("div",{class:"chargement"},null,-1))])):fe("",!0)])):fe("",!0),e.mode==="creation"?(T(),w("div",{key:16,class:Ne(["valider",{desactive:e.titre===""&&e.texte===""&&e.media===""||e.enregistrement}]),role:"button",tabindex:e.definirTabIndexModale(),onClick:t[202]||(t[202]=(...n)=>e.ajouterBloc&&e.ajouterBloc(...n)),onKeydown:t[203]||(t[203]=Q((...n)=>e.ajouterBloc&&e.ajouterBloc(...n),["enter"]))},Z(e.$t("valider")),43,vb)):e.mode==="edition"?(T(),w("div",{key:17,class:Ne(["valider",{desactive:e.titre===""&&e.texte===""&&e.media===""||e.enregistrement}]),role:"button",tabindex:e.definirTabIndexModale(),onClick:t[204]||(t[204]=(...n)=>e.modifierBloc&&e.modifierBloc(...n)),onKeydown:t[205]||(t[205]=Q((...n)=>e.modifierBloc&&e.modifierBloc(...n),["enter"]))},Z(e.$t("valider")),43,pb)):fe("",!0)])])])])):e.modale==="admins"?(T(),w("div",bb,[l("div",gb,[l("div",yb,[l("span",_b,Z(e.$t("adminsPad")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[206]||(t[206]=(...n)=>e.fermerModaleAdmins&&e.fermerModaleAdmins(...n)),onKeydown:t[207]||(t[207]=Q((...n)=>e.fermerModaleAdmins&&e.fermerModaleAdmins(...n),["enter"]))},t[419]||(t[419]=[l("i",{class:"material-icons"},"close",-1)]),40,Eb)]),l("div",Cb,[l("div",Tb,[l("label",null,Z(e.$t("listeAdmins")),1),e.admins.length>0?(T(),w("div",wb,[(T(!0),w(Qe,null,Je(e.admins,(n,$)=>(T(),w("div",Sb,[l("span",kb,Z(n),1),l("span",{class:"supprimer",role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("supprimerAdmin"),onClick:t[208]||(t[208]=(..._)=>e.supprimerAdmin&&e.supprimerAdmin(..._)),onKeydown:t[209]||(t[209]=Q((..._)=>e.supprimerAdmin&&e.supprimerAdmin(..._),["enter"]))},t[420]||(t[420]=[l("i",{class:"material-icons"},"close",-1)]),40,Ab)]))),256))])):(T(),w("p",Mb,Z(e.$t("aucunAdmin")),1)),l("div",Ib,[l("input",{type:"text",placeholder:e.$t("identifiantAdmin"),onKeydown:t[210]||(t[210]=Q((...n)=>e.ajouterAdmin&&e.ajouterAdmin(...n),["enter"]))},null,40,Rb),l("span",{class:"icone",role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("ajouterAdmin"),onClick:t[211]||(t[211]=(...n)=>e.ajouterAdmin&&e.ajouterAdmin(...n)),onKeydown:t[212]||(t[212]=Q((...n)=>e.ajouterAdmin&&e.ajouterAdmin(...n),["enter"]))},t[421]||(t[421]=[l("i",{class:"material-icons"},"person_add",-1)]),40,Bb)]),l("div",$b,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[213]||(t[213]=(...n)=>e.modifierAdmins&&e.modifierAdmins(...n)),onKeydown:t[214]||(t[214]=Q((...n)=>e.modifierAdmins&&e.modifierAdmins(...n),["enter"]))},Z(e.$t("valider")),41,Db)])])])])])):e.modale==="commentaires"?(T(),w("div",Lb,[l("div",Ob,[l("div",Nb,[l("span",Pb,Z(e.$t("commentairesCapsule")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[215]||(t[215]=(...n)=>e.fermerModaleCommentaires&&e.fermerModaleCommentaires(...n)),onKeydown:t[216]||(t[216]=Q((...n)=>e.fermerModaleCommentaires&&e.fermerModaleCommentaires(...n),["enter"]))},t[422]||(t[422]=[l("i",{class:"material-icons"},"close",-1)]),40,Fb)]),l("ul",Vb,[(T(!0),w(Qe,null,Je(e.commentaires,(n,$)=>(T(),w("li",{id:"commentaire-"+n.id,tabindex:e.definirTabIndexModale(),class:Ne({edition:e.editionCommentaire&&e.commentaireId===n.id,focus:e.focusId===n.id}),onFocus:_=>e.focusId=n.id,key:"commentaire_"+$},[l("span",{class:Ne(["meta",{auteur:n.identifiant===e.identifiant||e.admin}])},Z(e.$t("par"))+" "+Z(e.definirNom(n))+", "+Z(e.$formaterDateRelative(n.date,e.langue)),3),n.identifiant===e.identifiant||e.admin?(T(),w("div",qb,[e.commentaireId!==n.id?(T(),w("span",{key:0,role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("modifierCommentaire"),onClick:_=>e.afficherModifierCommentaire(n.id,n.texte),onKeydown:Q(_=>e.afficherModifierCommentaire(n.id,n.texte),["enter"])},t[423]||(t[423]=[l("i",{class:"material-icons"},"edit",-1)]),40,Kb)):e.editionCommentaire&&e.commentaireId===n.id?(T(),w("span",{key:1,role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("annuler"),onClick:t[217]||(t[217]=(..._)=>e.annulerModifierCommentaire&&e.annulerModifierCommentaire(..._)),onKeydown:t[218]||(t[218]=Q((..._)=>e.annulerModifierCommentaire&&e.annulerModifierCommentaire(..._),["enter"]))},t[424]||(t[424]=[l("i",{class:"material-icons"},"close",-1)]),40,jb)):fe("",!0),l("span",{role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("supprimerCommentaire"),onClick:_=>e.afficherSupprimerCommentaire(n.id),onKeydown:Q(_=>e.afficherSupprimerCommentaire(n.id),["enter"])},t[425]||(t[425]=[l("i",{class:"material-icons"},"delete",-1)]),40,Xb)])):fe("",!0),e.commentaireId!==n.id||e.commentaireId===n.id&&e.modaleConfirmer?(T(),w("div",{key:1,class:"texte",innerHTML:n.texte},null,8,Ub)):e.editionCommentaire&&e.commentaireId===n.id?(T(),w("div",zb,[l("div",{id:"commentaire-modifie",class:Ne({mobile:e.mobile===!0})},null,2),l("button",{tabindex:e.definirTabIndexModale(),title:e.$t("publier"),onClick:t[219]||(t[219]=(..._)=>e.modifierCommentaire&&e.modifierCommentaire(..._))},t[426]||(t[426]=[l("i",{class:"material-icons"},"edit",-1)]),8,Yb),e.emojis==="commentaire-modifie"?(T(),Ei(b,{key:0,type:e.emojis,diaporama:e.modaleDiaporama,tabindex:e.definirTabIndexModale(),onEmoji:e.insererEmoji},null,8,["type","diaporama","tabindex","onEmoji"])):fe("",!0)])):fe("",!0)],42,Hb))),128)),e.commentaires.length===0?(T(),w("li",Gb,Z(e.$t("aucunCommentaire")),1)):fe("",!0)]),l("div",xb,[l("div",{id:"commentaire",class:Ne({mobile:e.mobile===!0})},null,2),l("button",{tabindex:e.definirTabIndexModale(),title:e.$t("publier"),onClick:t[220]||(t[220]=(...n)=>e.envoyerCommentaire&&e.envoyerCommentaire(...n))},t[427]||(t[427]=[l("i",{class:"material-icons"},"send",-1)]),8,Wb),e.emojis==="commentaire"?(T(),Ei(b,{key:0,type:e.emojis,diaporama:e.modaleDiaporama,tabindex:e.definirTabIndexModale(),onEmoji:e.insererEmoji},null,8,["type","diaporama","tabindex","onEmoji"])):fe("",!0)])])])):e.modale==="evaluations"?(T(),w("div",Qb,[l("div",Zb,[l("div",Jb,[l("span",e4,Z(e.$t("evaluerCapsule")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[221]||(t[221]=(...n)=>e.fermerModaleEvaluations&&e.fermerModaleEvaluations(...n)),onKeydown:t[222]||(t[222]=Q((...n)=>e.fermerModaleEvaluations&&e.fermerModaleEvaluations(...n),["enter"]))},t[428]||(t[428]=[l("i",{class:"material-icons"},"close",-1)]),40,t4)]),l("div",i4,[l("div",n4,[l("label",null,Z(e.$t("monEvaluation")),1),l("div",a4,[e.evaluation===0?(T(),w("span",s4,[l("i",{class:"material-icons",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[223]||(t[223]=n=>e.evaluation=1),onKeydown:t[224]||(t[224]=Q(n=>e.evaluation=1,["enter"]))},"star_outline",40,o4),l("i",{class:"material-icons",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[225]||(t[225]=n=>e.evaluation=2),onKeydown:t[226]||(t[226]=Q(n=>e.evaluation=2,["enter"]))},"star_outline",40,r4),l("i",{class:"material-icons",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[227]||(t[227]=n=>e.evaluation=3),onKeydown:t[228]||(t[228]=Q(n=>e.evaluation=3,["enter"]))},"star_outline",40,l4),l("i",{class:"material-icons",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[229]||(t[229]=n=>e.evaluation=4),onKeydown:t[230]||(t[230]=Q(n=>e.evaluation=4,["enter"]))},"star_outline",40,d4),l("i",{class:"material-icons",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[231]||(t[231]=n=>e.evaluation=5),onKeydown:t[232]||(t[232]=Q(n=>e.evaluation=5,["enter"]))},"star_outline",40,u4)])):(T(),w("span",f4,[(T(!0),w(Qe,null,Je(e.evaluation,n=>(T(),w("i",{class:"material-icons selectionne",role:"button",tabindex:e.definirTabIndexModale(),onClick:$=>e.evaluation=n,onKeydown:Q($=>e.evaluation=n,["enter"]),key:"etoilepleine_"+n},"star",40,c4))),128)),(T(!0),w(Qe,null,Je(5-e.evaluation,n=>(T(),w("i",{class:"material-icons",role:"button",tabindex:e.definirTabIndexModale(),onClick:$=>e.evaluation=e.evaluation+n,onKeydown:Q($=>e.evaluation=e.evaluation+n,["enter"]),key:"etoilevide_"+n},"star_outline",40,h4))),128))])),e.evaluation>0?(T(),w("i",{key:2,class:"material-icons annuler",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[233]||(t[233]=n=>e.evaluation=0),onKeydown:t[234]||(t[234]=Q(n=>e.evaluation=0,["enter"]))},"delete_forever",40,m4)):fe("",!0)]),l("div",v4,[e.evaluations.map(function(n){return n.identifiant}).indexOf(e.identifiant)===-1?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[235]||(t[235]=(...n)=>e.envoyerEvaluation&&e.envoyerEvaluation(...n)),onKeydown:t[236]||(t[236]=Q((...n)=>e.envoyerEvaluation&&e.envoyerEvaluation(...n),["enter"]))},Z(e.$t("valider")),41,p4)):(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[237]||(t[237]=(...n)=>e.modifierEvaluation&&e.modifierEvaluation(...n)),onKeydown:t[238]||(t[238]=Q((...n)=>e.modifierEvaluation&&e.modifierEvaluation(...n),["enter"]))},Z(e.$t("modifier")),41,b4))])])])])])):e.modale==="modifier-nom"?(T(),w("div",g4,[l("div",y4,[l("div",_4,[l("span",E4,Z(e.$t("modifierNom")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[239]||(t[239]=(...n)=>e.fermerModaleModifierNom&&e.fermerModaleModifierNom(...n)),onKeydown:t[240]||(t[240]=Q((...n)=>e.fermerModaleModifierNom&&e.fermerModaleModifierNom(...n),["enter"]))},t[429]||(t[429]=[l("i",{class:"material-icons"},"close",-1)]),40,C4)]),l("div",T4,[l("div",w4,[l("label",S4,Z(e.$t("votreNom")),1),l("input",{id:"champ-nom",type:"text",maxlength:"48",value:e.nomUtilisateur,onInput:t[241]||(t[241]=n=>e.nomUtilisateur=n.target.value),onKeydown:t[242]||(t[242]=Q((...n)=>e.modifierNom&&e.modifierNom(...n),["enter"]))},null,40,k4),l("div",A4,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[243]||(t[243]=(...n)=>e.modifierNom&&e.modifierNom(...n)),onKeydown:t[244]||(t[244]=Q((...n)=>e.modifierNom&&e.modifierNom(...n),["enter"]))},Z(e.$t("valider")),41,M4)])])])])])):e.modale==="mot-de-passe"||e.modale==="code-acces"?(T(),w("div",I4,[e.modale==="mot-de-passe"?(T(),w("div",R4,[l("div",B4,[l("span",$4,Z(e.$t("motDePassePad")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[245]||(t[245]=(...n)=>e.fermerModaleMotDePasse&&e.fermerModaleMotDePasse(...n)),onKeydown:t[246]||(t[246]=Q((...n)=>e.fermerModaleMotDePasse&&e.fermerModaleMotDePasse(...n),["enter"]))},t[430]||(t[430]=[l("i",{class:"material-icons"},"close",-1)]),40,D4)]),l("div",L4,[l("div",O4,[l("label",N4,Z(e.$t("motDePasse")),1),l("div",P4,[e.codeVisible?(T(),w("input",{key:0,id:"champ-motdepasse",type:"text",maxlength:"48",value:e.motDePasse,onInput:t[247]||(t[247]=n=>e.motDePasse=n.target.value),onKeydown:t[248]||(t[248]=Q((...n)=>e.verifierMotDePasse&&e.verifierMotDePasse(...n),["enter"]))},null,40,F4)):(T(),w("input",{key:1,id:"champ-motdepasse",type:"password",maxlength:"48",value:e.motDePasse,onInput:t[249]||(t[249]=n=>e.motDePasse=n.target.value),onKeydown:t[250]||(t[250]=Q((...n)=>e.verifierMotDePasse&&e.verifierMotDePasse(...n),["enter"]))},null,40,V4)),e.codeVisible?(T(),w("span",{key:2,class:"icone",role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("masquerMotDePasse"),onClick:t[251]||(t[251]=(...n)=>e.masquerCodeAcces&&e.masquerCodeAcces(...n)),onKeydown:t[252]||(t[252]=Q((...n)=>e.masquerCodeAcces&&e.masquerCodeAcces(...n),["enter"]))},t[431]||(t[431]=[l("i",{class:"material-icons"},"visibility_off",-1)]),40,H4)):(T(),w("span",{key:3,class:"icone",role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("afficherMotDePasse"),onClick:t[253]||(t[253]=(...n)=>e.afficherCodeAcces&&e.afficherCodeAcces(...n)),onKeydown:t[254]||(t[254]=Q((...n)=>e.afficherCodeAcces&&e.afficherCodeAcces(...n),["enter"]))},t[432]||(t[432]=[l("i",{class:"material-icons"},"visibility",-1)]),40,q4))]),l("div",K4,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[255]||(t[255]=(...n)=>e.verifierMotDePasse&&e.verifierMotDePasse(...n)),onKeydown:t[256]||(t[256]=Q((...n)=>e.verifierMotDePasse&&e.verifierMotDePasse(...n),["enter"]))},Z(e.$t("valider")),41,j4)])])])])):e.modale==="code-acces"?(T(),w("div",X4,[l("div",U4,[l("span",z4,Z(e.$t("padProtegeCodeAcces")),1)]),l("div",Y4,[l("div",G4,[l("label",x4,Z(e.$t("codeAcces")),1),l("div",W4,[e.codeVisible?(T(),w("input",{key:0,id:"champ-code",type:"text",maxlength:"18",value:e.codeAcces,onInput:t[257]||(t[257]=n=>e.codeAcces=n.target.value),onKeydown:t[258]||(t[258]=Q((...n)=>e.verifierCodeAcces&&e.verifierCodeAcces(...n),["enter"]))},null,40,Q4)):(T(),w("input",{key:1,id:"champ-code",type:"password",maxlength:"18",value:e.codeAcces,onInput:t[259]||(t[259]=n=>e.codeAcces=n.target.value),onKeydown:t[260]||(t[260]=Q((...n)=>e.verifierCodeAcces&&e.verifierCodeAcces(...n),["enter"]))},null,40,Z4)),e.codeVisible?(T(),w("span",{key:2,class:"icone",role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("masquerCode"),onClick:t[261]||(t[261]=(...n)=>e.masquerCodeAcces&&e.masquerCodeAcces(...n)),onKeydown:t[262]||(t[262]=Q((...n)=>e.masquerCodeAcces&&e.masquerCodeAcces(...n),["enter"]))},t[433]||(t[433]=[l("i",{class:"material-icons"},"visibility_off",-1)]),40,J4)):(T(),w("span",{key:3,class:"icone",role:"button",tabindex:e.definirTabIndexModale(),title:e.$t("afficherCode"),onClick:t[263]||(t[263]=(...n)=>e.afficherCodeAcces&&e.afficherCodeAcces(...n)),onKeydown:t[264]||(t[264]=Q((...n)=>e.afficherCodeAcces&&e.afficherCodeAcces(...n),["enter"]))},t[434]||(t[434]=[l("i",{class:"material-icons"},"visibility",-1)]),40,e5))]),l("div",t5,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[265]||(t[265]=(...n)=>e.verifierCodeAcces&&e.verifierCodeAcces(...n)),onKeydown:t[266]||(t[266]=Q((...n)=>e.verifierCodeAcces&&e.verifierCodeAcces(...n),["enter"]))},Z(e.$t("valider")),41,i5)]),e.pad.hasOwnProperty("motdepasse")?(T(),w("div",{key:0,class:"connexion",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[267]||(t[267]=(...n)=>e.afficherModaleMotDePasse&&e.afficherModaleMotDePasse(...n)),onKeydown:t[268]||(t[268]=Q((...n)=>e.afficherModaleMotDePasse&&e.afficherModaleMotDePasse(...n),["enter"])),innerHTML:e.$t("proprietairePad")},null,40,n5)):fe("",!0)])])])):fe("",!0)])):e.modale==="modifier-mot-de-passe"?(T(),w("div",a5,[l("div",s5,[l("div",o5,[l("span",r5,Z(e.$t("modifierMotDePassePad")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[269]||(t[269]=(...n)=>e.fermerModaleModifierMotDePasse&&e.fermerModaleModifierMotDePasse(...n)),onKeydown:t[270]||(t[270]=Q((...n)=>e.fermerModaleModifierMotDePasse&&e.fermerModaleModifierMotDePasse(...n),["enter"]))},t[435]||(t[435]=[l("i",{class:"material-icons"},"close",-1)]),40,l5)]),l("div",d5,[l("div",u5,[l("label",f5,Z(e.$t("motDePasseActuel")),1),l("input",{id:"champ-motdepasse-actuel",type:"text",maxlength:"48",value:e.motDePasse,onInput:t[271]||(t[271]=n=>e.motDePasse=n.target.value)},null,40,c5),l("label",h5,Z(e.$t("nouveauMotDePasse")),1),l("input",{id:"champ-nouveau-motdepasse",type:"text",maxlength:"48",value:e.nouveauMotDePasse,onInput:t[272]||(t[272]=n=>e.nouveauMotDePasse=n.target.value),onKeydown:t[273]||(t[273]=Q((...n)=>e.modifierMotDePasse&&e.modifierMotDePasse(...n),["enter"]))},null,40,m5),l("div",v5,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[274]||(t[274]=(...n)=>e.modifierMotDePasse&&e.modifierMotDePasse(...n)),onKeydown:t[275]||(t[275]=Q((...n)=>e.modifierMotDePasse&&e.modifierMotDePasse(...n),["enter"]))},Z(e.$t("modifier")),41,p5)])])])])])):e.modale==="copier-bloc"?(T(),w("div",b5,[l("div",g5,[l("div",y5,[l("span",_5,Z(e.$t("copierCapsule")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[276]||(t[276]=(...n)=>e.fermerModaleCopieBloc&&e.fermerModaleCopieBloc(...n)),onKeydown:t[277]||(t[277]=Q((...n)=>e.fermerModaleCopieBloc&&e.fermerModaleCopieBloc(...n),["enter"]))},t[436]||(t[436]=[l("i",{class:"material-icons"},"close",-1)]),40,E5)]),l("div",C5,[l("div",T5,[l("label",null,Z(e.$t("capsuleACopier"))+" "+Z(e.titre),1),l("label",w5,Z(e.$t("padDestination")),1),e.donneesUtilisateur.padsCrees.length>0||e.donneesUtilisateur.padsAdmins.length>0?(T(),w("select",{key:0,id:"pad-destination",onChange:t[278]||(t[278]=n=>e.padDestination=n.target.value)},[t[437]||(t[437]=l("option",{value:""},"-",-1)),(T(!0),w(Qe,null,Je(e.donneesUtilisateur.padsCrees,(n,$)=>(T(),w("option",{value:n.id,key:"pad_cree_"+$},Z(n.titre),9,S5))),128)),(T(!0),w(Qe,null,Je(e.donneesUtilisateur.padsAdmins,(n,$)=>(T(),w("option",{value:n.id,key:"pad_admin_"+$},Z(n.titre)+" ("+Z(e.$t("coadmin"))+")",9,k5))),128))],32)):(T(),w("div",A5,Z(e.$t("aucunPadDestination")),1)),e.verifierColonnesDestination()===!0&&e.padDestination!==""?(T(),w("label",M5,Z(e.$t("colonneDestination")),1)):fe("",!0),e.verifierColonnesDestination()===!0&&e.padDestination!==""?(T(),w("select",{key:3,id:"colonne-destination",onChange:t[279]||(t[279]=n=>e.colonneDestination=n.target.value)},[t[438]||(t[438]=l("option",{value:""},"-",-1)),(T(!0),w(Qe,null,Je(e.definirNombreColonnesDestination(),(n,$)=>(T(),w("option",{value:$,key:"colonne_"+n},Z(n),9,I5))),128))],32)):fe("",!0),l("div",R5,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[280]||(t[280]=(...n)=>e.envoyerBloc&&e.envoyerBloc(...n)),onKeydown:t[281]||(t[281]=Q((...n)=>e.envoyerBloc&&e.envoyerBloc(...n),["enter"]))},Z(e.$t("valider")),41,B5)])])])])])):e.modale==="code-qr"?(T(),w("div",$5,[l("div",D5,[l("div",L5,[l("span",O5,Z(e.$t("codeQR")),1),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModale(),onClick:t[282]||(t[282]=(...n)=>e.fermerModale&&e.fermerModale(...n)),onKeydown:t[283]||(t[283]=Q((...n)=>e.fermerModale&&e.fermerModale(...n),["enter"]))},t[439]||(t[439]=[l("i",{class:"material-icons"},"close",-1)]),40,N5)]),t[440]||(t[440]=l("div",{class:"conteneur"},[l("div",{class:"contenu"},[l("div",{id:"qr"})])],-1))])])):fe("",!0),e.modaleDiaporama?(T(),w("div",P5,[Ii(l("div",{id:"diapositive",class:Ne(["modale-diapositive",{privee:e.donneesBloc.visibilite==="privee"}]),style:rt({"border-color":e.donneesBloc.couleur}),role:"dialog"},[l("div",F5,[l("span",V5,[l("span",null,Z(e.donneesBloc.titre),1),t[441]||(t[441]=ot()),l("span",null,Z(e.$t("par"))+" "+Z(e.definirNom(e.donneesBloc)),1)]),l("span",{class:"fermer",role:"button",tabindex:e.definirTabIndexModaleDiaporama(),onClick:t[284]||(t[284]=(...n)=>e.fermerModaleDiaporama&&e.fermerModaleDiaporama(...n)),onKeydown:t[285]||(t[285]=Q((...n)=>e.fermerModaleDiaporama&&e.fermerModaleDiaporama(...n),["enter"]))},t[442]||(t[442]=[l("i",{class:"material-icons"},"close",-1)]),40,H5)]),l("div",{class:Ne(["contenu ascenseur",{vide:e.donneesBloc.texte===""&&e.donneesBloc.media===""&&e.pad.evaluations==="desactivees"&&e.pad.commentaires==="desactives"&&(e.pad.contributions!=="moderees"||e.pad.contributions==="moderees"&&e.donneesBloc.visibilite==="visible")}]),tabindex:"-1"},[e.donneesBloc.texte!==""?(T(),w("div",q5,[l("div",{class:"texte",innerHTML:e.donneesBloc.texte},null,8,K5)])):fe("",!0),e.donneesBloc.media!==""?(T(),w("div",j5,[e.donneesBloc.iframe===""?(T(),w("div",X5,[e.donneesBloc.type==="image"?(T(),w("img",{key:0,src:"/"+e.definirDossierFichiers(e.pad.id)+"/"+e.pad.id+"/"+e.donneesBloc.media,alt:e.donneesBloc.media},null,8,U5)):e.donneesBloc.type==="lien-image"?(T(),w("img",{key:1,src:e.donneesBloc.media,alt:e.donneesBloc.media},null,8,z5)):e.donneesBloc.type==="audio"?(T(),w("audio",{key:2,controls:"",src:"/"+e.definirDossierFichiers(e.pad.id)+"/"+e.pad.id+"/"+e.donneesBloc.media},null,8,Y5)):e.donneesBloc.type==="video"?(T(),w("video",{key:3,controls:"",playsinline:"",crossOrigin:"anonymous",src:"/"+e.definirDossierFichiers(e.pad.id)+"/"+e.pad.id+"/"+e.donneesBloc.media},null,8,G5)):e.donneesBloc.type==="pdf"?(T(),w("iframe",{key:4,class:"document",src:"/pdfjs/web/viewer.html?file="+e.hote+"/"+e.definirDossierFichiers(e.pad.id)+"/"+e.pad.id+"/"+e.donneesBloc.media,allowfullscreen:""},null,8,x5)):e.donneesBloc.type==="office"||e.donneesBloc.type==="document"?(T(),w("iframe",{key:5,class:"document",src:"https://view.officeapps.live.com/op/embed.aspx?src="+e.hote+"/"+e.definirDossierFichiers(e.pad.id)+"/"+e.pad.id+"/"+e.donneesBloc.media,allowfullscreen:""},null,8,W5)):e.donneesBloc.type==="lien"?(T(),w("span",Q5,[l("a",{href:e.donneesBloc.media,target:"_blank"},[e.donneesBloc.vignette&&e.donneesBloc.vignette!==""?(T(),w("img",{key:0,src:e.donneesBloc.vignette,alt:e.donneesBloc.vignette},null,8,J5)):(T(),w("img",e8))],8,Z5)])):(T(),w("span",t8,[l("a",{href:"/"+e.definirDossierFichiers(e.pad.id)+"/"+e.pad.id+"/"+e.donneesBloc.media,download:""},[e.donneesBloc.vignette&&e.donneesBloc.vignette!==""?(T(),w("img",{key:0,src:e.donneesBloc.vignette,alt:e.donneesBloc.vignette},null,8,n8)):(T(),w("img",a8))],8,i8)]))])):(T(),w("div",{key:1,class:Ne(["media",e.definirTypeMedia()])},[l("div",s8,[e.verifierURL(e.donneesBloc.iframe)===!0?(T(),w("iframe",{key:0,src:e.donneesBloc.iframe,allow:"autoplay; fullscreen"},null,8,o8)):(T(),w("div",{key:1,class:"html",innerHTML:e.donneesBloc.iframe},null,8,r8))])],2))])):fe("",!0),e.donneesBloc.visibilite==="privee"&&e.admin?(T(),w("div",l8,[l("span",{class:"bouton",role:"button",tabindex:e.definirTabIndexModaleDiaporama(),onClick:t[286]||(t[286]=n=>e.autoriserBloc(e.donneesBloc,"privee")),onKeydown:t[287]||(t[287]=Q(n=>e.autoriserBloc(e.donneesBloc,"privee"),["enter"]))},Z(e.$t("afficherCapsule")),41,d8)])):e.pad.contributions==="moderees"&&e.donneesBloc.visibilite==="masquee"?(T(),w("div",u8,[e.admin?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:e.definirTabIndexModaleDiaporama(),onClick:t[288]||(t[288]=n=>e.autoriserBloc(e.donneesBloc,"moderee")),onKeydown:t[289]||(t[289]=Q(n=>e.autoriserBloc(e.donneesBloc,"moderee"),["enter"]))},Z(e.$t("validerCapsule")),41,f8)):e.donneesBloc.identifiant===e.identifiant?(T(),w("span",c8,Z(e.$t("enAttenteModeration")),1)):fe("",!0)])):fe("",!0),e.pad.evaluations==="activees"?(T(),w("div",h8,[l("label",null,Z(e.$t("evaluations")),1),l("div",m8,[l("span",v8,[(T(!0),w(Qe,null,Je(e.definirEvaluationCapsule(e.donneesBloc.evaluations),n=>(T(),w("i",{class:Ne(["material-icons",{evalue:e.verifierUtilisateurEvaluation(e.donneesBloc.evaluations)===!0}]),key:"etoilepleine_"+n},"star",2))),128)),(T(!0),w(Qe,null,Je(5-e.definirEvaluationCapsule(e.donneesBloc.evaluations),n=>(T(),w("i",{class:Ne(["material-icons",{evalue:e.verifierUtilisateurEvaluation(e.donneesBloc.evaluations)===!0}]),key:"etoilevide_"+n},"star_outline",2))),128)),l("span",null,"("+Z(e.donneesBloc.evaluations.length)+")",1)]),e.verifierUtilisateurEvaluation(e.donneesBloc.evaluations)===!1?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:e.definirTabIndexModaleDiaporama(),title:e.$t("evaluerCapsule"),style:rt({color:e.couleur}),onClick:t[290]||(t[290]=n=>e.ouvrirModaleEvaluations(e.donneesBloc.bloc,e.donneesBloc.titre,"")),onKeydown:t[291]||(t[291]=Q(n=>e.ouvrirModaleEvaluations(e.donneesBloc.bloc,e.donneesBloc.titre,""),["enter"]))},t[443]||(t[443]=[l("i",{class:"material-icons"},"add_comment",-1)]),44,p8)):(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:e.definirTabIndexModaleDiaporama(),title:e.$t("evaluerCapsule"),style:rt({color:e.couleur}),onClick:t[292]||(t[292]=n=>e.ouvrirModaleEvaluations(e.donneesBloc.bloc,e.donneesBloc.titre,e.donneesBloc.evaluations)),onKeydown:t[293]||(t[293]=Q(n=>e.ouvrirModaleEvaluations(e.donneesBloc.bloc,e.donneesBloc.titre,e.donneesBloc.evaluations),["enter"]))},t[444]||(t[444]=[l("i",{class:"material-icons"},"rate_review",-1)]),44,b8))])])):fe("",!0),e.pad.commentaires==="actives"?(T(),w("div",g8,[l("label",null,Z(e.$t("commentaires")),1),e.commentaires.length>0?(T(),w("ul",y8,[(T(!0),w(Qe,null,Je(e.commentaires,(n,$)=>(T(),w("li",{id:"commentaire-"+n.id,tabindex:e.definirTabIndexModaleDiaporama(),class:Ne({edition:e.editionCommentaire&&e.commentaireId===n.id,focus:e.focusId===n.id}),onFocus:_=>e.focusId=n.id,key:"commentaire_"+$},[l("span",{class:Ne(["meta",{auteur:n.identifiant===e.identifiant||e.admin}])},Z(e.$t("par"))+" "+Z(e.definirNom(n))+", "+Z(e.$formaterDateRelative(n.date,e.langue)),3),n.identifiant===e.identifiant||e.admin?(T(),w("div",E8,[e.commentaireId!==n.id?(T(),w("span",{key:0,role:"button",tabindex:e.definirTabIndexModaleDiaporama(),title:e.$t("modifierCommentaire"),onClick:_=>e.afficherModifierCommentaire(n.id,n.texte),onKeydown:Q(_=>e.afficherModifierCommentaire(n.id,n.texte),["enter"])},t[445]||(t[445]=[l("i",{class:"material-icons"},"edit",-1)]),40,C8)):e.editionCommentaire&&e.commentaireId===n.id?(T(),w("span",{key:1,role:"button",tabindex:e.definirTabIndexModaleDiaporama(),title:e.$t("annuler"),onClick:t[294]||(t[294]=(..._)=>e.annulerModifierCommentaire&&e.annulerModifierCommentaire(..._)),onKeydown:t[295]||(t[295]=Q((..._)=>e.annulerModifierCommentaire&&e.annulerModifierCommentaire(..._),["enter"]))},t[446]||(t[446]=[l("i",{class:"material-icons"},"close",-1)]),40,T8)):fe("",!0),l("span",{role:"button",tabindex:e.definirTabIndexModaleDiaporama(),title:e.$t("supprimerCommentaire"),onClick:_=>e.afficherSupprimerCommentaire(n.id),onKeydown:Q(_=>e.afficherSupprimerCommentaire(n.id),["enter"])},t[447]||(t[447]=[l("i",{class:"material-icons"},"delete",-1)]),40,w8)])):fe("",!0),e.commentaireId!==n.id||e.commentaireId===n.id&&e.modaleConfirmer?(T(),w("div",{key:1,class:"texte",innerHTML:n.texte},null,8,S8)):e.editionCommentaire&&e.commentaireId===n.id?(T(),w("div",k8,[l("div",{id:"commentaire-modifie",class:Ne({mobile:e.mobile===!0})},null,2),l("button",{tabindex:e.definirTabIndexModaleDiaporama(),title:e.$t("publier"),onClick:t[296]||(t[296]=(..._)=>e.modifierCommentaire&&e.modifierCommentaire(..._))},t[448]||(t[448]=[l("i",{class:"material-icons"},"edit",-1)]),8,A8),e.emojis==="commentaire-modifie"?(T(),Ei(b,{key:0,type:e.emojis,diaporama:e.modaleDiaporama,tabindex:e.definirTabIndexModaleDiaporama(),onEmoji:e.insererEmoji},null,8,["type","diaporama","tabindex","onEmoji"])):fe("",!0)])):fe("",!0)],42,_8))),128))])):(T(),w("div",M8,Z(e.$t("aucunCommentaire")),1)),l("div",I8,[l("div",{id:"commentaire",class:Ne({mobile:e.mobile===!0})},null,2),l("button",{tabindex:e.definirTabIndexModaleDiaporama(),title:e.$t("publier"),onClick:t[297]||(t[297]=(...n)=>e.envoyerCommentaire&&e.envoyerCommentaire(...n))},t[449]||(t[449]=[l("i",{class:"material-icons"},"send",-1)]),8,R8),e.emojis==="commentaire"?(T(),Ei(b,{key:0,type:e.emojis,diaporama:e.modaleDiaporama,tabindex:e.definirTabIndexModaleDiaporama(),onEmoji:e.insererEmoji},null,8,["type","diaporama","tabindex","onEmoji"])):fe("",!0)])])):fe("",!0)],2)],6),[[Ri,!e.chargement]]),e.blocs.length>1?(T(),w("span",{key:0,id:"precedent",role:"button",tabindex:e.definirTabIndexModaleDiaporama(),onClick:t[298]||(t[298]=(...n)=>e.afficherBlocPrecedent&&e.afficherBlocPrecedent(...n)),onKeydown:t[299]||(t[299]=Q((...n)=>e.afficherBlocPrecedent&&e.afficherBlocPrecedent(...n),["enter"]))},t[450]||(t[450]=[l("i",{class:"material-icons"},"arrow_back",-1)]),40,B8)):fe("",!0),e.blocs.length>1?(T(),w("span",{key:1,id:"suivant",role:"button",tabindex:e.definirTabIndexModaleDiaporama(),onClick:t[300]||(t[300]=(...n)=>e.afficherBlocSuivant&&e.afficherBlocSuivant(...n)),onKeydown:t[301]||(t[301]=Q((...n)=>e.afficherBlocSuivant&&e.afficherBlocSuivant(...n),["enter"]))},t[451]||(t[451]=[l("i",{class:"material-icons"},"arrow_forward",-1)]),40,$8)):fe("",!0)])):fe("",!0),e.transcodage||e.progressionEnregistrement?(T(),w("div",D8,[l("div",L8,[l("div",O8,[l("div",N8,[t[452]||(t[452]=l("div",{class:"conteneur-chargement"},[l("div",{class:"chargement"})],-1)),l("span",P8,Z(e.$t("transcodage")),1)])])])])):fe("",!0),e.modaleConfirmer?(T(),w("div",F8,[l("div",V8,[l("div",H8,[l("div",q8,[l("div",{class:"message",innerHTML:e.messageConfirmation},null,8,K8),l("div",j8,[l("span",{class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[302]||(t[302]=(...n)=>e.fermerModaleConfirmer&&e.fermerModaleConfirmer(...n)),onKeydown:t[303]||(t[303]=Q((...n)=>e.fermerModaleConfirmer&&e.fermerModaleConfirmer(...n),["enter"]))},Z(e.$t("non")),41,X8),e.typeConfirmation==="supprimer-bloc"?(T(),w("span",{key:0,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[304]||(t[304]=(...n)=>e.supprimerBloc&&e.supprimerBloc(...n)),onKeydown:t[305]||(t[305]=Q((...n)=>e.supprimerBloc&&e.supprimerBloc(...n),["enter"]))},Z(e.$t("oui")),41,U8)):fe("",!0),e.typeConfirmation==="supprimer-colonne"?(T(),w("span",{key:1,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[306]||(t[306]=(...n)=>e.supprimerColonne&&e.supprimerColonne(...n)),onKeydown:t[307]||(t[307]=Q((...n)=>e.supprimerColonne&&e.supprimerColonne(...n),["enter"]))},Z(e.$t("oui")),41,z8)):fe("",!0),e.typeConfirmation==="supprimer-commentaire"?(T(),w("span",{key:2,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[308]||(t[308]=(...n)=>e.supprimerCommentaire&&e.supprimerCommentaire(...n)),onKeydown:t[309]||(t[309]=Q((...n)=>e.supprimerCommentaire&&e.supprimerCommentaire(...n),["enter"]))},Z(e.$t("oui")),41,Y8)):fe("",!0),e.typeConfirmation==="deconnecter-pad"?(T(),w("span",{key:3,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[310]||(t[310]=(...n)=>e.seDeconnecterPad&&e.seDeconnecterPad(...n)),onKeydown:t[311]||(t[311]=Q((...n)=>e.seDeconnecterPad&&e.seDeconnecterPad(...n),["enter"]))},Z(e.$t("oui")),41,G8)):fe("",!0),e.typeConfirmation==="supprimer-pad"?(T(),w("span",{key:4,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[312]||(t[312]=(...n)=>e.supprimerPad&&e.supprimerPad(...n)),onKeydown:t[313]||(t[313]=Q((...n)=>e.supprimerPad&&e.supprimerPad(...n),["enter"]))},Z(e.$t("oui")),41,x8)):e.typeConfirmation==="reinitialiser-messages"?(T(),w("span",{key:5,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[314]||(t[314]=(...n)=>e.reinitialiserMessages&&e.reinitialiserMessages(...n)),onKeydown:t[315]||(t[315]=Q((...n)=>e.reinitialiserMessages&&e.reinitialiserMessages(...n),["enter"]))},Z(e.$t("oui")),41,W8)):e.typeConfirmation==="reinitialiser-activite"?(T(),w("span",{key:6,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[316]||(t[316]=(...n)=>e.reinitialiserActivite&&e.reinitialiserActivite(...n)),onKeydown:t[317]||(t[317]=Q((...n)=>e.reinitialiserActivite&&e.reinitialiserActivite(...n),["enter"]))},Z(e.$t("oui")),41,Q8)):e.typeConfirmation==="exporter-pad"?(T(),w("span",{key:7,class:"bouton",role:"button",tabindex:e.message===""?0:-1,onClick:t[318]||(t[318]=(...n)=>e.exporterPad&&e.exporterPad(...n)),onKeydown:t[319]||(t[319]=Q((...n)=>e.exporterPad&&e.exporterPad(...n),["enter"]))},Z(e.$t("oui")),41,Z8)):fe("",!0)])])])])])):fe("",!0),t[453]||(t[453]=l("div",{id:"masque"},null,-1)),e.notification!==""?(T(),Ei(p,{key:21,notification:e.notification,onFermer:t[320]||(t[320]=n=>e.notification="")},null,8,["notification"])):fe("",!0),e.message!==""?(T(),Ei(B,{key:22,message:e.message,onElementPrecedent:e.definirElementPrecedent,onFermer:e.fermerMessage},null,8,["message","onElementPrecedent","onFermer"])):fe("",!0),e.chargement?(T(),Ei(te,{key:23})):fe("",!0),e.chargementPage?(T(),Ei(H,{key:24})):fe("",!0)],2)}const e6=ds(kc,[["render",J8],["__scopeId","data-v-66a8d62f"]]),t6=Object.freeze(Object.defineProperty({__proto__:null,default:e6},Symbol.toStringTag,{value:"Module"})),r6=[{configName:"onRenderClient",importPath:"/renderer/+onRenderClient.js",isValueFile:!0,exportValues:Ul},{configName:"Page",importPath:"/pages/p/+Page.vue",isValueFile:!0,exportValues:t6}],l6={onBeforeRenderEnv:{valueSerialized:'{"server":true}',type:"computed",definedAtData:null},dataEnv:{valueSerialized:"null",type:"computed",definedAtData:null},hooksTimeout:{valueSerialized:'{"data":{"warning":10000,"error":60000}}',type:"classic",definedAtData:{filePathToShowToUser:"/renderer/+config.js",fileExportPathToShowToUser:["default","hooksTimeout"]}}};export{r6 as configValuesImported,l6 as configValuesSerialized};
